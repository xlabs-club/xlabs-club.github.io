<!doctype html><html lang=zh data-bs-theme=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preload href=https://www.xlabs.club/fonts/vendor/jost/jost-v4-latin-regular.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://www.xlabs.club/fonts/vendor/jost/jost-v4-latin-500.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://www.xlabs.club/fonts/vendor/jost/jost-v4-latin-700.woff2 as=font type=font/woff2 crossorigin><link rel=preconnect href=https://KMWY81ZWS3-dsn.algolia.net crossorigin><script src=/js/color-mode.86a91f050a481d0a3f0c72ac26543cb6228c770875981c58dcbc008fd3f875c8.js integrity="sha256-hqkfBQpIHQo/DHKsJlQ8tiKMdwh1mBxY3LwAj9P4dcg="></script><link rel=stylesheet href="/main.f7b7005e5fb72110633aef12d36f36acd2855a9cb3a7c54a4e44bd91b378cda0437016affca3c2af77af81d1c1425e55e9c4b0d7581becebbcbcf6ff9a799734.css" integrity="sha512-97cAXl+3IRBjOu8S0282rNKFWpyzp8VKTkS9kbN4zaBDcBav/KPCr3evgdHBQl5V6cSw11gb7Ou8vPb/mnmXNA==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><base href=https://www.xlabs.club/blog/migration-spring-boot-3-to-4/><link rel=canonical href=https://www.xlabs.club/blog/migration-spring-boot-3-to-4/><title>Spring Boot 4 è¿ç§»æŒ‡å—ï¼šä» 3.x å‡çº§åˆ° 4.0 å®Œæ•´æ•™ç¨‹ä¸è¸©å‘å®æˆ˜</title><meta name=description content="Spring Boot 4.0 è¿ç§»å®æˆ˜æŒ‡å—ï¼Œæ¶µç›–æ–°ç‰¹æ€§è§£æã€åºŸå¼ƒ API å¤„ç†ã€Spring Framework 7/Tomcat 11 å˜æ›´ã€è™šæ‹Ÿçº¿ç¨‹é…ç½®ã€å¸¸è§é—®é¢˜ä¸ OpenRewrite è‡ªåŠ¨åŒ–è¿ç§»å·¥å…·"><link rel=icon href=/favicon.ico sizes=32x32><link rel=icon href=/favicon.svg type=image/svg+xml><link rel=apple-touch-icon href=/apple-touch-icon.png sizes=180x180 type=image/png><link rel=icon href=/favicon-192x192.png sizes=192x192 type=image/png><link rel=icon href=/favicon-512x512.png sizes=512x512 type=image/png><link rel=manifest href=/manifest.webmanifest><meta property="og:url" content="https://www.xlabs.club/blog/migration-spring-boot-3-to-4/"><meta property="og:site_name" content="XLabs"><meta property="og:title" content="Spring Boot 3 åˆ° 4 è¿ç§»å®Œå…¨æŒ‡å—ï¼šæ–°ç‰¹æ€§ã€åºŸå¼ƒåŠŸèƒ½ä¸å®æˆ˜è¸©å‘ç»éªŒ"><meta property="og:description" content="æ·±åº¦è§£æ Spring Boot 4.0 æ–°ç‰¹æ€§ï¼ŒåŒ…å« Spring Framework 7ã€Tomcat 11ã€è™šæ‹Ÿçº¿ç¨‹æ”¯æŒã€æ¨¡å—åŒ–æ”¹é€ ç­‰æ ¸å¿ƒå˜æ›´ï¼Œæä¾›å®Œæ•´çš„è¿ç§»æ­¥éª¤ã€å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨åŒ–è¿ç§»å·¥å…·ä½¿ç”¨æŒ‡å—"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-11-25T23:20:22+08:00"><meta property="article:modified_time" content="2025-12-20T16:07:24+08:00"><meta property="article:tag" content="Spring Boot"><meta property="article:tag" content="Spring Boot 4"><meta property="article:tag" content="Spring Framework 7"><meta property="article:tag" content="Jakarta EE"><meta property="article:tag" content="Tomcat 11"><meta property="article:tag" content="Virtual Threads"><meta property="og:image" content="https://www.xlabs.club/cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.xlabs.club/cover.png"><meta name=twitter:title content="Spring Boot 3 åˆ° 4 è¿ç§»å®Œå…¨æŒ‡å—ï¼šæ–°ç‰¹æ€§ã€åºŸå¼ƒåŠŸèƒ½ä¸å®æˆ˜è¸©å‘ç»éªŒ"><meta name=twitter:description content="æ·±åº¦è§£æ Spring Boot 4.0 æ–°ç‰¹æ€§ï¼ŒåŒ…å« Spring Framework 7ã€Tomcat 11ã€è™šæ‹Ÿçº¿ç¨‹æ”¯æŒã€æ¨¡å—åŒ–æ”¹é€ ç­‰æ ¸å¿ƒå˜æ›´ï¼Œæä¾›å®Œæ•´çš„è¿ç§»æ­¥éª¤ã€å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨åŒ–è¿ç§»å·¥å…·ä½¿ç”¨æŒ‡å—"><meta name=twitter:site content="@xlabs-club"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://www.xlabs.club/","name":"å«æ˜Ÿå®éªŒå®¤","position":1},{"@type":"ListItem","item":"https://www.xlabs.club/blog/","name":"Blog","position":2},{"@type":"ListItem","name":"Spring Boot 3 åˆ° 4 è¿ç§»å®Œå…¨æŒ‡å—ï¼šæ–°ç‰¹æ€§ã€åºŸå¼ƒåŠŸèƒ½ä¸å®æˆ˜è¸©å‘ç»éªŒ","position":3}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"BlogPosting","headline":"Spring Boot 4 è¿ç§»æŒ‡å—ï¼šä» 3.x å‡çº§åˆ° 4.0 å®Œæ•´æ•™ç¨‹ä¸è¸©å‘å®æˆ˜","description":"Spring Boot 4.0 è¿ç§»å®æˆ˜æŒ‡å—ï¼Œæ¶µç›–æ–°ç‰¹æ€§è§£æã€åºŸå¼ƒ API å¤„ç†ã€Spring Framework 7\/Tomcat 11 å˜æ›´ã€è™šæ‹Ÿçº¿ç¨‹é…ç½®ã€å¸¸è§é—®é¢˜ä¸ OpenRewrite è‡ªåŠ¨åŒ–è¿ç§»å·¥å…·","isPartOf":{"@id":"https://www.xlabs.club/blog/migration-spring-boot-3-to-4/"},"mainEntityOfPage":{"@id":"https://www.xlabs.club/blog/migration-spring-boot-3-to-4/"},"datePublished":"2025-11-25T23:20:22+08:00","dateModified":"2025-12-20T16:07:24+08:00","author":{"@type":"Organization","name":"XLabs Club å«æ˜Ÿå®éªŒå®¤","url":"https://www.xlabs.club/"},"publisher":{"@type":"Organization","name":"XLabs Club å«æ˜Ÿå®éªŒå®¤"}}]}</script><meta http-equiv=content-language content='zh-cn'></head><body class="single section blog" data-bs-spy=scroll data-bs-target=#toc data-bs-root-margin="0px 0px -60%" data-bs-smooth-scroll=true tabindex=0><div class=sticky-top><header class="navbar navbar-expand-lg"><div class=container-fluid><a class="navbar-brand me-auto me-lg-3" href=/>XLabs</a><div id=docsearch class=d-none tabindex=-1 aria-disabled=true></div><button type=button id=searchToggleMobile class="btn btn-link nav-link mx-2 d-lg-none" aria-label="Search website">
<svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
</button>
<button class="btn btn-link nav-link mx-2 order-3 d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasNavMain aria-controls=offcanvasNavMain aria-label="Open main navigation menu">
<svg class="icon icon-tabler icon-tabler-menu" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="8" x2="20" y2="8"/><line x1="4" y1="16" x2="20" y2="16"/></svg></button><div class="offcanvas offcanvas-end h-auto" tabindex=-1 id=offcanvasNavMain aria-labelledby=offcanvasNavMainLabel><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasNavMainLabel>XLabs</h5><button type=button class="btn btn-link nav-link p-0 ms-auto" data-bs-dismiss=offcanvas aria-label=Close>
<svg class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6 6 18"/><path d="M6 6l12 12"/></svg></button></div><div class="offcanvas-body d-flex flex-column flex-lg-row justify-content-between"><ul class="navbar-nav flex-grow-1"><li class=nav-item><a class=nav-link href=https://www.xlabs.club/docs/guides/introduction/>Docs</a></li><li class=nav-item><a class="nav-link active" href=https://www.xlabs.club/blog/ aria-current=true>Blog</a></li><li class=nav-item><a class=nav-link href=https://www.xlabs.club/blog/xlabs-link-exchange>Links</a></li><li class=nav-item><a class=nav-link href=https://www.xlabs.club/about/>About</a></li></ul><button type=button id=searchToggleDesktop class="btn btn-link nav-link mx-2 d-none d-lg-block" aria-label="Search website">
<svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
</button>
<button id=buttonColorMode class="btn btn-link mx-auto nav-link p-0 ms-lg-2 me-lg-1" type=button aria-label="Toggle theme">
<svg data-bs-theme-value="dark" class="icon icon-tabler icon-tabler-moon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c.132.0.263.0.393.0a7.5 7.5.0 007.92 12.446A9 9 0 1112 2.992z"/></svg>
<svg data-bs-theme-value="light" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-4 0a4 4 0 108 0 4 4 0 10-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></svg></button><ul id=socialMenu class="nav mx-auto flex-row order-lg-4"><li class=nav-item><a class="nav-link social-link" href=https://github.com/xlabs-club/xlabs-club.github.io><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg><small class="ms-2 visually-hidden">GitHub</small></a></li></ul></div></div></div></header></div><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col container-fw d-lg-flex flex-lg-row justify-content-center mx-auto"><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>ç›®å½•</h3><nav id=toc><ul><li><a href=#spring-boot-40-æ ¸å¿ƒæ–°ç‰¹æ€§>Spring Boot 4.0 æ ¸å¿ƒæ–°ç‰¹æ€§</a><ul><li><a href=#æ¨¡å—åŒ–æ¶æ„>æ¨¡å—åŒ–æ¶æ„</a></li><li><a href=#å¢å¼ºçš„é…ç½®å±æ€§å…ƒæ•°æ®>å¢å¼ºçš„é…ç½®å±æ€§å…ƒæ•°æ®</a></li><li><a href=#ä»»åŠ¡è°ƒåº¦å¢å¼º>ä»»åŠ¡è°ƒåº¦å¢å¼º</a></li><li><a href=#åŒ…ç»“æ„å˜åŒ–>åŒ…ç»“æ„å˜åŒ–</a></li></ul></li><li><a href=#spring-framework-70-å¸¦æ¥çš„å¢å¼º>Spring Framework 7.0 å¸¦æ¥çš„å¢å¼º</a><ul><li><a href=#api-ç‰ˆæœ¬æ§åˆ¶>API ç‰ˆæœ¬æ§åˆ¶</a></li><li><a href=#jspecify-ç©ºå®‰å…¨æ³¨è§£>JSpecify ç©ºå®‰å…¨æ³¨è§£</a></li><li><a href=#å¤šçº¿ç¨‹å¼‚æ­¥å¯åŠ¨>å¤šçº¿ç¨‹å¼‚æ­¥å¯åŠ¨</a></li><li><a href=#http-æ¥å£å®¢æˆ·ç«¯>HTTP æ¥å£å®¢æˆ·ç«¯</a></li><li><a href=#å†…ç½®å¼¹æ€§åŠŸèƒ½resilience>å†…ç½®å¼¹æ€§åŠŸèƒ½ï¼ˆResilienceï¼‰</a></li><li><a href=#æµå¼-jms-å®¢æˆ·ç«¯-apijmsclient>æµå¼ JMS å®¢æˆ·ç«¯ APIï¼ˆJmsClientï¼‰</a></li><li><a href=#ç»Ÿä¸€æ¶ˆæ¯è½¬æ¢unified-message-conversion>ç»Ÿä¸€æ¶ˆæ¯è½¬æ¢ï¼ˆUnified Message Conversionï¼‰</a></li><li><a href=#jakarta-ee-11-å‡çº§>Jakarta EE 11 å‡çº§</a></li><li><a href=#junit-4-å’Œ-jackson-2x-å¼ƒç”¨>JUnit 4 å’Œ Jackson 2.x å¼ƒç”¨</a></li><li><a href=#æµ‹è¯•ä¸Šä¸‹æ–‡æš‚åœæœºåˆ¶>æµ‹è¯•ä¸Šä¸‹æ–‡æš‚åœæœºåˆ¶</a></li><li><a href=#spel-å¢å¼º>SpEL å¢å¼º</a></li><li><a href=#ç¨‹åºåŒ–-bean-æ³¨å†Œbeanregistrar>ç¨‹åºåŒ– Bean æ³¨å†Œï¼ˆBeanRegistrarï¼‰</a></li></ul></li><li><a href=#tomcat-11-æ ¸å¿ƒå˜æ›´>Tomcat 11 æ ¸å¿ƒå˜æ›´</a><ul><li><a href=#è™šæ‹Ÿçº¿ç¨‹æ”¯æŒjava-21>è™šæ‹Ÿçº¿ç¨‹æ”¯æŒï¼ˆJava 21+ï¼‰</a></li><li><a href=#websocket-22-æ€§èƒ½æå‡>WebSocket 2.2 æ€§èƒ½æå‡</a></li><li><a href=#servlet-61-å¼‚æ­¥å¤„ç†æ”¹è¿›>Servlet 6.1 å¼‚æ­¥å¤„ç†æ”¹è¿›</a></li><li><a href=#å®‰å…¨å¢å¼º>å®‰å…¨å¢å¼º</a></li><li><a href=#æœ€ä½-java-ç‰ˆæœ¬è¦æ±‚>æœ€ä½ Java ç‰ˆæœ¬è¦æ±‚</a></li><li><a href=#openssl-æ”¯æŒjava-22>OpenSSL æ”¯æŒï¼ˆJava 22+ï¼‰</a></li><li><a href=#javax-åˆ°-jakarta-å‘½åç©ºé—´è¿ç§»>javax. <em>åˆ° jakarta.</em> å‘½åç©ºé—´è¿ç§»</a></li><li><a href=#http-header-å¤§å°å†™å¤„ç†å˜åŒ–>HTTP Header å¤§å°å†™å¤„ç†å˜åŒ–</a></li></ul></li><li><a href=#åºŸå¼ƒåŠŸèƒ½ä¸ç ´åæ€§å˜æ›´>åºŸå¼ƒåŠŸèƒ½ä¸ç ´åæ€§å˜æ›´</a><ul><li><a href=#ç§»é™¤çš„åºŸå¼ƒ-api>ç§»é™¤çš„åºŸå¼ƒ API</a></li><li><a href=#mockitotestexecutionlistener-ç§»é™¤>MockitoTestExecutionListener ç§»é™¤</a></li><li><a href=#websecurityconfigureradapter-ç§»é™¤>WebSecurityConfigurerAdapter ç§»é™¤</a></li><li><a href=#undertow-æ”¯æŒç§»é™¤>Undertow æ”¯æŒç§»é™¤</a></li><li><a href=#spring-batch-é»˜è®¤è¡Œä¸ºå˜æ›´>Spring Batch é»˜è®¤è¡Œä¸ºå˜æ›´</a></li><li><a href=#reactive-pulsar-æ”¯æŒç§»é™¤>Reactive Pulsar æ”¯æŒç§»é™¤</a></li><li><a href=#embedded-executable-uber-jar-launch-scripts-ç§»é™¤>Embedded Executable Uber Jar Launch Scripts ç§»é™¤</a></li><li><a href=#spring-session-hazelcastmongodb-ç§»é™¤>Spring Session Hazelcast/MongoDB ç§»é™¤</a></li></ul></li><li><a href=#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ>å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</a><ul><li><a href=#http-header-å¤§å°å†™é—®é¢˜>HTTP Header å¤§å°å†™é—®é¢˜</a></li><li><a href=#ç¼–è¯‘æ—¶-nullability-é”™è¯¯>ç¼–è¯‘æ—¶ Nullability é”™è¯¯</a></li><li><a href=#jackson-3x-åºåˆ—åŒ–é—®é¢˜>Jackson 3.x åºåˆ—åŒ–é—®é¢˜</a></li><li><a href=#ç¬¬ä¸‰æ–¹åº“ä¸å…¼å®¹>ç¬¬ä¸‰æ–¹åº“ä¸å…¼å®¹</a></li><li><a href=#spring-batch-å…ƒæ•°æ®ä¸¢å¤±>Spring Batch å…ƒæ•°æ®ä¸¢å¤±</a></li><li><a href=#undertow-æ— æ³•ä½¿ç”¨>Undertow æ— æ³•ä½¿ç”¨</a></li><li><a href=#è™šæ‹Ÿçº¿ç¨‹æ€§èƒ½æœªè¾¾é¢„æœŸ>è™šæ‹Ÿçº¿ç¨‹æ€§èƒ½æœªè¾¾é¢„æœŸ</a></li><li><a href=#æµ‹è¯•ä¸Šä¸‹æ–‡ç¼“å­˜é—®é¢˜>æµ‹è¯•ä¸Šä¸‹æ–‡ç¼“å­˜é—®é¢˜</a></li></ul></li><li><a href=#è‡ªåŠ¨åŒ–è¿ç§»å·¥å…·>è‡ªåŠ¨åŒ–è¿ç§»å·¥å…·</a><ul><li><a href=#openrewrite>OpenRewrite</a></li><li><a href=#spring-boot-migrator>Spring Boot Migrator</a></li><li><a href=#windup-red-hat>Windup (Red Hat)</a></li><li><a href=#intellij-idea-è¿ç§»åŠ©æ‰‹>IntelliJ IDEA è¿ç§»åŠ©æ‰‹</a></li><li><a href=#eclipse-transformer>Eclipse Transformer</a></li></ul></li><li><a href=#å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™</a><ul><li><a href=#å®˜æ–¹æ–‡æ¡£>å®˜æ–¹æ–‡æ¡£</a></li><li><a href=#æŠ€æœ¯æ–‡ç« >æŠ€æœ¯æ–‡ç« </a></li><li><a href=#è¿ç§»ç»éªŒ>è¿ç§»ç»éªŒ</a></li><li><a href=#è™šæ‹Ÿçº¿ç¨‹>è™šæ‹Ÿçº¿ç¨‹</a></li><li><a href=#è¿ç§»å·¥å…·>è¿ç§»å·¥å…·</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>Spring Boot 3 åˆ° 4 è¿ç§»å®Œå…¨æŒ‡å—ï¼šæ–°ç‰¹æ€§ã€åºŸå¼ƒåŠŸèƒ½ä¸å®æˆ˜è¸©å‘ç»éªŒ</h1><nav class="toc-mobile d-xl-none" aria-label="Quaternary navigation"><details><summary>ç›®å½•</summary><div class=page-links><nav id=TableOfContents><ul><li><a href=#spring-boot-40-æ ¸å¿ƒæ–°ç‰¹æ€§>Spring Boot 4.0 æ ¸å¿ƒæ–°ç‰¹æ€§</a><ul><li><a href=#æ¨¡å—åŒ–æ¶æ„>æ¨¡å—åŒ–æ¶æ„</a></li><li><a href=#å¢å¼ºçš„é…ç½®å±æ€§å…ƒæ•°æ®>å¢å¼ºçš„é…ç½®å±æ€§å…ƒæ•°æ®</a></li><li><a href=#ä»»åŠ¡è°ƒåº¦å¢å¼º>ä»»åŠ¡è°ƒåº¦å¢å¼º</a></li><li><a href=#åŒ…ç»“æ„å˜åŒ–>åŒ…ç»“æ„å˜åŒ–</a></li></ul></li><li><a href=#spring-framework-70-å¸¦æ¥çš„å¢å¼º>Spring Framework 7.0 å¸¦æ¥çš„å¢å¼º</a><ul><li><a href=#api-ç‰ˆæœ¬æ§åˆ¶>API ç‰ˆæœ¬æ§åˆ¶</a></li><li><a href=#jspecify-ç©ºå®‰å…¨æ³¨è§£>JSpecify ç©ºå®‰å…¨æ³¨è§£</a></li><li><a href=#å¤šçº¿ç¨‹å¼‚æ­¥å¯åŠ¨>å¤šçº¿ç¨‹å¼‚æ­¥å¯åŠ¨</a></li><li><a href=#http-æ¥å£å®¢æˆ·ç«¯>HTTP æ¥å£å®¢æˆ·ç«¯</a></li><li><a href=#å†…ç½®å¼¹æ€§åŠŸèƒ½resilience>å†…ç½®å¼¹æ€§åŠŸèƒ½ï¼ˆResilienceï¼‰</a></li><li><a href=#æµå¼-jms-å®¢æˆ·ç«¯-apijmsclient>æµå¼ JMS å®¢æˆ·ç«¯ APIï¼ˆJmsClientï¼‰</a></li><li><a href=#ç»Ÿä¸€æ¶ˆæ¯è½¬æ¢unified-message-conversion>ç»Ÿä¸€æ¶ˆæ¯è½¬æ¢ï¼ˆUnified Message Conversionï¼‰</a></li><li><a href=#jakarta-ee-11-å‡çº§>Jakarta EE 11 å‡çº§</a></li><li><a href=#junit-4-å’Œ-jackson-2x-å¼ƒç”¨>JUnit 4 å’Œ Jackson 2.x å¼ƒç”¨</a></li><li><a href=#æµ‹è¯•ä¸Šä¸‹æ–‡æš‚åœæœºåˆ¶>æµ‹è¯•ä¸Šä¸‹æ–‡æš‚åœæœºåˆ¶</a></li><li><a href=#spel-å¢å¼º>SpEL å¢å¼º</a></li><li><a href=#ç¨‹åºåŒ–-bean-æ³¨å†Œbeanregistrar>ç¨‹åºåŒ– Bean æ³¨å†Œï¼ˆBeanRegistrarï¼‰</a></li></ul></li><li><a href=#tomcat-11-æ ¸å¿ƒå˜æ›´>Tomcat 11 æ ¸å¿ƒå˜æ›´</a><ul><li><a href=#è™šæ‹Ÿçº¿ç¨‹æ”¯æŒjava-21>è™šæ‹Ÿçº¿ç¨‹æ”¯æŒï¼ˆJava 21+ï¼‰</a></li><li><a href=#websocket-22-æ€§èƒ½æå‡>WebSocket 2.2 æ€§èƒ½æå‡</a></li><li><a href=#servlet-61-å¼‚æ­¥å¤„ç†æ”¹è¿›>Servlet 6.1 å¼‚æ­¥å¤„ç†æ”¹è¿›</a></li><li><a href=#å®‰å…¨å¢å¼º>å®‰å…¨å¢å¼º</a></li><li><a href=#æœ€ä½-java-ç‰ˆæœ¬è¦æ±‚>æœ€ä½ Java ç‰ˆæœ¬è¦æ±‚</a></li><li><a href=#openssl-æ”¯æŒjava-22>OpenSSL æ”¯æŒï¼ˆJava 22+ï¼‰</a></li><li><a href=#javax-åˆ°-jakarta-å‘½åç©ºé—´è¿ç§»>javax. <em>åˆ° jakarta.</em> å‘½åç©ºé—´è¿ç§»</a></li><li><a href=#http-header-å¤§å°å†™å¤„ç†å˜åŒ–>HTTP Header å¤§å°å†™å¤„ç†å˜åŒ–</a></li></ul></li><li><a href=#åºŸå¼ƒåŠŸèƒ½ä¸ç ´åæ€§å˜æ›´>åºŸå¼ƒåŠŸèƒ½ä¸ç ´åæ€§å˜æ›´</a><ul><li><a href=#ç§»é™¤çš„åºŸå¼ƒ-api>ç§»é™¤çš„åºŸå¼ƒ API</a></li><li><a href=#mockitotestexecutionlistener-ç§»é™¤>MockitoTestExecutionListener ç§»é™¤</a></li><li><a href=#websecurityconfigureradapter-ç§»é™¤>WebSecurityConfigurerAdapter ç§»é™¤</a></li><li><a href=#undertow-æ”¯æŒç§»é™¤>Undertow æ”¯æŒç§»é™¤</a></li><li><a href=#spring-batch-é»˜è®¤è¡Œä¸ºå˜æ›´>Spring Batch é»˜è®¤è¡Œä¸ºå˜æ›´</a></li><li><a href=#reactive-pulsar-æ”¯æŒç§»é™¤>Reactive Pulsar æ”¯æŒç§»é™¤</a></li><li><a href=#embedded-executable-uber-jar-launch-scripts-ç§»é™¤>Embedded Executable Uber Jar Launch Scripts ç§»é™¤</a></li><li><a href=#spring-session-hazelcastmongodb-ç§»é™¤>Spring Session Hazelcast/MongoDB ç§»é™¤</a></li></ul></li><li><a href=#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ>å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</a><ul><li><a href=#http-header-å¤§å°å†™é—®é¢˜>HTTP Header å¤§å°å†™é—®é¢˜</a></li><li><a href=#ç¼–è¯‘æ—¶-nullability-é”™è¯¯>ç¼–è¯‘æ—¶ Nullability é”™è¯¯</a></li><li><a href=#jackson-3x-åºåˆ—åŒ–é—®é¢˜>Jackson 3.x åºåˆ—åŒ–é—®é¢˜</a></li><li><a href=#ç¬¬ä¸‰æ–¹åº“ä¸å…¼å®¹>ç¬¬ä¸‰æ–¹åº“ä¸å…¼å®¹</a></li><li><a href=#spring-batch-å…ƒæ•°æ®ä¸¢å¤±>Spring Batch å…ƒæ•°æ®ä¸¢å¤±</a></li><li><a href=#undertow-æ— æ³•ä½¿ç”¨>Undertow æ— æ³•ä½¿ç”¨</a></li><li><a href=#è™šæ‹Ÿçº¿ç¨‹æ€§èƒ½æœªè¾¾é¢„æœŸ>è™šæ‹Ÿçº¿ç¨‹æ€§èƒ½æœªè¾¾é¢„æœŸ</a></li><li><a href=#æµ‹è¯•ä¸Šä¸‹æ–‡ç¼“å­˜é—®é¢˜>æµ‹è¯•ä¸Šä¸‹æ–‡ç¼“å­˜é—®é¢˜</a></li></ul></li><li><a href=#è‡ªåŠ¨åŒ–è¿ç§»å·¥å…·>è‡ªåŠ¨åŒ–è¿ç§»å·¥å…·</a><ul><li><a href=#openrewrite>OpenRewrite</a></li><li><a href=#spring-boot-migrator>Spring Boot Migrator</a></li><li><a href=#windup-red-hat>Windup (Red Hat)</a></li><li><a href=#intellij-idea-è¿ç§»åŠ©æ‰‹>IntelliJ IDEA è¿ç§»åŠ©æ‰‹</a></li><li><a href=#eclipse-transformer>Eclipse Transformer</a></li></ul></li><li><a href=#å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™</a><ul><li><a href=#å®˜æ–¹æ–‡æ¡£>å®˜æ–¹æ–‡æ¡£</a></li><li><a href=#æŠ€æœ¯æ–‡ç« >æŠ€æœ¯æ–‡ç« </a></li><li><a href=#è¿ç§»ç»éªŒ>è¿ç§»ç»éªŒ</a></li><li><a href=#è™šæ‹Ÿçº¿ç¨‹>è™šæ‹Ÿçº¿ç¨‹</a></li><li><a href=#è¿ç§»å·¥å…·>è¿ç§»å·¥å…·</a></li></ul></li></ul></nav></div></details></nav><p>2025 å¹´ 11 æœˆï¼ŒSpring Boot 4.0 æ­£å¼å‘å¸ƒï¼Œè¿™æ¬¡å‡çº§è¢«ä¸šç•Œç§°ä¸º<strong>çˆ†ç‚¸æ€§å‡çº§</strong>ã€‚åŒæ—¶å¯¹äºäº‘åŸç”Ÿåº”ç”¨è€Œè¨€ï¼Œè¿™æ˜¯ä¸€æ¬¡<strong>ä¸å¯é”™è¿‡çš„æ€§èƒ½ä¸æ•ˆç‡è·ƒè¿</strong>ï¼š</p><ul><li>ğŸ³ <strong>å®¹å™¨åŒ–å‹å¥½</strong>ï¼šæ¨¡å—åŒ–æ¶æ„å‡å°‘ 30-50% è¿è¡Œæ—¶å ç”¨ï¼Œé•œåƒæ›´å°ã€å¯åŠ¨æ›´å¿«</li><li>âš¡ <strong>å¯åŠ¨é€Ÿåº¦æå‡ 30-50%</strong>ï¼šå¤šçº¿ç¨‹å¼‚æ­¥å¯åŠ¨æœºåˆ¶ï¼Œå®¹å™¨å†·å¯åŠ¨æ—¶é—´æ˜¾è‘—ç¼©çŸ­ï¼Œæ›´é€‚åˆ Kubernetes å¿«é€Ÿæ‰©ç¼©å®¹</li><li>ğŸš€ <strong>2-3 å€ååé‡æå‡</strong>ï¼šè™šæ‹Ÿçº¿ç¨‹åŸç”Ÿæ”¯æŒï¼ŒI/O å¯†é›†å‹å¾®æœåŠ¡èµ„æºåˆ©ç”¨ç‡å¤§å¹…æå‡ï¼Œå•å®ä¾‹å¯æ‰¿è½½æ›´é«˜å¹¶å‘</li><li>ğŸ¯ <strong>äº‘åŸç”Ÿç‰¹æ€§å¢å¼º</strong>ï¼šå†…ç½®å¼¹æ€§åŠŸèƒ½ï¼ˆé‡è¯•ã€é™æµï¼‰ã€HTTP æ¥å£å®¢æˆ·ç«¯è‡ªåŠ¨é…ç½®ï¼Œç®€åŒ–å¾®æœåŠ¡é—´é€šä¿¡</li></ul><p>ä½†è¿™æ¬¡å‡çº§ä¹Ÿå¸¦æ¥äº† 36 ä¸ªåºŸå¼ƒ API ç§»é™¤ã€æ¨¡å—åŒ–æ¶æ„é‡æ„ã€Tomcat 11 å˜æ›´ç­‰æŒ‘æˆ˜ã€‚æœ¬æ–‡åŸºäº Spring Boot å®˜æ–¹æ–‡æ¡£å’Œç”Ÿäº§ç¯å¢ƒè¿ç§»ç»éªŒï¼Œä»åŸç†åˆ°è¸©å‘ï¼Œæä¾›<strong>å®Œæ•´ã€å®ç”¨çš„è¿ç§»æŒ‡å—</strong>ï¼ŒåŠ©ä½ å¹³ç¨³å®Œæˆäº‘åŸç”Ÿåº”ç”¨çš„å‡çº§ã€‚</p><h2 id=spring-boot-40-æ ¸å¿ƒæ–°ç‰¹æ€§>Spring Boot 4.0 æ ¸å¿ƒæ–°ç‰¹æ€§<a href=#spring-boot-40-æ ¸å¿ƒæ–°ç‰¹æ€§ class=anchor aria-hidden=true>#</a></h2><p>ä½œä¸º Spring Boot 3.x ä¹‹åçš„é¦–ä¸ªå¤§ç‰ˆæœ¬æ›´æ–°ï¼ŒSpring Boot 4.0 åŸºäº Spring Framework 7.0ã€Jakarta EE 11 å’Œ Java 17+ï¼ˆæ¨è Java 21 æˆ– 25ï¼‰ï¼Œå¸¦æ¥äº†æ¨¡å—åŒ–æ¶æ„é‡æ„ã€è™šæ‹Ÿçº¿ç¨‹åŸç”Ÿæ”¯æŒã€HTTP æœåŠ¡å®¢æˆ·ç«¯è‡ªåŠ¨é…ç½®ç­‰é‡å¤§å˜åŒ–ã€‚</p><p>Spring Boot 4.0 é…å¥—ä½¿ç”¨ <strong>Spring Cloud 2025.1.x</strong>ã€‚è™½ç„¶ç‰ˆæœ¬å·çœ‹èµ·æ¥åªæ˜¯ä¸­å·ç‰ˆæœ¬å˜æ›´ï¼Œä½†å®é™…ä¸Šè¿™æ˜¯ä¸€æ¬¡<strong>å¤§ç‰ˆæœ¬å˜æ›´</strong>ï¼ŒåŒ…å«äº†å¤§é‡ç ´åæ€§å˜æ›´å’Œé‡è¦æ›´æ–°ã€‚</p><h3 id=æ¨¡å—åŒ–æ¶æ„>æ¨¡å—åŒ–æ¶æ„<a href=#æ¨¡å—åŒ–æ¶æ„ class=anchor aria-hidden=true>#</a></h3><p>Spring Boot 4 å°† <code>spring-boot-autoconfigure</code> æ‹†åˆ†ä¸ºå¤šä¸ªä¸“æ³¨çš„æ¨¡å—ï¼Œæ¯ä¸ªæŠ€æœ¯éƒ½æœ‰ç‹¬ç«‹çš„ starter å’Œå¯¹åº”çš„æµ‹è¯• starterã€‚</p><p><strong>ä¸»è¦å˜åŒ–ï¼š</strong></p><ul><li>æ¨¡å—å‘½åï¼š<code>spring-boot-&lt;technology></code>ï¼ŒåŒ…è·¯å¾„ï¼š<code>org.springframework.boot.&lt;technology></code></li><li>Starter å‘½åï¼š<code>spring-boot-starter-&lt;technology></code> å’Œ <code>spring-boot-starter-&lt;technology>-test</code></li><li>ä¹‹å‰æ²¡æœ‰ starter çš„æŠ€æœ¯ï¼ˆå¦‚ Flywayã€Liquibaseï¼‰ç°åœ¨éœ€è¦æ˜¾å¼æ·»åŠ å¯¹åº”çš„ starter</li></ul><p><strong>æ¨¡å—åŒ–çš„ä¼˜åŠ¿ï¼š</strong></p><ul><li><strong>å‡å°‘ IDE å¹²æ‰°</strong>ï¼šIDE è‡ªåŠ¨å®Œæˆåªæ˜¾ç¤ºä½ å®é™…ä½¿ç”¨çš„æŠ€æœ¯ç›¸å…³çš„ç±»å’Œé…ç½®å±æ€§ï¼Œä¸å†å‡ºç°æ— å…³çš„ä»£ç æç¤ºã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨ GraphQLï¼ŒIDE ä¸ä¼šæç¤º GraphQL ç›¸å…³çš„é…ç½®å±æ€§</li><li><strong>æ›´å°çš„è¿è¡Œæ—¶å ç”¨</strong>ï¼šåªå¼•å…¥å®é™…ä½¿ç”¨çš„æ¨¡å—ï¼Œå‡å°‘ç±»è·¯å¾„å¼€é”€å’Œå¯åŠ¨æ‰«ææˆæœ¬ã€‚Spring Boot 3.5 çš„ <code>spring-boot-autoconfigure</code> æ˜¯ 2 MiBï¼Œæ¨¡å—åŒ–ååªå¼•å…¥éœ€è¦çš„æ¨¡å—ï¼Œæ˜¾è‘—å‡å°‘å ç”¨</li><li><strong>é¿å…æ„å¤–è‡ªåŠ¨é…ç½®</strong>ï¼šæ¨¡å—åŒ–åï¼ŒSpring Boot èƒ½æ›´å‡†ç¡®åœ°åˆ¤æ–­ä½ çš„æ„å›¾ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåªä½¿ç”¨ <code>WebClient</code>ï¼ˆé€šè¿‡ <code>spring-boot-starter-webclient</code>ï¼‰ï¼Œä¸ä¼šæ„å¤–å¯ç”¨ Web æœåŠ¡å™¨è‡ªåŠ¨é…ç½®ï¼Œä¸å†éœ€è¦è°ƒç”¨ <code>SpringApplication.setWebApplicationType(WebApplicationType.NONE)</code></li><li><strong>å¯ç”¨æ–°ç”¨ä¾‹</strong>ï¼šä¾‹å¦‚ï¼Œç°åœ¨å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ Micrometer æŒ‡æ ‡ï¼ˆ<code>spring-boot-starter-micrometer-metrics</code>ï¼‰ï¼Œè€Œä¸éœ€è¦å®Œæ•´çš„ Actuator ä¾èµ–é“¾</li><li><strong>æ›´å¥½çš„ç»´æŠ¤æ€§</strong>ï¼šæ¨¡å—è¾¹ç•Œæˆä¸ºæ˜ç¡®çš„å¥‘çº¦ï¼Œè€Œä¸æ˜¯è½¯çº¦å®šï¼Œä¾¿äºå›¢é˜Ÿåä½œå’Œä»£ç ç»´æŠ¤</li></ul><p><strong>æµ‹è¯•æ”¯æŒçš„æ¨¡å—åŒ–ï¼š</strong></p><p><code>spring-boot-test-autoconfigure</code> ä¹Ÿè¢«æ¨¡å—åŒ–äº†ã€‚æµ‹è¯•ç›¸å…³çš„æ³¨è§£ç°åœ¨ä½äºå¯¹åº”çš„æµ‹è¯•æ¨¡å—ä¸­ã€‚ä¾‹å¦‚ï¼Œ<code>@AutoConfigureDataJdbc</code> æ³¨è§£ç°åœ¨ä½äº <code>spring-boot-starter-data-jdbc-test</code> æ¨¡å—ä¸­ï¼Œä¸ <code>spring-boot-starter-data-jdbc</code> å¯¹é½ã€‚</p><p><strong>æµ‹è¯• Starter çš„ä¼ é€’æ€§ï¼š</strong></p><p>æ‰€æœ‰ test starter éƒ½ä¼šä¼ é€’æ€§åœ°å¼•å…¥ <code>spring-boot-starter-test</code>ï¼Œå› æ­¤ä¸éœ€è¦å†å•ç‹¬å£°æ˜ <code>spring-boot-starter-test</code>ã€‚åªéœ€è¦åˆ—å‡ºè¢«æµ‹è¯•æŠ€æœ¯å¯¹åº”çš„ test starter å³å¯ã€‚</p><p><strong>ä¸»è¦åºŸå¼ƒ Starter å’Œæ›¿ä»£æ–¹æ¡ˆï¼š</strong></p><table><thead><tr><th>åºŸå¼ƒ Starter</th><th>æ›¿ä»£</th></tr></thead><tbody><tr><td><code>spring-boot-starter-web</code></td><td><code>spring-boot-starter-webmvc</code></td></tr><tr><td><code>spring-boot-starter-aop</code></td><td><code>spring-boot-starter-aspectj</code></td></tr><tr><td><code>spring-boot-starter-oauth2-authorization-server</code></td><td><code>spring-boot-starter-security-oauth2-authorization-server</code></td></tr><tr><td><code>spring-boot-starter-oauth2-client</code></td><td><code>spring-boot-starter-security-oauth2-client</code></td></tr><tr><td><code>spring-boot-starter-oauth2-resource-server</code></td><td><code>spring-boot-starter-security-oauth2-resource-server</code></td></tr><tr><td><code>spring-boot-starter-web-services</code></td><td><code>spring-boot-starter-webservices</code></td></tr></tbody></table><p><strong>å…¶ä»–è¿ç§»è¦ç‚¹ï¼š</strong></p><ul><li>æµ‹è¯•ä¾èµ–éœ€è¦æ·»åŠ å¯¹åº”çš„ <code>-test</code> starterï¼Œå¦‚ <code>spring-boot-starter-security-test</code></li><li>ä¹‹å‰æ²¡æœ‰ starter çš„æŠ€æœ¯ï¼ˆå¦‚ Flywayã€Liquibaseï¼‰ç°åœ¨éœ€è¦æ˜¾å¼æ·»åŠ å¯¹åº”çš„ starter</li></ul><p><strong>å®Œæ•´çš„ Starter åˆ—è¡¨ï¼š</strong></p><p>Spring Boot 4.0 ç»Ÿä¸€äº† starter çš„ä½¿ç”¨æ–¹å¼ï¼šå¤§å¤šæ•°æŠ€æœ¯éƒ½æœ‰ä¸“é—¨çš„ starterï¼Œæ¯ä¸ª starter éƒ½æœ‰å¯¹åº”çš„ test starterã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„åˆ—è¡¨ï¼ˆå‚è€ƒ <a href=https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-4.0-Migration-Guide#starters target=_blank rel=noopener>å®˜æ–¹è¿ç§»æŒ‡å—</a>
ï¼‰ï¼š</p><table><thead><tr><th>Technology</th><th>Main Dependency</th><th>Test Dependency</th></tr></thead><tbody><tr><td><strong>Core Starters</strong></td><td></td><td></td></tr><tr><td>AspectJ</td><td><code>spring-boot-starter-aspectj</code></td><td><code>spring-boot-starter-aspectj-test</code></td></tr><tr><td>Cloud Foundry Support</td><td><code>spring-boot-starter-cloudfoundry</code></td><td><code>spring-boot-starter-cloudfoundry-test</code></td></tr><tr><td>Jakarta Validation</td><td><code>spring-boot-starter-validation</code></td><td><code>spring-boot-starter-validation-test</code></td></tr><tr><td>Kotlin Serialization</td><td><code>spring-boot-starter-kotlin-serialization</code></td><td><code>spring-boot-starter-kotlin-serialization-test</code></td></tr><tr><td>Reactor</td><td><code>spring-boot-starter-reactor</code></td><td><code>spring-boot-starter-reactor-test</code></td></tr><tr><td><strong>Web Server Starters</strong></td><td></td><td></td></tr><tr><td>Jetty</td><td><code>spring-boot-starter-jetty</code></td><td><em>none</em></td></tr><tr><td>Reactor Netty</td><td><code>spring-boot-starter-reactor-netty</code></td><td><em>none</em></td></tr><tr><td>Tomcat</td><td><code>spring-boot-starter-tomcat</code></td><td><em>none</em></td></tr><tr><td><strong>Web Client Starters</strong></td><td></td><td></td></tr><tr><td>Spring&rsquo;s Imperative <code>RestClient</code> and <code>RestTemplate</code></td><td><code>spring-boot-starter-restclient</code></td><td><code>spring-boot-starter-restclient-test</code></td></tr><tr><td>Spring&rsquo;s Reactive <code>WebClient</code></td><td><code>spring-boot-starter-webclient</code></td><td><code>spring-boot-starter-webclient-test</code></td></tr><tr><td><strong>Web Starters</strong></td><td></td><td></td></tr><tr><td>Jersey</td><td><code>spring-boot-starter-jersey</code></td><td><code>spring-boot-starter-jersey-test</code></td></tr><tr><td>Spring GraphQL</td><td><code>spring-boot-starter-graphql</code></td><td><code>spring-boot-starter-graphql-test</code></td></tr><tr><td>Spring HATEOAS</td><td><code>spring-boot-starter-hateoas</code></td><td><code>spring-boot-starter-hateoas-test</code></td></tr><tr><td>Spring Session Data Redis</td><td><code>spring-boot-starter-session-data-redis</code></td><td><code>spring-boot-starter-session-data-redis-test</code></td></tr><tr><td>Spring Session JDBC</td><td><code>spring-boot-starter-session-jdbc</code></td><td><code>spring-boot-starter-session-jdbc-test</code></td></tr><tr><td>Spring Web MVC</td><td><code>spring-boot-starter-webmvc</code></td><td><code>spring-boot-starter-webmvc-test</code></td></tr><tr><td>Spring WebFlux</td><td><code>spring-boot-starter-webflux</code></td><td><code>spring-boot-starter-webflux-test</code></td></tr><tr><td>Spring Webservices</td><td><code>spring-boot-starter-webservices</code></td><td><code>spring-boot-starter-webservices-test</code></td></tr><tr><td><strong>Database Starters</strong></td><td></td><td></td></tr><tr><td>Cassandra</td><td><code>spring-boot-starter-cassandra</code></td><td><code>spring-boot-starter-cassandra-test</code></td></tr><tr><td>Couchbase</td><td><code>spring-boot-starter-couchbase</code></td><td><code>spring-boot-starter-couchbase-test</code></td></tr><tr><td>Elasticsearch</td><td><code>spring-boot-starter-elasticsearch</code></td><td><code>spring-boot-starter-elasticsearch-test</code></td></tr><tr><td>Flyway</td><td><code>spring-boot-starter-flyway</code></td><td><code>spring-boot-starter-flyway-test</code></td></tr><tr><td>JDBC</td><td><code>spring-boot-starter-jdbc</code></td><td><code>spring-boot-starter-jdbc-test</code></td></tr><tr><td>jOOQ</td><td><code>spring-boot-starter-jooq</code></td><td><code>spring-boot-starter-jooq-test</code></td></tr><tr><td>Liquibase</td><td><code>spring-boot-starter-liquibase</code></td><td><code>spring-boot-starter-liquibase-test</code></td></tr><tr><td>LDAP</td><td><code>spring-boot-starter-ldap</code></td><td><code>spring-boot-starter-ldap-test</code></td></tr><tr><td>MongoDB</td><td><code>spring-boot-starter-mongodb</code></td><td><code>spring-boot-starter-mongodb-test</code></td></tr><tr><td>Neo4J</td><td><code>spring-boot-starter-neo4j</code></td><td><code>spring-boot-starter-neo4j-test</code></td></tr><tr><td>R2DBC</td><td><code>spring-boot-starter-r2dbc</code></td><td><code>spring-boot-starter-r2dbc-test</code></td></tr><tr><td><strong>Spring Data Starters</strong></td><td></td><td></td></tr><tr><td>Spring Data Cassandra</td><td><code>spring-boot-starter-data-cassandra</code> æˆ– <code>spring-boot-starter-data-cassandra-reactive</code></td><td><code>spring-boot-starter-data-cassandra-test</code> æˆ– <code>spring-boot-starter-data-cassandra-reactive-test</code></td></tr><tr><td>Spring Data Couchbase</td><td><code>spring-boot-starter-data-couchbase</code> æˆ– <code>spring-boot-starter-data-couchbase-reactive</code></td><td><code>spring-boot-starter-data-couchbase-test</code> æˆ– <code>spring-boot-starter-data-couchbase-reactive-test</code></td></tr><tr><td>Spring Data Elasticsearch</td><td><code>spring-boot-starter-data-elasticsearch</code></td><td><code>spring-boot-starter-data-elasticsearch-test</code></td></tr><tr><td>Spring Data JDBC</td><td><code>spring-boot-starter-data-jdbc</code></td><td><code>spring-boot-starter-data-jdbc-test</code></td></tr><tr><td>Spring Data JPA (using Hibernate)</td><td><code>spring-boot-starter-data-jpa</code></td><td><code>spring-boot-starter-data-jpa-test</code></td></tr><tr><td>Spring Data LDAP</td><td><code>spring-boot-starter-data-ldap</code></td><td><code>spring-boot-starter-data-ldap-test</code></td></tr><tr><td>Spring Data MongoDB</td><td><code>spring-boot-starter-data-mongodb</code> æˆ– <code>spring-boot-starter-data-mongodb-reactive</code></td><td><code>spring-boot-starter-data-mongodb-test</code> æˆ– <code>spring-boot-starter-data-mongodb-reactive-test</code></td></tr><tr><td>Spring Data Neo4J</td><td><code>spring-boot-starter-data-neo4j</code></td><td><code>spring-boot-starter-data-neo4j-test</code></td></tr><tr><td>Spring Data R2DBC</td><td><code>spring-boot-starter-data-r2dbc</code></td><td><code>spring-boot-starter-data-r2dbc-test</code></td></tr><tr><td>Spring Data Redis</td><td><code>spring-boot-starter-data-redis</code> æˆ– <code>spring-boot-starter-data-redis-reactive</code></td><td><code>spring-boot-starter-data-redis-test</code> æˆ– <code>spring-boot-starter-data-redis-reactive-test</code></td></tr><tr><td>Spring Data REST</td><td><code>spring-boot-starter-data-rest</code></td><td><code>spring-boot-starter-data-rest-test</code></td></tr><tr><td><strong>IO Starters</strong></td><td></td><td></td></tr><tr><td>Hazelcast</td><td><code>spring-boot-starter-hazelcast</code></td><td><code>spring-boot-starter-hazelcast-test</code></td></tr><tr><td>Mail</td><td><code>spring-boot-starter-mail</code></td><td><code>spring-boot-starter-mail-test</code></td></tr><tr><td>Quartz</td><td><code>spring-boot-starter-quartz</code></td><td><code>spring-boot-starter-quartz-test</code></td></tr><tr><td>SendGrid</td><td><code>spring-boot-starter-sendgrid</code></td><td><code>spring-boot-starter-sendgrid-test</code></td></tr><tr><td>Spring Caching Support</td><td><code>spring-boot-starter-cache</code></td><td><code>spring-boot-starter-cache-test</code></td></tr><tr><td>Spring Batch (with JDBC)</td><td><code>spring-boot-starter-batch-jdbc</code></td><td><code>spring-boot-starter-batch-jdbc-test</code></td></tr><tr><td>Spring Batch (without JDBC)</td><td><code>spring-boot-starter-batch</code></td><td><code>spring-boot-starter-batch-test</code></td></tr><tr><td><strong>JSON Starters</strong></td><td></td><td></td></tr><tr><td>GSON</td><td><code>spring-boot-starter-gson</code></td><td><code>spring-boot-starter-gson-test</code></td></tr><tr><td>Jackson</td><td><code>spring-boot-starter-jackson</code></td><td><code>spring-boot-starter-jackson-test</code></td></tr><tr><td>JSONB</td><td><code>spring-boot-starter-jsonb</code></td><td><code>spring-boot-starter-jsonb-test</code></td></tr><tr><td><strong>Messaging Starters</strong></td><td></td><td></td></tr><tr><td>ActiveMQ</td><td><code>spring-boot-starter-activemq</code></td><td><code>spring-boot-starter-activemq-test</code></td></tr><tr><td>Artemis</td><td><code>spring-boot-starter-artemis</code></td><td><code>spring-boot-starter-artemis-test</code></td></tr><tr><td>JMS</td><td><code>spring-boot-starter-jms</code></td><td><code>spring-boot-starter-jms-test</code></td></tr><tr><td>RSocket</td><td><code>spring-boot-starter-rsocket</code></td><td><code>spring-boot-starter-rsocket-test</code></td></tr><tr><td>Spring AMQP</td><td><code>spring-boot-starter-amqp</code></td><td><code>spring-boot-starter-amqp-test</code></td></tr><tr><td>Spring Integration</td><td><code>spring-boot-starter-integration</code></td><td><code>spring-boot-starter-integration-test</code></td></tr><tr><td>Spring for Apache Kafka</td><td><code>spring-boot-starter-kafka</code></td><td><code>spring-boot-starter-kafka-test</code></td></tr><tr><td>Spring for Apache Pulsar</td><td><code>spring-boot-starter-pulsar</code></td><td><code>spring-boot-starter-pulsar-test</code></td></tr><tr><td>Websockets</td><td><code>spring-boot-starter-websocket</code></td><td><code>spring-boot-starter-websocket-test</code></td></tr><tr><td><strong>Security Starters</strong></td><td></td><td></td></tr><tr><td>Spring Security</td><td><code>spring-boot-starter-security</code></td><td><code>spring-boot-starter-security-test</code></td></tr><tr><td>Spring Security OAuth Authorization Server</td><td><code>spring-boot-starter-security-oauth2-authorization-server</code></td><td><code>spring-boot-starter-security-oauth2-authorization-server-test</code></td></tr><tr><td>Spring Security OAuth Client</td><td><code>spring-boot-starter-security-oauth2-client</code></td><td><code>spring-boot-starter-security-oauth2-client-test</code></td></tr><tr><td>Spring Security OAuth Resource Server</td><td><code>spring-boot-starter-security-oauth2-resource-server</code></td><td><code>spring-boot-starter-security-oauth2-resource-server-test</code></td></tr><tr><td>Spring Security SAML</td><td><code>spring-boot-starter-security-saml2</code></td><td><code>spring-boot-starter-security-saml2-test</code></td></tr><tr><td><strong>Templating Starters</strong></td><td></td><td></td></tr><tr><td>Freemarker</td><td><code>spring-boot-starter-freemarker</code></td><td><code>spring-boot-starter-freemarker-test</code></td></tr><tr><td>Groovy Templates</td><td><code>spring-boot-starter-groovy-templates</code></td><td><code>spring-boot-starter-groovy-templates-test</code></td></tr><tr><td>Mustache</td><td><code>spring-boot-starter-mustache</code></td><td><code>spring-boot-starter-mustache-test</code></td></tr><tr><td>Thymeleaf</td><td><code>spring-boot-starter-thymeleaf</code></td><td><code>spring-boot-starter-thymeleaf-test</code></td></tr><tr><td><strong>Production-Ready Starters</strong></td><td></td><td></td></tr><tr><td>Actuator</td><td><code>spring-boot-starter-actuator</code></td><td><code>spring-boot-starter-actuator-test</code></td></tr><tr><td>Micrometer Metrics</td><td><code>spring-boot-starter-micrometer-metrics</code></td><td><code>spring-boot-starter-micrometer-metrics-test</code></td></tr><tr><td>OpenTelemetry</td><td><code>spring-boot-starter-opentelemetry</code></td><td><code>spring-boot-starter-opentelemetry-test</code></td></tr><tr><td>Zipkin</td><td><code>spring-boot-starter-zipkin</code></td><td><code>spring-boot-starter-zipkin-test</code></td></tr></tbody></table><blockquote><p><strong>æç¤ºï¼š</strong> æ‰€æœ‰ test starter éƒ½ä¼šä¼ é€’æ€§åœ°å¼•å…¥ <code>spring-boot-starter-test</code>ï¼Œå› æ­¤ä¸éœ€è¦å†å•ç‹¬å£°æ˜ <code>spring-boot-starter-test</code>ã€‚åªéœ€è¦åˆ—å‡ºè¢«æµ‹è¯•æŠ€æœ¯å¯¹åº”çš„ test starter å³å¯ã€‚</p></blockquote><p><strong>Classic Startersï¼ˆå¿«é€Ÿè¿ç§»æ–¹æ¡ˆï¼‰ï¼š</strong></p><p>å¦‚æœéœ€è¦å¿«é€Ÿè¿ç§»ï¼Œå¯ä»¥ä½¿ç”¨ Classic Startersï¼Œå®ƒä»¬æä¾›äº†ç±»ä¼¼ Spring Boot 3.x çš„ classpathï¼Œè®©ä½ å¯ä»¥å¿«é€Ÿæ¢å¤æ‰€æœ‰åŸºç¡€è®¾æ–½çš„å¯ç”¨æ€§ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!-- æ›¿ä»£ spring-boot-starter --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.springframework.boot<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>spring-boot-starter-classic<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- æ›¿ä»£ spring-boot-starter-test --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.springframework.boot<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>spring-boot-starter-test-classic<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;scope&gt;</span>test<span class=nt>&lt;/scope&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span></span></span></code></pre></div></figure></div><p><strong>ä½¿ç”¨ Classic Starters çš„å¥½å¤„ï¼š</strong></p><ul><li>å¿«é€Ÿæ¢å¤åº”ç”¨åŠŸèƒ½ï¼Œæ— éœ€ç«‹å³å¤„ç†æ‰€æœ‰ starter æ›¿æ¢</li><li>ä¿®å¤å¯¼å…¥é”™è¯¯ï¼ŒéªŒè¯åº”ç”¨èƒ½æ­£å¸¸å·¥ä½œ</li><li>ä½œä¸ºè¿‡æ¸¡æ–¹æ¡ˆï¼Œé™ä½è¿ç§»é£é™©</li></ul><p><strong>è¿ç§»å»ºè®®ï¼ˆå®˜æ–¹æ¨èçš„ä¸¤æ­¥æ³•ï¼‰ï¼š</strong></p><ol><li><strong>ç¬¬ä¸€æ­¥</strong>ï¼šä½¿ç”¨ Classic Starters å¿«é€Ÿè¿ç§»ï¼Œä¿®å¤ç¼–è¯‘é”™è¯¯ï¼Œç¡®ä¿åº”ç”¨è¿è¡Œæ­£å¸¸</li><li><strong>ç¬¬äºŒæ­¥</strong>ï¼šé€æ­¥ç§»é™¤ Classic Startersï¼Œæ ¹æ®æ›´æ–°åçš„å¯¼å…¥è¯­å¥è¯†åˆ«ç¼ºå¤±çš„ starterï¼Œæ·»åŠ å¯¹åº”çš„æ¨¡å—åŒ– starter</li></ol><blockquote><p><strong>æ³¨æ„ï¼š</strong> å®˜æ–¹å»ºè®®æœ€ç»ˆè¿˜æ˜¯è¦è¿ç§»åˆ°æ¨¡å—åŒ–çš„ starterï¼ŒClassic Starters åªæ˜¯è¿‡æ¸¡æ–¹æ¡ˆã€‚å®Œæ•´çš„ starter åˆ—è¡¨å’Œå¯¹åº”å…³ç³»è¯·å‚è€ƒ <a href=https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-4.0-Migration-Guide#starters target=_blank rel=noopener>å®˜æ–¹è¿ç§»æŒ‡å—</a>
ã€‚</p></blockquote><h3 id=å¢å¼ºçš„é…ç½®å±æ€§å…ƒæ•°æ®>å¢å¼ºçš„é…ç½®å±æ€§å…ƒæ•°æ®<a href=#å¢å¼ºçš„é…ç½®å±æ€§å…ƒæ•°æ® class=anchor aria-hidden=true>#</a></h3><p>Spring Boot 4 å¼•å…¥äº†æ–°çš„æ³¨è§£ <strong>@ConfigurationPropertiesSource</strong>ï¼Œå…è®¸ Spring Boot è¯»å–å¤–éƒ¨æ¨¡å—ä¸­å®šä¹‰çš„ <code>@ConfigurationProperties</code> ç±»å‹ï¼Œè¿™åœ¨ä¹‹å‰æ˜¯ä¸å¯èƒ½çš„ã€‚</p><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@ConfigurationPropertiesSource</span><span class=p>(</span><span class=s>&#34;com.example.config&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@ConfigurationProperties</span><span class=p>(</span><span class=n>prefix</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;app&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>AppProperties</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// getters and setters</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p><strong>ä¼˜åŠ¿ï¼š</strong></p><ul><li>æ›´æ¸…æ™°çš„æ¨¡å—åŒ–è®¾è®¡</li><li>æ”¹è¿›å·¥å…·æ”¯æŒï¼ˆIDE è‡ªåŠ¨å®Œæˆã€é…ç½®æç¤ºç­‰ï¼‰</li><li>æ”¯æŒè·¨æ¨¡å—çš„é…ç½®å±æ€§å®šä¹‰</li></ul><h3 id=ä»»åŠ¡è°ƒåº¦å¢å¼º>ä»»åŠ¡è°ƒåº¦å¢å¼º<a href=#ä»»åŠ¡è°ƒåº¦å¢å¼º class=anchor aria-hidden=true>#</a></h3><p>Spring Boot 4 ç°åœ¨æ”¯æŒé…ç½®å¤šä¸ª <code>TaskDecorator</code> Beanï¼Œå…è®¸ä½ ç»„åˆå¤šä¸ªè£…é¥°å™¨æ¥å¢å¼ºä»»åŠ¡æ‰§è¡Œè¡Œä¸ºã€‚</p><p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>TaskConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>TaskDecorator</span><span class=w> </span><span class=nf>loggingTaskDecorator</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>runnable</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Task started: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>Thread</span><span class=p>.</span><span class=na>currentThread</span><span class=p>().</span><span class=na>getName</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>runnable</span><span class=p>.</span><span class=na>run</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>finally</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Task completed&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>TaskDecorator</span><span class=w> </span><span class=nf>mdcTaskDecorator</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>runnable</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>String</span><span class=w> </span><span class=n>traceId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MDC</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;traceId&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>MDC</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;traceId&#34;</span><span class=p>,</span><span class=w> </span><span class=n>traceId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>runnable</span><span class=p>.</span><span class=na>run</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>finally</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>MDC</span><span class=p>.</span><span class=na>clear</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p>å¤šä¸ª <code>TaskDecorator</code> ä¼šæŒ‰é¡ºåºåº”ç”¨ï¼Œæä¾›æ›´çµæ´»çš„ä»»åŠ¡æ‰§è¡Œå¢å¼ºèƒ½åŠ›ã€‚</p><h3 id=åŒ…ç»“æ„å˜åŒ–>åŒ…ç»“æ„å˜åŒ–<a href=#åŒ…ç»“æ„å˜åŒ– class=anchor aria-hidden=true>#</a></h3><p>æ¨¡å—åŒ–æ¶æ„å¯¹åŒ…ç»“æ„ä¹Ÿæœ‰å½±å“ã€‚æ¯ä¸ªæ¨¡å—ç°åœ¨éƒ½æœ‰ç‹¬ç«‹çš„ <code>org.springframework.boot.&lt;module></code> åŒ…è·¯å¾„ã€‚æ ¹æ®æ¨¡å—çš„èŒè´£èŒƒå›´ï¼Œå¯èƒ½åŒ…å« APIã€è‡ªåŠ¨é…ç½®ã€Actuator ç›¸å…³æ”¯æŒç­‰ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Spring Boot 3.x</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// Spring Boot 4.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.boot.webmvc.autoconfigure.WebMvcAutoConfiguration</span><span class=p>;</span></span></span></code></pre></div></figure></div><p><strong>ä¸»è¦å˜åŒ–ï¼š</strong></p><ul><li>æ¯ä¸ªæŠ€æœ¯æ¨¡å—éƒ½æœ‰ç‹¬ç«‹çš„åŒ…è·¯å¾„ï¼š<code>org.springframework.boot.&lt;technology></code></li><li>æµ‹è¯•æ¨¡å—åŒ…è·¯å¾„ï¼š<code>org.springframework.boot.&lt;technology>.test</code></li><li>è‡ªåŠ¨é…ç½®ç±»ã€Actuator æ”¯æŒç­‰éƒ½ä½äºå¯¹åº”çš„æ¨¡å—åŒ…ä¸‹</li><li><strong>å¦‚æœä½ æœ‰è‡ªå®šä¹‰ starterï¼Œå¤§æ¦‚ç‡éƒ½éœ€è¦é€‚é…æ–°çš„åŒ…è·¯å¾„</strong>ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨ class å­—ç¬¦åå­—ï¼Œè€Œä¸æ˜¯ class ç±»çš„ã€‚</li></ul><h2 id=spring-framework-70-å¸¦æ¥çš„å¢å¼º>Spring Framework 7.0 å¸¦æ¥çš„å¢å¼º<a href=#spring-framework-70-å¸¦æ¥çš„å¢å¼º class=anchor aria-hidden=true>#</a></h2><p>Spring Boot 4 åŸºäº Spring Framework 7.0 æ„å»ºï¼Œç»§æ‰¿äº†ä»¥ä¸‹ç‰¹æ€§ã€‚</p><h3 id=api-ç‰ˆæœ¬æ§åˆ¶>API ç‰ˆæœ¬æ§åˆ¶<a href=#api-ç‰ˆæœ¬æ§åˆ¶ class=anchor aria-hidden=true>#</a></h3><p>Spring Framework 7 åŸç”Ÿæ”¯æŒ API ç‰ˆæœ¬ç®¡ç†ï¼Œè¿™æ˜¯<strong>é¦–æ¬¡åœ¨ Spring æ¡†æ¶ä¸­æä¾›å®˜æ–¹æ”¯æŒ</strong>ã€‚ä¹‹å‰è™½ç„¶å¯ä»¥é€šè¿‡ <code>@RequestMapping</code> å®ç°ï¼Œä½†éœ€è¦å¤§é‡æ‰‹åŠ¨å·¥ä½œã€‚</p><p><strong>é…ç½®æ–¹å¼ï¼š</strong></p><p><strong>Java é…ç½®ï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>WebConfiguration</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>WebMvcConfigurer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>configureApiVersioning</span><span class=p>(</span><span class=n>ApiVersionConfigurer</span><span class=w> </span><span class=n>configurer</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>configurer</span><span class=p>.</span><span class=na>useRequestHeader</span><span class=p>(</span><span class=s>&#34;API-Version&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// æˆ–ä½¿ç”¨å…¶ä»–ç­–ç•¥ï¼š</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// configurer.useQueryParameter(&#34;version&#34;);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// configurer.usePathPattern(&#34;/api/{version}&#34;);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// configurer.useMediaType(&#34;application/vnd.api.v1+json&#34;);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p><strong>Spring Boot é…ç½®å±æ€§ï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mvc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>apiversion</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>use</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>header</span><span class=p>:</span><span class=w> </span><span class=l>API-Version</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># æˆ–ä½¿ç”¨ï¼š</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># query-parameter: version</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># path-pattern: /api/{version}</span></span></span></code></pre></div></figure></div><p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@RestController</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/api&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@GetMapping</span><span class=p>(</span><span class=n>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;/users&#34;</span><span class=p>,</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;1&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>UserV1</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getUsersV1</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>userService</span><span class=p>.</span><span class=na>getUsersV1</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@GetMapping</span><span class=p>(</span><span class=n>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;/users&#34;</span><span class=p>,</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;2&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>UserV2</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getUsersV2</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>userService</span><span class=p>.</span><span class=na>getUsersV2</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p><strong>åŠŸèƒ½å¼ç«¯ç‚¹æ”¯æŒï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>RouterFunction</span><span class=o>&lt;</span><span class=n>ServerResponse</span><span class=o>&gt;</span><span class=w> </span><span class=n>route</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>RouterFunctions</span><span class=p>.</span><span class=na>route</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>GET</span><span class=p>(</span><span class=s>&#34;/hello-world&#34;</span><span class=p>,</span><span class=w> </span><span class=n>version</span><span class=p>(</span><span class=s>&#34;1.2&#34;</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>request</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>ServerResponse</span><span class=p>.</span><span class=na>ok</span><span class=p>().</span><span class=na>body</span><span class=p>(</span><span class=s>&#34;Hello World&#34;</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>build</span><span class=p>();</span></span></span></code></pre></div></figure></div><p><strong>æ”¯æŒçš„ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥ï¼š</strong></p><ul><li><strong>è·¯å¾„ç‰ˆæœ¬æ§åˆ¶</strong>ï¼š<code>/v1/users</code>ã€<code>/v2/users</code>ï¼ˆéœ€è¦åœ¨è·¯å¾„ä¸­å£°æ˜ URI å˜é‡ï¼‰</li><li><strong>è¯·æ±‚å¤´ç‰ˆæœ¬æ§åˆ¶</strong>ï¼š<code>X-API-Version: 1</code> æˆ–è‡ªå®šä¹‰ header åç§°</li><li><strong>æŸ¥è¯¢å‚æ•°ç‰ˆæœ¬æ§åˆ¶</strong>ï¼š<code>/users?version=1</code></li><li><strong>åª’ä½“ç±»å‹ç‰ˆæœ¬æ§åˆ¶</strong>ï¼š<code>Accept: application/vnd.api.v1+json</code></li></ul><p><strong>ç‰ˆæœ¬æ ¼å¼ï¼š</strong></p><p>é»˜è®¤ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioningï¼‰ï¼Œæ”¯æŒ major.minor.patch æ ¼å¼ã€‚å¦‚æœæœªæŒ‡å®š minor å’Œ patchï¼Œé»˜è®¤ä¸º 0ã€‚ç‰ˆæœ¬è§£æå™¨å¯ä»¥è‡ªå®šä¹‰ï¼Œæ”¯æŒæ—¥æœŸæ ¼å¼æˆ–å…¶ä»–æ ¼å¼ã€‚</p><p><strong>åºŸå¼ƒå¤„ç†ï¼š</strong></p><p>API ç‰ˆæœ¬æ§åˆ¶æ”¯æŒ RFC 9745 æ ‡å‡†çš„åºŸå¼ƒå¤„ç†ï¼Œå¯ä»¥åœ¨å“åº”ä¸­å‘é€åºŸå¼ƒæç¤ºã€‚</p><h3 id=jspecify-ç©ºå®‰å…¨æ³¨è§£>JSpecify ç©ºå®‰å…¨æ³¨è§£<a href=#jspecify-ç©ºå®‰å…¨æ³¨è§£ class=anchor aria-hidden=true>#</a></h3><p>Spring Framework 7 è¿ç§»åˆ° JSpecify æ³¨è§£ï¼Œè¿™æ˜¯ Spring ç”Ÿæ€ç³»ç»Ÿä¸­<strong>ç©ºå®‰å…¨æ”¯æŒçš„é‡å¤§é‡Œç¨‹ç¢‘</strong>ã€‚JSpecify æ˜¯ä¸€ä¸ªç”± OpenJDKã€Broadcomã€Googleã€JetBrainsã€Sonar ç­‰ç»„ç»‡å…±åŒå‚ä¸çš„æ ‡å‡†é¡¹ç›®ã€‚</p><p><strong>å·²æ”¯æŒ JSpecify çš„ Spring é¡¹ç›®ï¼š</strong></p><ul><li>Spring Boot 4.0</li><li>Spring Framework 7.0</li><li>Spring Data 4.0</li><li>Spring Security 7.0</li><li>Spring Batch 6.0</li><li>Spring Kafka 4.0</li><li>Spring Integration 7.0</li><li>Spring GraphQL 2.0</li><li>Spring Web Services 5.0</li><li>Spring AMQP 4.0</li><li>Spring Shell 4.0</li><li>Spring Plugin 4.0</li><li>Spring HATEOAS 3.0</li><li>Spring Modulith 2.0</li><li>Spring Vault 4.0</li><li>Spring Cloud Commons 5.0</li><li>Spring Cloud Gateway 5.0</li><li>Micrometer 1.16</li><li>Micrometer Tracing 1.6</li><li>Context Propagation 1.2</li><li>Reactor 2025.0</li></ul><p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>org.jspecify.annotations.Nullable</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.jspecify.annotations.NonNull</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nd>@NonNull</span><span class=w> </span><span class=n>User</span><span class=w> </span><span class=nf>getUser</span><span class=p>(</span><span class=nd>@NonNull</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>userRepository</span><span class=p>.</span><span class=na>findById</span><span class=p>(</span><span class=n>userId</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>orElseThrow</span><span class=p>(()</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>UserNotFoundException</span><span class=p>(</span><span class=n>userId</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nd>@Nullable</span><span class=w> </span><span class=n>User</span><span class=w> </span><span class=nf>findUser</span><span class=p>(</span><span class=nd>@NonNull</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>email</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>userRepository</span><span class=p>.</span><span class=na>findByEmail</span><span class=p>(</span><span class=n>email</span><span class=p>).</span><span class=na>orElse</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p><strong>IDE æ”¯æŒï¼š</strong></p><ul><li><strong>IntelliJ IDEA 2025.3+</strong>ï¼šæä¾›å®Œæ•´çš„ JSpecify æ”¯æŒï¼ŒåŒ…æ‹¬å¤æ‚çš„æ•°æ®æµåˆ†æ</li><li><strong>Kotlin 2.2</strong>ï¼šè‡ªåŠ¨å°† JSpecify æ³¨è§£è½¬æ¢ä¸º Kotlin ç©ºå®‰å…¨ç±»å‹ï¼Œå‘Šåˆ«å¹³å°ç±»å‹ï¼ˆplatform typesï¼‰</li><li><strong>NullAway</strong>ï¼šæ„å»ºæ—¶æ£€æŸ¥å·¥å…·ï¼Œéœ€è¦ JDK 21+ï¼ˆJDK 17 æ”¯æŒå¯èƒ½åœ¨åç»­ç‰ˆæœ¬æä¾›ï¼‰</li></ul><p><strong>Kotlin é¡¹ç›®æ³¨æ„äº‹é¡¹ï¼š</strong></p><p>JSpecify æ³¨è§£ä¼šæ˜ç¡®æ ‡è®°å¯ç©ºæ€§ï¼ŒKotlin ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶è½¬æ¢ã€‚å¦‚æœ Java æ¥å£ä½¿ç”¨ <code>@Nullable</code> æ³¨è§£ï¼ŒKotlin å®ç°å¿…é¡»è¿”å›å¯ç©ºç±»å‹ï¼›å¦‚æœä½¿ç”¨ <code>@NonNull</code>ï¼Œåˆ™å¿…é¡»è¿”å›éç©ºç±»å‹ã€‚IntelliJ IDEA ä¼šæä¾›ç›¸åº”çš„ç¼–è¯‘é”™è¯¯æç¤ºå’Œä¿®å¤å»ºè®®ã€‚</p><h3 id=å¤šçº¿ç¨‹å¼‚æ­¥å¯åŠ¨>å¤šçº¿ç¨‹å¼‚æ­¥å¯åŠ¨<a href=#å¤šçº¿ç¨‹å¼‚æ­¥å¯åŠ¨ class=anchor aria-hidden=true>#</a></h3><p>Spring Framework 7.0 å¼•å…¥äº†å¤šçº¿ç¨‹å¼‚æ­¥å¯åŠ¨æœºåˆ¶ï¼Œå¯ä»¥å¹¶è¡Œåˆå§‹åŒ– ApplicationContextï¼Œæ˜¾è‘—åŠ å¿«åº”ç”¨å¯åŠ¨é€Ÿåº¦ã€‚</p><p><strong>å·¥ä½œåŸç†ï¼š</strong></p><ul><li>ApplicationContext å¯åŠ¨æ—¶ï¼Œå¯ä»¥å¹¶è¡Œåˆå§‹åŒ–å¤šä¸ª Bean</li><li>åˆ©ç”¨å¤šæ ¸ CPU èµ„æºï¼Œå°†ä¸²è¡Œçš„ Bean åˆå§‹åŒ–æ”¹ä¸ºå¹¶è¡Œæ‰§è¡Œ</li><li>è‡ªåŠ¨å¤„ç† Bean ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç¡®ä¿åˆå§‹åŒ–é¡ºåºæ­£ç¡®</li></ul><p><strong>é…ç½®æ–¹å¼ï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@SpringBootApplication</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Application</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>SpringApplication</span><span class=w> </span><span class=n>app</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>SpringApplication</span><span class=p>(</span><span class=n>Application</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// å¯ç”¨å¼‚æ­¥å¯åŠ¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>app</span><span class=p>.</span><span class=na>setApplicationStartup</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>BufferingApplicationStartup</span><span class=p>(</span><span class=n>1000</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>app</span><span class=p>.</span><span class=na>run</span><span class=p>(</span><span class=n>args</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p>æˆ–è€…é€šè¿‡é…ç½®å±æ€§ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>application</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>startup</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div></figure></div><p><strong>æ€§èƒ½æå‡ï¼š</strong></p><ul><li>å¤§å‹åº”ç”¨å¯åŠ¨æ—¶é—´å¯å‡å°‘ 30-50%</li><li>ç‰¹åˆ«é€‚åˆ Bean æ•°é‡å¤šã€åˆå§‹åŒ–è€—æ—¶çš„åº”ç”¨</li><li>å……åˆ†åˆ©ç”¨å¤šæ ¸ CPUï¼Œæå‡èµ„æºåˆ©ç”¨ç‡</li></ul><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><ul><li>éœ€è¦ç¡®ä¿ Bean åˆå§‹åŒ–æ˜¯çº¿ç¨‹å®‰å…¨çš„</li><li>æŸäº›å•ä¾‹ Bean å¯èƒ½ä»éœ€è¦ä¸²è¡Œåˆå§‹åŒ–</li><li>å»ºè®®åœ¨æµ‹è¯•ç¯å¢ƒå…ˆéªŒè¯ï¼Œç¡®ä¿æ— å¹¶å‘é—®é¢˜</li></ul><h3 id=http-æ¥å£å®¢æˆ·ç«¯>HTTP æ¥å£å®¢æˆ·ç«¯<a href=#http-æ¥å£å®¢æˆ·ç«¯ class=anchor aria-hidden=true>#</a></h3><p>Spring Framework 7 å’Œ Spring Boot 4 å¤§å¹…ç®€åŒ–äº† HTTP æ¥å£å®¢æˆ·ç«¯çš„é…ç½®ã€‚ä¹‹å‰éœ€è¦æ‰‹åŠ¨åˆ›å»º <code>HttpServiceProxyFactory</code> å’Œé…ç½®æ¯ä¸ªå®¢æˆ·ç«¯ï¼Œç°åœ¨å¯ä»¥é€šè¿‡å£°æ˜å¼æ–¹å¼è‡ªåŠ¨æ³¨å†Œã€‚</p><p><strong>å»ºè®®ï¼š</strong> è™½ç„¶ <code>RestTemplate</code> ä»å¯ä½¿ç”¨ï¼Œä½†æ¨èä½¿ç”¨ <code>RestClient</code> æˆ– HTTP æ¥å£å®¢æˆ·ç«¯ï¼ˆ<code>@HttpExchange</code>ï¼‰ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆã€‚</p><p><strong>æ—§æ–¹å¼ï¼ˆSpring Framework 6 / Spring Boot 3ï¼‰ï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@HttpExchange</span><span class=p>(</span><span class=n>url</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;/api/users&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>UserClient</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@GetExchange</span><span class=p>(</span><span class=s>&#34;/{id}&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>User</span><span class=w> </span><span class=nf>getUser</span><span class=p>(</span><span class=nd>@PathVariable</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>id</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@PostExchange</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>User</span><span class=w> </span><span class=nf>createUser</span><span class=p>(</span><span class=nd>@RequestBody</span><span class=w> </span><span class=n>UserRequest</span><span class=w> </span><span class=n>request</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// éœ€è¦æ‰‹åŠ¨é…ç½®æ¯ä¸ªå®¢æˆ·ç«¯</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>HttpClientConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>UserClient</span><span class=w> </span><span class=nf>userClient</span><span class=p>(</span><span class=n>RestClient</span><span class=p>.</span><span class=na>Builder</span><span class=w> </span><span class=n>builder</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>RestClient</span><span class=w> </span><span class=n>restClient</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>builder</span><span class=p>.</span><span class=na>baseUrl</span><span class=p>(</span><span class=s>&#34;https://api.example.com&#34;</span><span class=p>).</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>HttpServiceProxyFactory</span><span class=w> </span><span class=n>factory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>HttpServiceProxyFactory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>builderFor</span><span class=p>(</span><span class=n>RestClientAdapter</span><span class=p>.</span><span class=na>create</span><span class=p>(</span><span class=n>restClient</span><span class=p>)).</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>factory</span><span class=p>.</span><span class=na>createClient</span><span class=p>(</span><span class=n>UserClient</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// å¦‚æœæœ‰å¤šä¸ªå®¢æˆ·ç«¯ï¼Œéœ€è¦é‡å¤é…ç½®ã€‚..</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p><strong>æ–°æ–¹å¼ï¼ˆSpring Framework 7 / Spring Boot 4ï¼‰ï¼š</strong></p><p>ä½¿ç”¨ <code>@ImportHttpServices</code> æ³¨è§£ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@HttpExchange</span><span class=p>(</span><span class=n>url</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;/api/users&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>UserClient</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@GetExchange</span><span class=p>(</span><span class=s>&#34;/{id}&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>User</span><span class=w> </span><span class=nf>getUser</span><span class=p>(</span><span class=nd>@PathVariable</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>id</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@PostExchange</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>User</span><span class=w> </span><span class=nf>createUser</span><span class=p>(</span><span class=nd>@RequestBody</span><span class=w> </span><span class=n>UserRequest</span><span class=w> </span><span class=n>request</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@ImportHttpServices</span><span class=p>(</span><span class=n>group</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;api&#34;</span><span class=p>,</span><span class=w> </span><span class=n>types</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=n>UserClient</span><span class=p>.</span><span class=na>class</span><span class=p>})</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>HttpClientConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p>é…ç½® <code>application.yml</code>ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>client</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>read-timeout</span><span class=p>:</span><span class=w> </span><span class=l>2s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>group</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>api</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>base-url</span><span class=p>:</span><span class=w> </span><span class=l>https://api.example.com</span></span></span></code></pre></div></figure></div><p>æˆ–ä½¿ç”¨åŒ…æ‰«æè‡ªåŠ¨å‘ç°ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@ImportHttpServices</span><span class=p>(</span><span class=n>group</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;api&#34;</span><span class=p>,</span><span class=w> </span><span class=n>basePackages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;com.example.client&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>HttpClientConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p><strong>å¤šç»„é…ç½®ç¤ºä¾‹ï¼š</strong></p><p>å¦‚æœåº”ç”¨éœ€è¦é›†æˆå¤šä¸ª REST APIï¼Œå¯ä»¥ä¸ºæ¯ä¸ª API é…ç½®ä¸åŒçš„ç»„ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@ImportHttpServices</span><span class=p>(</span><span class=n>group</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;github&#34;</span><span class=p>,</span><span class=w> </span><span class=n>basePackages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;com.example.client.github&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@ImportHttpServices</span><span class=p>(</span><span class=n>group</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;stackoverflow&#34;</span><span class=p>,</span><span class=w> </span><span class=n>basePackages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;com.example.client.stackoverflow&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>HttpClientConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p>å¯¹åº”çš„é…ç½®ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>client</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>group</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>github</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>base-url</span><span class=p>:</span><span class=w> </span><span class=l>https://api.github.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>read-timeout</span><span class=p>:</span><span class=w> </span><span class=l>5s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>stackoverflow</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>base-url</span><span class=p>:</span><span class=w> </span><span class=l>https://api.stackexchange.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>read-timeout</span><span class=p>:</span><span class=w> </span><span class=l>10s</span></span></span></code></pre></div></figure></div><p><strong>ä½¿ç”¨ WebClientï¼ˆå“åº”å¼ï¼‰ï¼š</strong></p><p>é»˜è®¤ä½¿ç”¨ <code>RestClient</code>ï¼Œå¦‚éœ€ä½¿ç”¨ <code>WebClient</code>ï¼Œå¯é€šè¿‡é…ç½®åˆ‡æ¢ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@ImportHttpServices</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>group</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;api&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>basePackages</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;com.example.client&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>clientType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ClientType</span><span class=p>.</span><span class=na>WEB_CLIENT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>HttpClientConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p><strong>ä¼˜åŠ¿ï¼š</strong></p><ul><li><strong>é…ç½®ç®€åŒ–</strong>ï¼šä¸å†éœ€è¦ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯æ‰‹åŠ¨åˆ›å»º <code>HttpServiceProxyFactory</code> å’Œ Bean</li><li><strong>è‡ªåŠ¨æ³¨å†Œ</strong>ï¼šæ‰€æœ‰ HTTP æ¥å£è‡ªåŠ¨æ³¨å†Œä¸º Spring Beanï¼Œå¯ç›´æ¥æ³¨å…¥ä½¿ç”¨</li><li><strong>ç»Ÿä¸€ç®¡ç†</strong>ï¼šé€šè¿‡ç»„ï¼ˆgroupï¼‰æ¦‚å¿µç»Ÿä¸€ç®¡ç†åŒä¸€ API çš„æ‰€æœ‰å®¢æˆ·ç«¯</li><li><strong>çµæ´»é…ç½®</strong>ï¼šæ”¯æŒä¸ºä¸åŒç»„é…ç½®ä¸åŒçš„è¶…æ—¶ã€é‡è¯•ç­‰ç­–ç•¥</li></ul><p>è¿™æ · <code>com.example.client</code> åŒ…ä¸‹æ‰€æœ‰å¸¦ <code>@HttpExchange</code> çš„æ¥å£éƒ½ä¼šè‡ªåŠ¨æ³¨å†Œä¸º Spring Beanï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥ä½¿ç”¨ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>UserClient</span><span class=w> </span><span class=n>userClient</span><span class=p>;</span><span class=w>  </span><span class=c1>// ç›´æ¥æ³¨å…¥ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>UserService</span><span class=p>(</span><span class=n>UserClient</span><span class=w> </span><span class=n>userClient</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>userClient</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>userClient</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>User</span><span class=w> </span><span class=nf>getUser</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>userClient</span><span class=p>.</span><span class=na>getUser</span><span class=p>(</span><span class=n>id</span><span class=p>);</span><span class=w>  </span><span class=c1>// ç›´æ¥ä½¿ç”¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><h3 id=å†…ç½®å¼¹æ€§åŠŸèƒ½resilience>å†…ç½®å¼¹æ€§åŠŸèƒ½ï¼ˆResilienceï¼‰<a href=#å†…ç½®å¼¹æ€§åŠŸèƒ½resilience class=anchor aria-hidden=true>#</a></h3><p>Spring Framework 7 å¼•å…¥äº†å¼ºå¤§çš„å¼¹æ€§å·¥å…·ï¼Œç›´æ¥é›†æˆåˆ°æ ¸å¿ƒæ¡†æ¶ä¸­ï¼š</p><ul><li><strong>@Retryable</strong>ï¼šè‡ªåŠ¨é‡è¯•å¤±è´¥çš„æ–¹æ³•è°ƒç”¨ï¼Œæ”¯æŒé…ç½®æœ€å¤§å°è¯•æ¬¡æ•°ã€å»¶è¿Ÿã€æŠ–åŠ¨å’Œé€€é¿ç­–ç•¥ï¼Œä¹Ÿæ”¯æŒå“åº”å¼è¿”å›ç±»å‹</li><li><strong>@ConcurrencyLimit</strong>ï¼šé™åˆ¶å¹¶å‘æ–¹æ³•è°ƒç”¨æ•°é‡ï¼Œä¿æŠ¤æœåŠ¡å’Œèµ„æºï¼ˆä¾‹å¦‚é™åˆ¶ä¸ºå•çº¿ç¨‹è®¿é—®ï¼‰</li></ul><p><strong>é…ç½®æ–¹å¼ï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@EnableResilientMethods</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ApplicationConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>PaymentService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Retryable</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>maxAttempts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>backoff</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nd>@Retryable.Backoff</span><span class=p>(</span><span class=n>delay</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>2000</span><span class=p>,</span><span class=w> </span><span class=n>multiplier</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>2</span><span class=p>.</span><span class=na>0</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@ConcurrencyLimit</span><span class=p>(</span><span class=n>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>2</span><span class=p>)</span><span class=w>  </span><span class=c1>// åªå…è®¸ 2 ä¸ªå¹¶å‘è°ƒç”¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>processPayment</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>paymentId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// å¤„ç†æ”¯ä»˜é€»è¾‘</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p><strong>ä¼˜åŠ¿ï¼š</strong></p><ul><li>æ— éœ€å¼•å…¥ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ Resilience4jï¼‰</li><li>ä¸ Spring ç”Ÿæ€æ·±åº¦é›†æˆ</li><li>æ”¯æŒå“åº”å¼ç¼–ç¨‹æ¨¡å‹</li><li>é…ç½®ç®€å•ï¼Œå¼€ç®±å³ç”¨</li></ul><h3 id=æµå¼-jms-å®¢æˆ·ç«¯-apijmsclient>æµå¼ JMS å®¢æˆ·ç«¯ APIï¼ˆJmsClientï¼‰<a href=#æµå¼-jms-å®¢æˆ·ç«¯-apijmsclient class=anchor aria-hidden=true>#</a></h3><p>Spring Framework 7 å¼•å…¥äº† <strong>JmsClient</strong>ï¼Œç±»ä¼¼äº <code>JdbcClient</code> å’Œ <code>RestClient</code>ï¼Œæä¾›æµç•…çš„æ„å»ºå™¨é£æ ¼ APIã€‚è¿™æ˜¯å¯¹ä¼ ç»Ÿ JMS æ¨¡æ¿çš„æ›´ä¼˜é›…å’Œå¯è¯»çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p><p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>MessageService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>JmsClient</span><span class=w> </span><span class=n>jmsClient</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>MessageService</span><span class=p>(</span><span class=n>JmsClient</span><span class=w> </span><span class=n>jmsClient</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>jmsClient</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jmsClient</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>sendMessage</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>destination</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>message</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>jmsClient</span><span class=p>.</span><span class=na>create</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>queue</span><span class=p>(</span><span class=n>destination</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>body</span><span class=p>(</span><span class=n>message</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>send</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>receiveMessage</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>destination</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>jmsClient</span><span class=p>.</span><span class=na>create</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>queue</span><span class=p>(</span><span class=n>destination</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>receive</span><span class=p>(</span><span class=n>String</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p><strong>ä¼˜åŠ¿ï¼š</strong></p><ul><li>æµç•…çš„ API è®¾è®¡ï¼Œä»£ç æ›´æ˜“è¯»</li><li>ä¸ <code>JdbcClient</code>ã€<code>RestClient</code> ä¿æŒä¸€è‡´çš„é£æ ¼</li><li>Spring Boot 4 æä¾›è‡ªåŠ¨é…ç½®æ”¯æŒ</li></ul><h3 id=ç»Ÿä¸€æ¶ˆæ¯è½¬æ¢unified-message-conversion>ç»Ÿä¸€æ¶ˆæ¯è½¬æ¢ï¼ˆUnified Message Conversionï¼‰<a href=#ç»Ÿä¸€æ¶ˆæ¯è½¬æ¢unified-message-conversion class=anchor aria-hidden=true>#</a></h3><p>Spring Framework 7 ç®€åŒ–äº†æ¶ˆæ¯è½¬æ¢ï¼Œå¼•å…¥äº†æ–°çš„ <code>HttpMessageConverters</code> é…ç½®ç±»ã€‚è¿™ç§ç»Ÿä¸€æ–¹æ³•å€Ÿé‰´äº†å“åº”å¼ç¼–è§£ç å™¨çš„è®¾è®¡ï¼Œç®€åŒ–äº† HTTP æ¶ˆæ¯çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p><h3 id=jakarta-ee-11-å‡çº§>Jakarta EE 11 å‡çº§<a href=#jakarta-ee-11-å‡çº§ class=anchor aria-hidden=true>#</a></h3><p>Spring Framework 7 é‡‡ç”¨ Jakarta EE 11 è§„èŒƒï¼š</p><ul><li><strong>Servlet 6.1</strong></li><li><strong>JPA 3.2</strong></li><li><strong>Bean Validation 3.1</strong></li><li><strong>WebSocket 2.2</strong></li></ul><p><strong>JPA 3.2 é‡è¦å˜åŒ–ï¼š</strong></p><p>ä¹‹å‰ï¼Œ<code>EntityManager</code> åªèƒ½é€šè¿‡ <code>@PersistenceContext</code> æ³¨è§£æ³¨å…¥ã€‚ç°åœ¨ï¼Œ<code>EntityManagerFactory</code> å’Œå…±äº«çš„ <code>EntityManager</code> éƒ½å¯ä»¥ä½¿ç”¨ <code>@Inject</code> æˆ– <code>@Autowired</code> æ³¨å…¥ï¼Œå¹¶æ”¯æŒä½¿ç”¨é™å®šç¬¦æ¥é€‰æ‹©ç‰¹å®šçš„æŒä¹…åŒ–å•å…ƒï¼ˆå½“é…ç½®äº†å¤šä¸ªæŒä¹…åŒ–å•å…ƒæ—¶ï¼‰ã€‚</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// æ—§æ–¹å¼ï¼ˆä»ç„¶æ”¯æŒï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@PersistenceContext</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=n>EntityManager</span><span class=w> </span><span class=n>entityManager</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// æ–°æ–¹å¼ï¼ˆSpring Framework 7 / JPA 3.2ï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=n>EntityManager</span><span class=w> </span><span class=n>entityManager</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// å¤šä¸ªæŒä¹…åŒ–å•å…ƒæ—¶ä½¿ç”¨é™å®šç¬¦</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Qualifier</span><span class=p>(</span><span class=s>&#34;primaryEntityManager&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=n>EntityManager</span><span class=w> </span><span class=n>primaryEntityManager</span><span class=p>;</span></span></span></code></pre></div></figure></div><p>è¿™é‡Œè¦æé†’ä¸€ä¸‹ï¼š<code>javax.*</code> åˆ° <code>jakarta.*</code> çš„è¿ç§»åº”è¯¥åœ¨ Spring Boot 3.0 çš„æ—¶å€™å°±å·²ç»å®Œæˆäº†ã€‚å¦‚æœä½ è¿˜åœ¨ç”¨ Spring Boot 2.xï¼Œé‚£å¾—å…ˆå‡çº§åˆ° 3.xï¼Œç„¶åå†è€ƒè™‘ 4.0ã€‚</p><h3 id=junit-4-å’Œ-jackson-2x-å¼ƒç”¨>JUnit 4 å’Œ Jackson 2.x å¼ƒç”¨<a href=#junit-4-å’Œ-jackson-2x-å¼ƒç”¨ class=anchor aria-hidden=true>#</a></h3><ul><li><strong>JUnit 4</strong>ï¼šå®˜æ–¹æ¨èè¿ç§»åˆ° JUnit 5</li><li><strong>Jackson 2.x</strong>ï¼šSpring Boot 4 ä½¿ç”¨ Jackson 3.x</li></ul><p>Jackson 3.x çš„ç ´åæ€§å˜æ›´ï¼š</p><ul><li>éƒ¨åˆ†æ³¨è§£è¢«ç§»é™¤</li><li>æ›´ä¸¥æ ¼çš„ç±»å‹å¤„ç†</li><li>æ¨¡å—æ•´åˆ</li><li><code>ObjectMapper</code> è¡Œä¸ºå˜æ›´</li></ul><p>è¿ç§»ç¤ºä¾‹ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Jackson 2.x</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@JsonInclude</span><span class=p>(</span><span class=n>JsonInclude</span><span class=p>.</span><span class=na>Include</span><span class=p>.</span><span class=na>NON_NULL</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>User</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// Jackson 3.x ï¼ˆåŒæ ·çš„è¯­æ³•ï¼Œä½†å†…éƒ¨è¡Œä¸ºå¯èƒ½ä¸åŒï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@JsonInclude</span><span class=p>(</span><span class=n>JsonInclude</span><span class=p>.</span><span class=na>Include</span><span class=p>.</span><span class=na>NON_NULL</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>User</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><h3 id=æµ‹è¯•ä¸Šä¸‹æ–‡æš‚åœæœºåˆ¶>æµ‹è¯•ä¸Šä¸‹æ–‡æš‚åœæœºåˆ¶<a href=#æµ‹è¯•ä¸Šä¸‹æ–‡æš‚åœæœºåˆ¶ class=anchor aria-hidden=true>#</a></h3><p>Spring Framework 7 å¼•å…¥äº†ä¸€ä¸ªæŒºæœ‰æ„æ€çš„æµ‹è¯•ä¸Šä¸‹æ–‡ç®¡ç†æœºåˆ¶ï¼š</p><ul><li>æµ‹è¯•ä¸Šä¸‹æ–‡åœ¨ä¸ä½¿ç”¨çš„æ—¶å€™ä¼šè‡ªåŠ¨æš‚åœï¼ˆstoppedï¼‰</li><li>ä¸‹æ¬¡ç”¨çš„æ—¶å€™ä¼šè‡ªåŠ¨é‡å¯</li><li>è¿™æ ·èƒ½æ˜¾è‘—é™ä½æµ‹è¯•å¥—ä»¶çš„å†…å­˜å ç”¨</li></ul><p>è¯¥æœºåˆ¶å¯æ˜¾è‘—é™ä½æµ‹è¯•å¥—ä»¶çš„å†…å­˜å ç”¨ã€‚</p><h3 id=spel-å¢å¼º>SpEL å¢å¼º<a href=#spel-å¢å¼º class=anchor aria-hidden=true>#</a></h3><p>æ”¯æŒ <code>Optional</code> ç±»å‹å’Œ Elvis æ“ä½œç¬¦ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Value</span><span class=p>(</span><span class=s>&#34;#{userService.findUser(&#39;123&#39;)?.name ?: &#39;Unknown&#39;}&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userName</span><span class=p>;</span></span></span></code></pre></div></figure></div><h3 id=ç¨‹åºåŒ–-bean-æ³¨å†Œbeanregistrar>ç¨‹åºåŒ– Bean æ³¨å†Œï¼ˆBeanRegistrarï¼‰<a href=#ç¨‹åºåŒ–-bean-æ³¨å†Œbeanregistrar class=anchor aria-hidden=true>#</a></h3><p>Spring Framework 7 å¼•å…¥äº† <code>BeanRegistrar</code> æ¥å£ï¼Œå…è®¸åœ¨ <code>@ConditionalOn...</code> æ³¨è§£æ—ä¸å¤Ÿç”¨æ—¶è¿›è¡ŒåŠ¨æ€ Bean æ³¨å†Œã€‚</p><p><strong>Java å®ç°ï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.context.bean.BeanRegistrar</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.context.bean.BeanRegistry</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>QuoteProviderRegistrar</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>BeanRegistrar</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>register</span><span class=p>(</span><span class=n>BeanRegistry</span><span class=w> </span><span class=n>registry</span><span class=p>,</span><span class=w> </span><span class=n>Environment</span><span class=w> </span><span class=n>env</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>registry</span><span class=p>.</span><span class=na>registerBean</span><span class=p>(</span><span class=s>&#34;quoteProviderDb&#34;</span><span class=p>,</span><span class=w> </span><span class=n>QuoteProviderDb</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>registry</span><span class=p>.</span><span class=na>registerBean</span><span class=p>(</span><span class=s>&#34;quoteProviderFallback&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>QuoteProviderFallback</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>spec</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>spec</span><span class=p>.</span><span class=na>fallback</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>spec</span><span class=p>.</span><span class=na>order</span><span class=p>(</span><span class=n>1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>});</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p><strong>Kotlin DSL å®ç°ï¼ˆæ›´ä¼˜é›…ï¼‰ï¼š</strong></p><p>Kotlin 2.2 æä¾›äº† <code>BeanRegistrarDsl</code>ï¼Œè®© Bean æ³¨å†Œæ›´åŠ ç®€æ´ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>import</span> <span class=nn>org.springframework.context.bean.BeanRegistrarDsl</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>QuoteProviderRegistrar</span> <span class=p>:</span> <span class=n>BeanRegistrarDsl</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=n>registerBean</span><span class=p>&lt;</span><span class=n>QuoteProviderDb</span><span class=p>&gt;(</span><span class=s2>&#34;quoteProviderDb&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>registerBean</span><span class=p>&lt;</span><span class=n>QuoteProviderFallback</span><span class=p>&gt;(</span>
</span></span><span class=line><span class=cl>        <span class=n>name</span> <span class=p>=</span> <span class=s2>&#34;quoteProviderFallback&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>fallback</span> <span class=p>=</span> <span class=k>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=p>=</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span></span></span></code></pre></div></figure></div><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p><ul><li>æ ¹æ®ç¯å¢ƒå˜é‡æˆ–é…ç½®åŠ¨æ€æ³¨å†Œ Bean</li><li>å®ç°å¤æ‚çš„æ¡ä»¶é€»è¾‘ï¼Œè¶…å‡º <code>@ConditionalOn...</code> æ³¨è§£çš„èƒ½åŠ›èŒƒå›´</li><li>éœ€è¦æ ¹æ®è¿è¡Œæ—¶ä¿¡æ¯å†³å®šæ³¨å†Œå“ªäº› Bean</li></ul><h2 id=tomcat-11-æ ¸å¿ƒå˜æ›´>Tomcat 11 æ ¸å¿ƒå˜æ›´<a href=#tomcat-11-æ ¸å¿ƒå˜æ›´ class=anchor aria-hidden=true>#</a></h2><p>Tomcat 11 æ˜¯ Apache Tomcat é¡¹ç›®ç¬¬ä¹ä¸ªä¸»è¦ç‰ˆæœ¬ï¼Œæ ‡å¿—ç€ä»ä¼ ç»Ÿ Java EE å‘ç°ä»£ Jakarta EE æ¡†æ¶çš„é‡è¦è½¬å˜ã€‚æœ¬æ¬¡å‡çº§æ”¯æŒ Jakarta EE 11ï¼Œå®ç°äº†ï¼š</p><ul><li><strong>Servlet 6.1</strong> - æ”¹è¿›å¼‚æ­¥è¯·æ±‚å¤„ç†ï¼Œæå‡é•¿è¿è¡Œä»»åŠ¡çš„æ€§èƒ½</li><li><strong>JSP 4.0</strong></li><li><strong>EL 6.0</strong></li><li><strong>WebSocket 2.2</strong> - æ€§èƒ½å’Œå¯æ‰©å±•æ€§æ˜¾è‘—æå‡ï¼Œç‰¹åˆ«é€‚åˆå®æ—¶åŒå‘é€šä¿¡åœºæ™¯ï¼ˆå¦‚èŠå¤©åº”ç”¨ã€åä½œå·¥å…·ï¼‰</li><li><strong>Authentication 3.1</strong></li></ul><h3 id=è™šæ‹Ÿçº¿ç¨‹æ”¯æŒjava-21>è™šæ‹Ÿçº¿ç¨‹æ”¯æŒï¼ˆJava 21+ï¼‰<a href=#è™šæ‹Ÿçº¿ç¨‹æ”¯æŒjava-21 class=anchor aria-hidden=true>#</a></h3><p><strong>é‡è¦ç‰¹æ€§ï¼š</strong> Tomcat 11 åŸç”Ÿæ”¯æŒ Java 21 çš„ Project Loom è™šæ‹Ÿçº¿ç¨‹ï¼Œè¿™æ˜¯æœ¬æ¬¡å‡çº§çš„<strong>æ ¸å¿ƒäº®ç‚¹ä¹‹ä¸€</strong>ã€‚</p><p><strong>æ€§èƒ½æ•°æ®ï¼ˆåŸºäºå®é™…æµ‹è¯•ï¼‰ï¼š</strong></p><p>æ ¹æ® Fast Thread å’Œ Java Code Geeks çš„æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼š</p><table><thead><tr><th>åœºæ™¯</th><th>å¹³å°çº¿ç¨‹</th><th>è™šæ‹Ÿçº¿ç¨‹</th><th>æ€§èƒ½æå‡</th></tr></thead><tbody><tr><td><strong>I/O å¯†é›†å‹åº”ç”¨</strong>ï¼ˆæ•°æ®åº“æŸ¥è¯¢ã€HTTP è°ƒç”¨ï¼‰</td><td>åŸºå‡†</td><td>2-3x ååé‡</td><td>+100-200%</td></tr><tr><td><strong>é«˜å¹¶å‘ Web è¯·æ±‚</strong>ï¼ˆ1000+ å¹¶å‘ï¼‰</td><td>åŸºå‡†</td><td>2-3x ååé‡</td><td>+100-200%</td></tr><tr><td><strong>CPU å¯†é›†å‹åº”ç”¨</strong></td><td>åŸºå‡†</td><td>æ— æ˜æ˜¾æå‡</td><td>0%</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>åŸºå‡†</td><td>-30-50%ï¼ˆçº¿ç¨‹æ ˆï¼‰</td><td>-30-50%</td></tr><tr><td><strong>å“åº”æ—¶é—´ï¼ˆP99ï¼‰</strong></td><td>åŸºå‡†</td><td>-20-40%</td><td>-20-40%</td></tr></tbody></table><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>âœ… <strong>æ¨èä½¿ç”¨</strong>ï¼šREST APIã€æ•°æ®åº“æŸ¥è¯¢ã€HTTP å®¢æˆ·ç«¯è°ƒç”¨ã€æ–‡ä»¶ I/Oã€æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹</li><li>âŒ <strong>ä¸æ¨èä½¿ç”¨</strong>ï¼šCPU å¯†é›†å‹è®¡ç®—ã€å›¾åƒå¤„ç†ã€åŠ å¯†è§£å¯†ã€å¤æ‚ç®—æ³•</li></ul><p><strong>å®é™…æ¡ˆä¾‹ï¼š</strong></p><p>ä¸€ä¸ªå…¸å‹çš„ Spring Boot Web åº”ç”¨ï¼ˆå¤„ç† REST è¯·æ±‚ï¼Œè°ƒç”¨æ•°æ®åº“å’Œå¤–éƒ¨ APIï¼‰ï¼š</p><ul><li><strong>ä½¿ç”¨å¹³å°çº¿ç¨‹</strong>ï¼š1000 å¹¶å‘è¯·æ±‚ï¼Œååé‡çº¦ 500 req/sï¼ŒP99 å»¶è¿Ÿ 200ms</li><li><strong>ä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹</strong>ï¼š1000 å¹¶å‘è¯·æ±‚ï¼Œååé‡çº¦ 1200-1500 req/sï¼ŒP99 å»¶è¿Ÿ 120ms</li><li><strong>æ€§èƒ½æå‡</strong>ï¼šååé‡æå‡ 2-3 å€ï¼Œå»¶è¿Ÿé™ä½ 40%</li></ul><p><strong>ä¼˜åŠ¿ï¼š</strong></p><ul><li>è½»é‡çº§å¹¶å‘æ¨¡å‹ï¼Œç®€åŒ–çº¿ç¨‹ç®¡ç†</li><li>ç›¸æ¯”ä¼ ç»Ÿçº¿ç¨‹æ¨¡å‹ï¼Œæä¾›æ›´å¥½çš„å¯æ‰©å±•æ€§</li><li>ç‰¹åˆ«é€‚åˆ I/O å¯†é›†å‹åº”ç”¨ï¼Œå¯ä»¥å¤„ç†å¤§é‡å¹¶å‘è¿æ¥</li></ul><p><strong>é…ç½®æ–¹å¼ï¼š</strong></p><p>åœ¨ Spring Boot 4 ä¸­ï¼Œè™šæ‹Ÿçº¿ç¨‹æ”¯æŒé€šè¿‡é…ç½®å±æ€§å¯ç”¨ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>threads</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>virtual</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div></figure></div><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>Web è¯·æ±‚å¤„ç†</li><li>WebSocket è¿æ¥ç®¡ç†</li><li>é«˜å¹¶å‘ I/O æ“ä½œ</li></ul><h3 id=websocket-22-æ€§èƒ½æå‡>WebSocket 2.2 æ€§èƒ½æå‡<a href=#websocket-22-æ€§èƒ½æå‡ class=anchor aria-hidden=true>#</a></h3><p><strong>é‡è¦å˜åŒ–ï¼š</strong> Tomcat 11 å‡çº§åˆ° Jakarta WebSocket 2.2ï¼Œå¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§æå‡ã€‚</p><p><strong>ä¸»è¦æ”¹è¿›ï¼š</strong></p><ul><li>æ›´é«˜æ•ˆçš„å®æ—¶åŒå‘é€šä¿¡å¤„ç†</li><li>æ”¹è¿›çš„æµå¼æ•°æ®ä¼ è¾“èƒ½åŠ›</li><li>æ›´å¥½çš„å¹¶å‘è¿æ¥ç®¡ç†</li><li>ç‰¹åˆ«é€‚åˆéœ€è¦å®æ—¶æ›´æ–°çš„åº”ç”¨ï¼ˆå¦‚èŠå¤©ã€åä½œå·¥å…·ã€å®æ—¶æ•°æ®æµï¼‰</li></ul><p><strong>ä¸ HTTP/2 å’Œå¼‚æ­¥å¤„ç†çš„ååŒï¼š</strong></p><p>Tomcat 11 çš„ WebSocket æ”¹è¿›ä¸ HTTP/2 æ”¯æŒå’Œå¼‚æ­¥å¤„ç†èƒ½åŠ›ååŒå·¥ä½œï¼Œç¡®ä¿æ›´å“åº”å¼å’Œå¯æ‰©å±•çš„ Web åº”ç”¨ã€‚</p><h3 id=servlet-61-å¼‚æ­¥å¤„ç†æ”¹è¿›>Servlet 6.1 å¼‚æ­¥å¤„ç†æ”¹è¿›<a href=#servlet-61-å¼‚æ­¥å¤„ç†æ”¹è¿› class=anchor aria-hidden=true>#</a></h3><p><strong>é‡è¦å˜åŒ–ï¼š</strong> Jakarta Servlet 6.1 æ”¹è¿›äº† Web åº”ç”¨å¤„ç† HTTP è¯·æ±‚çš„æ–¹å¼ï¼Œç‰¹åˆ«æ˜¯å¼‚æ­¥è¯·æ±‚å¤„ç†ã€‚</p><p><strong>ä¸»è¦æ”¹è¿›ï¼š</strong></p><ul><li>æ›´é«˜æ•ˆçš„å¼‚æ­¥è¯·æ±‚å¤„ç†æœºåˆ¶</li><li>æå‡é•¿è¿è¡Œä»»åŠ¡çš„æ€§èƒ½</li><li>æ›´å¥½çš„èµ„æºåˆ©ç”¨ç‡</li></ul><h3 id=å®‰å…¨å¢å¼º>å®‰å…¨å¢å¼º<a href=#å®‰å…¨å¢å¼º class=anchor aria-hidden=true>#</a></h3><p><strong>é‡è¦å˜åŒ–ï¼š</strong> Tomcat 11 å¼•å…¥äº†å¤šé¡¹å®‰å…¨å¢å¼ºã€‚</p><p><strong>ä¸»è¦æ”¹è¿›ï¼š</strong></p><ul><li><strong>æ›´å¥½çš„ TLS/SSL é»˜è®¤é…ç½®</strong> - ä½¿ç®¡ç†å‘˜æ›´å®¹æ˜“å»ºç«‹å®‰å…¨çš„ HTTPS è¿æ¥ï¼Œå¼€ç®±å³ç”¨</li><li>æ”¹è¿›çš„å®‰å…¨å®è·µå’Œé»˜è®¤è®¾ç½®</li></ul><h3 id=æœ€ä½-java-ç‰ˆæœ¬è¦æ±‚>æœ€ä½ Java ç‰ˆæœ¬è¦æ±‚<a href=#æœ€ä½-java-ç‰ˆæœ¬è¦æ±‚ class=anchor aria-hidden=true>#</a></h3><p>Tomcat 11 è¦æ±‚è‡³å°‘ <strong>Java SE 17</strong>ï¼Œè¿™ä¸ªå’Œ Spring Boot 4 çš„è¦æ±‚ä¸€è‡´ã€‚</p><p><strong>å½±å“ï¼š</strong></p><ul><li>ç¡®ä¿ Tomcat èƒ½å¤Ÿåˆ©ç”¨æœ€æ–°çš„ Java è¯­è¨€ç‰¹æ€§å’Œæ€§èƒ½æ”¹è¿›</li><li>åŒ…æ‹¬å¢å¼ºçš„å†…å­˜ç®¡ç†ã€Recordsã€æ›´é«˜æ•ˆçš„ switch è¡¨è¾¾å¼ç­‰</li><li>éœ€è¦ä»æ—§ç‰ˆæœ¬ Java å‡çº§çš„åº”ç”¨éœ€è¦ç‰¹åˆ«æ³¨æ„</li></ul><h3 id=openssl-æ”¯æŒjava-22>OpenSSL æ”¯æŒï¼ˆJava 22+ï¼‰<a href=#openssl-æ”¯æŒjava-22 class=anchor aria-hidden=true>#</a></h3><p>å¦‚æœä½ ç”¨çš„æ˜¯ Java 22+ï¼ŒTomcat 11 æ”¯æŒé€šè¿‡ FFMï¼ˆForeign Function & Memory APIï¼‰ä½¿ç”¨ OpenSSLï¼Œæ€§èƒ½ä¼šæ›´å¥½ã€‚</p><h3 id=javax-åˆ°-jakarta-å‘½åç©ºé—´è¿ç§»>javax. <em>åˆ° jakarta.</em> å‘½åç©ºé—´è¿ç§»<a href=#javax-åˆ°-jakarta-å‘½åç©ºé—´è¿ç§» class=anchor aria-hidden=true>#</a></h3><p><strong>é‡è¦æé†’ï¼š</strong> è¿ç§»åˆ° Tomcat 11 çš„ä¸€ä¸ªæŒ‘æˆ˜æ€§æ–¹é¢æ˜¯éœ€è¦é‡æ„åº”ç”¨ä»¥é€‚åº”ä» <code>javax.*</code> åˆ° <code>jakarta.*</code> å‘½åç©ºé—´çš„åˆ‡æ¢ã€‚</p><p><strong>å½±å“ï¼š</strong></p><ul><li>è¿™æ˜¯ä»æ—©æœŸ Tomcat ç‰ˆæœ¬è¿ç§»çš„åŸºç¡€æ€§å˜æ›´</li><li>ç‰¹åˆ«æ˜¯ä½¿ç”¨ Java EE çš„åº”ç”¨éœ€è¦ç‰¹åˆ«æ³¨æ„</li><li>Tomcat 11 æä¾›äº† <a href=https://github.com/apache/tomcat-jakartaee-migration/blob/main/README.md target=_blank rel=noopener>è¿ç§»å·¥å…·</a>
æ¥æ”¯æŒè¿™ä¸€è½¬æ¢</li><li>éœ€è¦ä»”ç»†æµ‹è¯•ä»¥ç¡®ä¿åº”ç”¨åœ¨æ–°å‘½åç©ºé—´ä¸‹ç»§ç»­æ­£å¸¸å·¥ä½œ</li></ul><p><strong>æ³¨æ„ï¼š</strong> å¦‚æœä½ è¿˜åœ¨ä½¿ç”¨ Spring Boot 2.xï¼Œéœ€è¦å…ˆå‡çº§åˆ° Spring Boot 3.xï¼ˆå·²å®Œæˆ <code>javax.*</code> åˆ° <code>jakarta.*</code> è¿ç§»ï¼‰ï¼Œç„¶åå†è€ƒè™‘å‡çº§åˆ° Spring Boot 4.0ã€‚</p><h3 id=http-header-å¤§å°å†™å¤„ç†å˜åŒ–>HTTP Header å¤§å°å†™å¤„ç†å˜åŒ–<a href=#http-header-å¤§å°å†™å¤„ç†å˜åŒ– class=anchor aria-hidden=true>#</a></h3><p>Tomcat 11 ä½¿ç”¨ <strong>header name çš„åŸå§‹å¤§å°å†™</strong>æ¥å­˜å‚¨ HTTP/1.1 request headersï¼Œè€Œä¸æ˜¯å¼ºåˆ¶å°†å…¶è½¬æ¢ä¸ºå°å†™ã€‚<strong>ä»¥å‰ Tomcat ä¼šè‡ªåŠ¨è½¬å°å†™ï¼Œç°åœ¨ä¸ä¼šäº†</strong>ã€‚</p><p><strong>ä¸»è¦å½±å“ï¼š</strong></p><ul><li>å– Header æ—¶ä¸€å®šè¦å…³æ³¨å¤§å°å†™</li><li>å»ºè®®æŒ‰ç…§ RFC 7230 å»ºè®®ï¼Œå…¨é“¾è·¯éƒ½ç»Ÿä¸€ä½¿ç”¨å°å†™</li><li>å¦‚æœä»£ç ä¸­ç›´æ¥æ¯”è¾ƒ header åç§°å­—ç¬¦ä¸²ï¼Œå¯èƒ½å› ä¸ºå¤§å°å†™ä¸åŒ¹é…è€Œå¤±è´¥</li><li>Spring Framework 7.0 çš„ <code>HttpHeaders</code> API ä¹Ÿæœ‰ç›¸åº”å˜åŒ–</li></ul><h2 id=åºŸå¼ƒåŠŸèƒ½ä¸ç ´åæ€§å˜æ›´>åºŸå¼ƒåŠŸèƒ½ä¸ç ´åæ€§å˜æ›´<a href=#åºŸå¼ƒåŠŸèƒ½ä¸ç ´åæ€§å˜æ›´ class=anchor aria-hidden=true>#</a></h2><h3 id=ç§»é™¤çš„åºŸå¼ƒ-api>ç§»é™¤çš„åºŸå¼ƒ API<a href=#ç§»é™¤çš„åºŸå¼ƒ-api class=anchor aria-hidden=true>#</a></h3><p>Spring Boot 4.0 è¿™æ¬¡ç§»é™¤äº† 36 ä¸ªåºŸå¼ƒç±»ï¼Œå¤§æ¦‚å äº†æ‰€æœ‰åºŸå¼ƒ API çš„ 88%ã€‚è¿ç§»çš„æ—¶å€™è¿™äº›åœ°æ–¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p><h4 id=mockbean-å’Œ-spybean-ç§»é™¤>MockBean å’Œ SpyBean ç§»é™¤<a href=#mockbean-å’Œ-spybean-ç§»é™¤ class=anchor aria-hidden=true>#</a></h4><p><strong>å½±å“ï¼š</strong> æµ‹è¯•ä»£ç ä¸­å¹¿æ³›ä½¿ç”¨ã€‚æ—§å†™æ³•ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Spring Boot 3.x ï¼ˆå·²åºŸå¼ƒï¼Œ4.0 ç§»é™¤ï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@SpringBootTest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>class</span> <span class=nc>UserServiceTest</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@MockBean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>UserRepository</span><span class=w> </span><span class=n>userRepository</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p>æ–°å†™æ³•ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Spring Boot 4.0 ï¼ˆä½¿ç”¨ Spring å®˜æ–¹æ”¯æŒï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@SpringBootTest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>class</span> <span class=nc>UserServiceTest</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@MockitoBean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>UserRepository</span><span class=w> </span><span class=n>userRepository</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><h3 id=mockitotestexecutionlistener-ç§»é™¤>MockitoTestExecutionListener ç§»é™¤<a href=#mockitotestexecutionlistener-ç§»é™¤ class=anchor aria-hidden=true>#</a></h3><p>Spring Boot 4.0 ç§»é™¤äº†è¯¥ç›‘å¬å™¨ï¼Œä½¿ç”¨ Spring çš„åŸç”Ÿ Mockito æ”¯æŒã€‚</p><h3 id=websecurityconfigureradapter-ç§»é™¤>WebSecurityConfigurerAdapter ç§»é™¤<a href=#websecurityconfigureradapter-ç§»é™¤ class=anchor aria-hidden=true>#</a></h3><p>è¯¥æ”¹åŠ¨åœ¨ Spring Boot 3.x æ—¶å·²åºŸå¼ƒï¼Œ4.0 æ­£å¼ç§»é™¤ã€‚</p><p>æ—§å†™æ³•ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Spring Boot 2.x/3.x ï¼ˆå·²åºŸå¼ƒï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@EnableWebSecurity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SecurityConfig</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>WebSecurityConfigurerAdapter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>configure</span><span class=p>(</span><span class=n>HttpSecurity</span><span class=w> </span><span class=n>http</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>http</span><span class=p>.</span><span class=na>authorizeRequests</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>antMatchers</span><span class=p>(</span><span class=s>&#34;/public/**&#34;</span><span class=p>).</span><span class=na>permitAll</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>anyRequest</span><span class=p>().</span><span class=na>authenticated</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p>éœ€è¦æ”¹æˆæ–°çš„æ–¹å¼ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Spring Boot 4.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@EnableWebSecurity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SecurityConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>SecurityFilterChain</span><span class=w> </span><span class=nf>filterChain</span><span class=p>(</span><span class=n>HttpSecurity</span><span class=w> </span><span class=n>http</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>http</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>authorizeHttpRequests</span><span class=p>(</span><span class=n>auth</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>auth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>requestMatchers</span><span class=p>(</span><span class=s>&#34;/public/**&#34;</span><span class=p>).</span><span class=na>permitAll</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>anyRequest</span><span class=p>().</span><span class=na>authenticated</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p>è¯¥æ”¹åŠ¨åœ¨ Spring Boot 3.x æ—¶å·²åºŸå¼ƒï¼Œ4.0 æ­£å¼ç§»é™¤ã€‚</p><h3 id=undertow-æ”¯æŒç§»é™¤>Undertow æ”¯æŒç§»é™¤<a href=#undertow-æ”¯æŒç§»é™¤ class=anchor aria-hidden=true>#</a></h3><p>Undertow ç›®å‰ä¸å…¼å®¹ Servlet 6.1ï¼ŒSpring Boot 4.0 ç§»é™¤äº†å¯¹å®ƒçš„æ”¯æŒï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!-- Spring Boot 4.0 ä¸å†æ”¯æŒ --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.springframework.boot<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>spring-boot-starter-undertow<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span></span></span></code></pre></div></figure></div><p><strong>æ›¿ä»£æ–¹æ¡ˆï¼š</strong></p><ul><li>åˆ‡æ¢åˆ° Tomcat 11ï¼ˆæ¨èï¼‰</li><li>ä½¿ç”¨ Jetty 12.1+</li><li>ç­‰å¾… Undertow æ”¯æŒ Servlet 6.1</li></ul><h3 id=spring-batch-é»˜è®¤è¡Œä¸ºå˜æ›´>Spring Batch é»˜è®¤è¡Œä¸ºå˜æ›´<a href=#spring-batch-é»˜è®¤è¡Œä¸ºå˜æ›´ class=anchor aria-hidden=true>#</a></h3><p>Spring Batch ç°åœ¨é»˜è®¤åœ¨å†…å­˜ä¸­å­˜å‚¨å…ƒæ•°æ®ï¼Œä¸å†ä½¿ç”¨æ•°æ®åº“ã€‚è¿™å¯èƒ½å¯¼è‡´ Job æ‰§è¡Œå†å²ä¸¢å¤±ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!-- å¦‚æœéœ€è¦æŒä¹…åŒ–å…ƒæ•°æ®ï¼Œæ˜¾å¼æ·»åŠ  JDBC æ”¯æŒ --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.springframework.boot<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>spring-boot-starter-batch-jdbc<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span></span></span></code></pre></div></figure></div><h3 id=reactive-pulsar-æ”¯æŒç§»é™¤>Reactive Pulsar æ”¯æŒç§»é™¤<a href=#reactive-pulsar-æ”¯æŒç§»é™¤ class=anchor aria-hidden=true>#</a></h3><p>Spring Pulsar ç§»é™¤äº† Reactor æ”¯æŒï¼Œæ‰€ä»¥ Spring Boot 4.0 ä¹Ÿç›¸åº”ç§»é™¤äº†å“åº”å¼ Pulsar å®¢æˆ·ç«¯çš„è‡ªåŠ¨é…ç½®ã€‚</p><h3 id=embedded-executable-uber-jar-launch-scripts-ç§»é™¤>Embedded Executable Uber Jar Launch Scripts ç§»é™¤<a href=#embedded-executable-uber-jar-launch-scripts-ç§»é™¤ class=anchor aria-hidden=true>#</a></h3><p>Spring Boot 4.0 ç§»é™¤äº†ç”¨äºåˆ›å»º"å®Œå…¨å¯æ‰§è¡Œ" jar æ–‡ä»¶çš„åµŒå…¥å¼å¯åŠ¨è„šæœ¬æ”¯æŒã€‚è¯¥åŠŸèƒ½ä»…é€‚ç”¨äºç±» Unix ç³»ç»Ÿï¼Œä¸”ä¸ <a href=https://docs.spring.io/spring-boot/4.0-SNAPSHOT/reference/packaging/efficient.html target=_blank rel=noopener>é«˜æ•ˆéƒ¨ç½²å»ºè®®</a>
å†²çªã€‚</p><p>å¦‚æœéœ€è¦ç±»ä¼¼åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ Gradle çš„ application plugin ç­‰æ›¿ä»£æ–¹æ¡ˆã€‚ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ Spring Boot çš„æ„å»ºæ’ä»¶åˆ›å»º uber jarï¼Œå¹¶é€šè¿‡ <code>java -jar</code> è¿è¡Œã€‚</p><h3 id=spring-session-hazelcastmongodb-ç§»é™¤>Spring Session Hazelcast/MongoDB ç§»é™¤<a href=#spring-session-hazelcastmongodb-ç§»é™¤ class=anchor aria-hidden=true>#</a></h3><p>Spring Session Hazelcast å’Œ Spring Session MongoDB ç°åœ¨åˆ†åˆ«ç”± Hazelcast å›¢é˜Ÿå’Œ MongoDB å›¢é˜Ÿç»´æŠ¤ï¼ŒSpring Boot 4.0 ç§»é™¤äº†å¯¹å®ƒä»¬çš„ç›´æ¥æ”¯æŒã€‚å¦‚éœ€ä½¿ç”¨ï¼Œè¯·ç›´æ¥ä½¿ç”¨å¯¹åº”çš„ starterã€‚</p><h2 id=å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ>å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ<a href=#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ class=anchor aria-hidden=true>#</a></h2><h3 id=http-header-å¤§å°å†™é—®é¢˜>HTTP Header å¤§å°å†™é—®é¢˜<a href=#http-header-å¤§å°å†™é—®é¢˜ class=anchor aria-hidden=true>#</a></h3><p><strong>é—®é¢˜</strong>ï¼šHeader è®¿é—®å¤±è´¥æˆ–è¡Œä¸ºä¸ä¸€è‡´</p><p>å‡çº§åˆ° Tomcat 11.0.12+ å’Œ Spring Framework 7.0 åï¼ŒæŸäº› header è®¿é—®å¯èƒ½å‡ºç°é—®é¢˜ã€‚è¿™æ˜¯ Spring Boot 4 è¿ç§»ä¸­<strong>å¿…é¡»å…³æ³¨çš„å‘</strong>ã€‚</p><p><strong>åŸå› ï¼š</strong></p><ul><li><strong>Tomcat 11.0.12+</strong>ï¼šHTTP è¯·æ±‚å¤´åç§°ä¼šä¿ç•™åŸå§‹å¤§å°å†™ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶è½¬æ¢ä¸ºå°å†™ï¼ˆ<strong>ä»¥å‰ Tomcat ä¼šè‡ªåŠ¨è½¬å°å†™ï¼Œç°åœ¨ä¸ä¼šäº†</strong>ï¼‰</li><li>Spring Framework 7.0ï¼š<code>HttpHeaders</code> API ä¸å†ç»§æ‰¿ <code>MultiValueMap</code></li><li>Header åç§°å¤§å°å†™ä¸æ•æ„Ÿï¼Œä½†æŸäº›ä»£ç å¯èƒ½ä¾èµ–ç‰¹å®šçš„å¤§å°å†™æ ¼å¼æˆ–ç›´æ¥æ¯”è¾ƒ header åç§°</li></ul><p><strong>å»ºè®®ï¼š</strong> æŒ‰ç…§ RFC 7230 å»ºè®®ï¼Œå…¨é“¾è·¯éƒ½ç»Ÿä¸€ä½¿ç”¨å°å†™ header åç§°ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><ul><li>æ›´æ–° <code>HttpHeaders</code> çš„ä½¿ç”¨æ–¹å¼ï¼š</li></ul><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// æ—§ä»£ç ï¼ˆSpring Framework 6.xï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>HttpHeaders</span><span class=w> </span><span class=n>headers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HttpHeaders</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>headers</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;application/json&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>String</span><span class=w> </span><span class=n>contentType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>headers</span><span class=p>.</span><span class=na>getFirst</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// æ–°ä»£ç ï¼ˆSpring Framework 7.0ï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>HttpHeaders</span><span class=w> </span><span class=n>headers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HttpHeaders</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>headers</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;application/json&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>String</span><span class=w> </span><span class=n>contentType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>headers</span><span class=p>.</span><span class=na>getFirst</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span><span class=p>);</span><span class=w> </span><span class=c1>// ä»ç„¶å¯ç”¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// æˆ–ä½¿ç”¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>boolean</span><span class=w> </span><span class=n>hasContentType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>headers</span><span class=p>.</span><span class=na>contains</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span><span class=p>);</span><span class=w> </span><span class=o>//</span><span class=w> </span><span class=n>å¤§å°å†™ä¸æ•æ„Ÿ</span></span></span></code></pre></div></figure></div><ul><li>ç»Ÿä¸€ä½¿ç”¨æ ‡å‡†æ ¼å¼çš„ header åç§°ï¼š</li></ul><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// æ¨èï¼šä½¿ç”¨æ ‡å‡†æ ¼å¼</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>headers</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;application/json&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>headers</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=s>&#34;Authorization&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Bearer token&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>headers</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=s>&#34;X-Custom-Header&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;value&#34;</span><span class=p>);</span></span></span></code></pre></div></figure></div><ul><li>æ›´æ–° header åç§°æ¯”è¾ƒçš„ä»£ç ï¼š</li></ul><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// é—®é¢˜ä»£ç ï¼šç›´æ¥å­—ç¬¦ä¸²æ¯”è¾ƒå¯èƒ½å¤±è´¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Enumeration</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>headerNames</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>request</span><span class=p>.</span><span class=na>getHeaderNames</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>headerNames</span><span class=p>.</span><span class=na>hasMoreElements</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>headerNames</span><span class=p>.</span><span class=na>nextElement</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>name</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=s>&#34;content-type&#34;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// å¯èƒ½å¤±è´¥ï¼Œname å¯èƒ½æ˜¯ &#34;Content-Type&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// æ¨èï¼šä½¿ç”¨å¤§å°å†™ä¸æ•æ„Ÿæ¯”è¾ƒ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>name</span><span class=p>.</span><span class=na>equalsIgnoreCase</span><span class=p>(</span><span class=s>&#34;content-type&#34;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><ul><li>æ›´æ–°æµ‹è¯•ä»£ç ï¼š</li></ul><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// MockHttpServletRequest çš„è¡Œä¸ºå·²æ›´æ–°</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>MockHttpServletRequest</span><span class=w> </span><span class=n>request</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>MockHttpServletRequest</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>request</span><span class=p>.</span><span class=na>addHeader</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;application/json&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// ä»¥ä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertThat</span><span class=p>(</span><span class=n>request</span><span class=p>.</span><span class=na>getHeader</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span><span class=p>)).</span><span class=na>isNotNull</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertThat</span><span class=p>(</span><span class=n>request</span><span class=p>.</span><span class=na>getHeader</span><span class=p>(</span><span class=s>&#34;content-type&#34;</span><span class=p>)).</span><span class=na>isNotNull</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertThat</span><span class=p>(</span><span class=n>request</span><span class=p>.</span><span class=na>getHeader</span><span class=p>(</span><span class=s>&#34;CONTENT-TYPE&#34;</span><span class=p>)).</span><span class=na>isNotNull</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// ä½†éå†æ—¶éœ€è¦æ³¨æ„åŸå§‹å¤§å°å†™</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Enumeration</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>names</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>request</span><span class=p>.</span><span class=na>getHeaderNames</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>names</span><span class=p>.</span><span class=na>hasMoreElements</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>names</span><span class=p>.</span><span class=na>nextElement</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// name å¯èƒ½æ˜¯ &#34;Content-Type&#34; è€Œä¸æ˜¯ &#34;content-type&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>assertThat</span><span class=p>(</span><span class=n>name</span><span class=p>).</span><span class=na>isEqualTo</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span><span class=p>);</span><span class=w> </span><span class=c1>// ä½¿ç”¨åŸå§‹å¤§å°å†™</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><h3 id=ç¼–è¯‘æ—¶-nullability-é”™è¯¯>ç¼–è¯‘æ—¶ Nullability é”™è¯¯<a href=#ç¼–è¯‘æ—¶-nullability-é”™è¯¯ class=anchor aria-hidden=true>#</a></h3><p><strong>é—®é¢˜</strong>ï¼šJSpecify æ³¨è§£å¯¼è‡´ Kotlin æˆ–ç©ºå€¼æ£€æŸ¥å·¥å…·æŠ¥é”™</p><p>Kotlin é¡¹ç›®å¯èƒ½é‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>error: [nullness] incompatible types in return.
</span></span><span class=line><span class=cl>  required: @NonNull String
</span></span><span class=line><span class=cl>  found:    @Nullable String</span></span></code></pre></div></figure></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=c1>// Kotlin ä¸­å¤„ç†å¯ç©ºç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>val</span> <span class=py>user</span><span class=p>:</span> <span class=n>User</span><span class=p>?</span> <span class=p>=</span> <span class=n>userService</span><span class=p>.</span><span class=n>findUser</span><span class=p>(</span><span class=s2>&#34;123&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>name</span><span class=p>:</span> <span class=n>String</span> <span class=p>=</span> <span class=n>user</span><span class=o>?.</span><span class=n>name</span> <span class=o>?:</span> <span class=s2>&#34;Unknown&#34;</span></span></span></code></pre></div></figure></div><p>æˆ–è€…ä¸´æ—¶ç¦ç”¨ä¸¥æ ¼ç©ºå€¼æ£€æŸ¥ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;plugin&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.apache.maven.plugins<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>maven-compiler-plugin<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;configuration&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;compilerArgs&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;arg&gt;</span>-Xlint:-nullness<span class=nt>&lt;/arg&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/compilerArgs&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/configuration&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/plugin&gt;</span></span></span></code></pre></div></figure></div><h3 id=jackson-3x-åºåˆ—åŒ–é—®é¢˜>Jackson 3.x åºåˆ—åŒ–é—®é¢˜<a href=#jackson-3x-åºåˆ—åŒ–é—®é¢˜ class=anchor aria-hidden=true>#</a></h3><p><strong>é—®é¢˜</strong>ï¼šJSON åºåˆ—åŒ–/ååºåˆ—åŒ–è¡Œä¸ºå˜æ›´</p><p>Jackson 3.x çš„è¡Œä¸ºå’Œ 2.x æœ‰äº›ä¸ä¸€æ ·ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›åºåˆ—åŒ–é—®é¢˜ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>JacksonConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>ObjectMapper</span><span class=w> </span><span class=nf>objectMapper</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ObjectMapper</span><span class=w> </span><span class=n>mapper</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ObjectMapper</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// æ¢å¤ Jackson 2.x çš„å…¼å®¹æ€§è¡Œä¸º</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>mapper</span><span class=p>.</span><span class=na>configure</span><span class=p>(</span><span class=n>DeserializationFeature</span><span class=p>.</span><span class=na>FAIL_ON_UNKNOWN_PROPERTIES</span><span class=p>,</span><span class=w> </span><span class=kc>false</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>mapper</span><span class=p>.</span><span class=na>configure</span><span class=p>(</span><span class=n>SerializationFeature</span><span class=p>.</span><span class=na>WRITE_DATES_AS_TIMESTAMPS</span><span class=p>,</span><span class=w> </span><span class=kc>false</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>mapper</span><span class=p>.</span><span class=na>registerModule</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>JavaTimeModule</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>mapper</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><h3 id=ç¬¬ä¸‰æ–¹åº“ä¸å…¼å®¹>ç¬¬ä¸‰æ–¹åº“ä¸å…¼å®¹<a href=#ç¬¬ä¸‰æ–¹åº“ä¸å…¼å®¹ class=anchor aria-hidden=true>#</a></h3><p><strong>é—®é¢˜</strong>ï¼šæŸäº›åº“ä¾èµ–æ—§ç‰ˆæœ¬çš„ Spring æˆ– Jakarta API</p><p>éƒ¨åˆ†ç¬¬ä¸‰æ–¹åº“å¯èƒ½å°šæœªé€‚é… Spring Boot 4.0ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li>æ£€æŸ¥åº“çš„æœ€æ–°ç‰ˆæœ¬</li><li>ä½¿ç”¨ä¾èµ–æ’é™¤å’Œå¼ºåˆ¶ç‰ˆæœ¬ï¼š</li></ol><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>com.example<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>legacy-library<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>1.0.0<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;exclusions&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;exclusion&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;groupId&gt;</span>org.springframework<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;artifactId&gt;</span>*<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/exclusion&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/exclusions&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span></span></span></code></pre></div></figure></div><ul><li>è€ƒè™‘æ›¿æ¢ä¸ºå…¼å®¹çš„åº“</li></ul><h3 id=spring-batch-å…ƒæ•°æ®ä¸¢å¤±>Spring Batch å…ƒæ•°æ®ä¸¢å¤±<a href=#spring-batch-å…ƒæ•°æ®ä¸¢å¤± class=anchor aria-hidden=true>#</a></h3><p><strong>é—®é¢˜</strong>ï¼šå‡çº§åæ‰¾ä¸åˆ° Job æ‰§è¡Œå†å²</p><p>å‡çº§å Job æ‰§è¡Œå†å²ä¸¢å¤±ï¼ŒåŸå› æ˜¯ Spring Batch é»˜è®¤è¡Œä¸ºå˜æ›´ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.springframework.boot<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>spring-boot-starter-batch-jdbc<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span></span></span></code></pre></div></figure></div><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>batch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>jdbc</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>initialize-schema</span><span class=p>:</span><span class=w> </span><span class=l>always</span></span></span></code></pre></div></figure></div><h3 id=undertow-æ— æ³•ä½¿ç”¨>Undertow æ— æ³•ä½¿ç”¨<a href=#undertow-æ— æ³•ä½¿ç”¨ class=anchor aria-hidden=true>#</a></h3><p><strong>é—®é¢˜</strong>ï¼š<code>spring-boot-starter-undertow</code> ä¸å†å¯ç”¨</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šåˆ‡æ¢åˆ° Tomcatï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.springframework.boot<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>spring-boot-starter-web<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!-- é»˜è®¤ä½¿ç”¨ Tomcatï¼Œæ— éœ€é¢å¤–é…ç½® --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span></span></span></code></pre></div></figure></div><p>å¦‚æœéœ€è¦ Jettyï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.springframework.boot<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>spring-boot-starter-web<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;exclusions&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;exclusion&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;groupId&gt;</span>org.springframework.boot<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;artifactId&gt;</span>spring-boot-starter-tomcat<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/exclusion&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/exclusions&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.springframework.boot<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>spring-boot-starter-jetty<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span></span></span></code></pre></div></figure></div><h3 id=è™šæ‹Ÿçº¿ç¨‹æ€§èƒ½æœªè¾¾é¢„æœŸ>è™šæ‹Ÿçº¿ç¨‹æ€§èƒ½æœªè¾¾é¢„æœŸ<a href=#è™šæ‹Ÿçº¿ç¨‹æ€§èƒ½æœªè¾¾é¢„æœŸ class=anchor aria-hidden=true>#</a></h3><p><strong>é—®é¢˜</strong>ï¼šå¯ç”¨è™šæ‹Ÿçº¿ç¨‹åæ€§èƒ½æ— æ˜æ˜¾æå‡</p><p><strong>å¯èƒ½åŸå› ï¼š</strong></p><ul><li>åº”ç”¨æ˜¯ CPU å¯†é›†å‹çš„ï¼ˆè™šæ‹Ÿçº¿ç¨‹å¯¹è¿™ç§æƒ…å†µæ²¡ç”¨ï¼‰</li><li>æ•°æ®åº“è¿æ¥æ± é…ç½®ä¸å½“</li><li>ç”¨äº†åŒæ­¥çš„é˜»å¡ä»£ç ï¼ˆæ¯”å¦‚ <code>synchronized</code>ï¼‰</li></ul><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># ä¼˜åŒ–æ•°æ®åº“è¿æ¥æ± </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>datasource</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hikari</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>maximum-pool-size</span><span class=p>:</span><span class=w> </span><span class=m>50</span><span class=w>  </span><span class=c># è™šæ‹Ÿçº¿ç¨‹ç¯å¢ƒå¯é€‚å½“å¢åŠ </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>minimum-idle</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># ç¡®ä¿å¯ç”¨è™šæ‹Ÿçº¿ç¨‹</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>threads</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>virtual</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span></span></span></code></pre></div></figure></div><p>ä½¿ç”¨ JFR (Java Flight Recorder) åˆ†æï¼š</p><div class=expressive-code><figure class="frame is-terminal not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>java -XX:StartFlightRecording<span class=o>=</span><span class=nv>filename</span><span class=o>=</span>recording.jfr -jar app.jar</span></span></code></pre></div></figure></div><h3 id=æµ‹è¯•ä¸Šä¸‹æ–‡ç¼“å­˜é—®é¢˜>æµ‹è¯•ä¸Šä¸‹æ–‡ç¼“å­˜é—®é¢˜<a href=#æµ‹è¯•ä¸Šä¸‹æ–‡ç¼“å­˜é—®é¢˜ class=anchor aria-hidden=true>#</a></h3><p><strong>é—®é¢˜</strong>ï¼šæµ‹è¯•ä¸Šä¸‹æ–‡è‡ªåŠ¨æš‚åœå¯¼è‡´æµ‹è¯•å˜æ…¢</p><p>Spring Framework 7 çš„æµ‹è¯•ä¸Šä¸‹æ–‡æš‚åœæœºåˆ¶å¯èƒ½å¯¼è‡´æµ‹è¯•å˜æ…¢ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><p>è°ƒæ•´æµ‹è¯•ä¸Šä¸‹æ–‡ç¼“å­˜é…ç½®ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@SpringBootTest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@TestPropertySource</span><span class=p>(</span><span class=n>properties</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=s>&#34;spring.test.context.cache.maxSize=10&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>})</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>class</span> <span class=nc>MyTest</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><h2 id=è‡ªåŠ¨åŒ–è¿ç§»å·¥å…·>è‡ªåŠ¨åŒ–è¿ç§»å·¥å…·<a href=#è‡ªåŠ¨åŒ–è¿ç§»å·¥å…· class=anchor aria-hidden=true>#</a></h2><h3 id=openrewrite>OpenRewrite<a href=#openrewrite class=anchor aria-hidden=true>#</a></h3><p>OpenRewrite æ˜¯å¼€æºçš„è‡ªåŠ¨åŒ–ä»£ç é‡æ„å·¥å…·ï¼Œæ”¯æŒ Spring Boot è¿ç§»ã€‚</p><p><strong>Maven é›†æˆï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;build&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;plugins&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;groupId&gt;</span>org.openrewrite.maven<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;artifactId&gt;</span>rewrite-maven-plugin<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;version&gt;</span>5.40.0<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;configuration&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;activeRecipes&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&lt;recipe&gt;</span>org.openrewrite.java.spring.boot4.UpgradeSpringBoot_4_0<span class=nt>&lt;/recipe&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;/activeRecipes&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;/configuration&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;dependencies&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&lt;groupId&gt;</span>org.openrewrite.recipe<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&lt;artifactId&gt;</span>rewrite-spring<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&lt;version&gt;</span>5.22.0<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;/dependencies&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/plugin&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/plugins&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/build&gt;</span></span></span></code></pre></div></figure></div><p><strong>Gradle é›†æˆï¼š</strong></p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>plugins</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>id</span> <span class=s1>&#39;org.openrewrite.rewrite&#39;</span> <span class=n>version</span> <span class=s1>&#39;6.25.0&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>rewrite</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>activeRecipe</span><span class=o>(</span><span class=s1>&#39;org.openrewrite.java.spring.boot4.UpgradeSpringBoot_4_0&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>dependencies</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>rewrite</span> <span class=s1>&#39;org.openrewrite.recipe:rewrite-spring:5.22.0&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></figure></div><p><strong>è¿è¡Œè¿ç§»ï¼š</strong></p><div class=expressive-code><figure class="frame is-terminal not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Maven: é¢„è§ˆå˜æ›´</span>
</span></span><span class=line><span class=cl>mvn rewrite:dryRun
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Maven: åº”ç”¨å˜æ›´</span>
</span></span><span class=line><span class=cl>mvn rewrite:run
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Gradle: é¢„è§ˆå˜æ›´</span>
</span></span><span class=line><span class=cl>./gradlew rewriteDryRun
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Gradle: åº”ç”¨å˜æ›´</span>
</span></span><span class=line><span class=cl>./gradlew rewriteRun</span></span></code></pre></div></figure></div><p><strong>ä¸»è¦åŠŸèƒ½ï¼š</strong></p><ul><li>è‡ªåŠ¨å‡çº§ Spring Boot ç‰ˆæœ¬å·</li><li>æ›¿æ¢åºŸå¼ƒçš„ APIï¼ˆå¦‚ <code>@MockBean</code> â†’ <code>@MockitoBean</code>ï¼‰</li><li>æ›´æ–° import è¯­å¥</li><li>ä¿®å¤ä¾èµ–å†²çª</li><li>è°ƒæ•´é…ç½®æ–‡ä»¶æ ¼å¼</li><li>é‡æ„å®‰å…¨é…ç½®ï¼ˆç§»é™¤ <code>WebSecurityConfigurerAdapter</code>ï¼‰</li></ul><h4 id=ç¤ºä¾‹è¿ç§»å®‰å…¨é…ç½®>ç¤ºä¾‹ï¼šè¿ç§»å®‰å…¨é…ç½®<a href=#ç¤ºä¾‹è¿ç§»å®‰å…¨é…ç½® class=anchor aria-hidden=true>#</a></h4><p>OpenRewrite ä¼šè‡ªåŠ¨å°†ï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SecurityConfig</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>WebSecurityConfigurerAdapter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>configure</span><span class=p>(</span><span class=n>HttpSecurity</span><span class=w> </span><span class=n>http</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>http</span><span class=p>.</span><span class=na>authorizeRequests</span><span class=p>().</span><span class=na>anyRequest</span><span class=p>().</span><span class=na>authenticated</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><p>é‡æ„ä¸ºï¼š</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SecurityConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>SecurityFilterChain</span><span class=w> </span><span class=nf>filterChain</span><span class=p>(</span><span class=n>HttpSecurity</span><span class=w> </span><span class=n>http</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>http</span><span class=p>.</span><span class=na>authorizeHttpRequests</span><span class=p>(</span><span class=n>auth</span><span class=w> </span><span class=o>-&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>auth</span><span class=p>.</span><span class=na>anyRequest</span><span class=p>().</span><span class=na>authenticated</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>).</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></div></figure></div><h3 id=spring-boot-migrator>Spring Boot Migrator<a href=#spring-boot-migrator class=anchor aria-hidden=true>#</a></h3><p><a href=https://github.com/spring-projects-experimental/spring-boot-migrator target=_blank rel=noopener>Spring Boot Migrator</a>
æ˜¯ Spring å®˜æ–¹çš„å®éªŒæ€§å·¥å…·ï¼ŒåŸºäº OpenRewriteï¼Œä¸“é—¨ç”¨äºå°†ä¼ ç»Ÿ Spring åº”ç”¨è¿ç§»åˆ° Spring Bootï¼ŒåŒæ—¶æä¾› Spring Boot ç‰ˆæœ¬å‡çº§ã€‚</p><p><strong>ä¸»è¦åŠŸèƒ½ï¼š</strong></p><ul><li>å°†ä¼ ç»Ÿ Spring é¡¹ç›®åˆå§‹åŒ–ä¸º Spring Boot åº”ç”¨</li><li>å°† Spring XML é…ç½®è½¬æ¢ä¸º Java é…ç½®</li><li>Spring Boot ç‰ˆæœ¬å‡çº§</li></ul><div class=expressive-code><figure class="frame is-terminal not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># å®‰è£…</span>
</span></span><span class=line><span class=cl>git clone https://github.com/spring-projects-experimental/spring-boot-migrator.git
</span></span><span class=line><span class=cl><span class=nb>cd</span> spring-boot-migrator
</span></span><span class=line><span class=cl>./mvnw clean install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ‰«æé¡¹ç›®</span>
</span></span><span class=line><span class=cl>java -jar applications/cli/target/spring-boot-migrator.jar scan /path/to/project
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åº”ç”¨è¿ç§»</span>
</span></span><span class=line><span class=cl>java -jar applications/cli/target/spring-boot-migrator.jar migrate /path/to/project</span></span></code></pre></div></figure></div><h3 id=windup-red-hat>Windup (Red Hat)<a href=#windup-red-hat class=anchor aria-hidden=true>#</a></h3><p><a href=https://github.com/windup/windup target=_blank rel=noopener>Windup</a>
æ˜¯ Red Hat æä¾›çš„ Java åº”ç”¨ç°ä»£åŒ–å’Œè¿ç§»å·¥å…·ï¼Œæ”¯æŒå¤§è§„æ¨¡ Java åº”ç”¨è¿ç§»ã€‚</p><p><strong>ä¸»è¦åŠŸèƒ½ï¼š</strong></p><ul><li>ä»£ç åˆ†æå’Œè¿ç§»è¯„ä¼°</li><li>æ”¯æŒå¤šç§è¿ç§»åœºæ™¯ï¼ˆJava ç‰ˆæœ¬å‡çº§ã€æ¡†æ¶è¿ç§»ã€äº‘è¿ç§»ç­‰ï¼‰</li><li>ç”Ÿæˆè¿ç§»æŠ¥å‘Šå’Œè¯„ä¼°å·¥ä½œé‡</li></ul><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>å¤§å‹ä¼ä¸šçº§åº”ç”¨è¿ç§»</li><li>å¤šé¡¹ç›®æ‰¹é‡è¿ç§»</li><li>äº‘åŸç”Ÿåº”ç”¨è¿ç§»</li></ul><h3 id=intellij-idea-è¿ç§»åŠ©æ‰‹>IntelliJ IDEA è¿ç§»åŠ©æ‰‹<a href=#intellij-idea-è¿ç§»åŠ©æ‰‹ class=anchor aria-hidden=true>#</a></h3><p>IntelliJ IDEA 2025.3+ å†…ç½®äº† Spring Boot 4 è¿ç§»æ”¯æŒï¼š</p><ol><li>æ‰“å¼€é¡¹ç›®</li><li>å³é”®ç‚¹å‡» <code>pom.xml</code> æˆ– <code>build.gradle</code></li><li>é€‰æ‹© Refactor â†’ Migrate to Spring Boot 4.0</li><li>æŒ‰ç…§å‘å¯¼å®Œæˆè¿ç§»</li></ol><h3 id=eclipse-transformer>Eclipse Transformer<a href=#eclipse-transformer class=anchor aria-hidden=true>#</a></h3><p>ä» Spring Boot 2.x è¿ç§»æ—¶ï¼Œå¯ä½¿ç”¨ Eclipse Transformer æ‰¹é‡è½¬æ¢ <code>javax.*</code> åˆ° <code>jakarta.*</code>ï¼š</p><div class=expressive-code><figure class="frame is-terminal not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>java -jar transformer.jar /path/to/project /path/to/output</span></span></code></pre></div></figure></div><h2 id=å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™<a href=#å‚è€ƒèµ„æ–™ class=anchor aria-hidden=true>#</a></h2><h3 id=å®˜æ–¹æ–‡æ¡£>å®˜æ–¹æ–‡æ¡£<a href=#å®˜æ–¹æ–‡æ¡£ class=anchor aria-hidden=true>#</a></h3><ul><li><a href=https://spring.io/blog/2025/11/20/spring-boot-4-0-0-available-now/ target=_blank rel=noopener>Spring Boot 4.0.0 Official Release</a></li><li><a href=https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-4.0-Release-Notes target=_blank rel=noopener>Spring Boot 4.0 Release Notes</a>
- GitHub Wiki</li><li><a href=https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-4.0-Migration-Guide target=_blank rel=noopener>Spring Boot 4.0 Migration Guide</a>
- GitHub Wikiï¼Œ<strong>å¿…è¯»</strong></li><li><a href=https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-7.0-Release-Notes target=_blank rel=noopener>Spring Framework 7.0 Release Notes</a></li><li><a href=https://spring.io/blog/2025/11/13/spring-framework-7-0-general-availability/ target=_blank rel=noopener>Spring Framework 7.0 General Availability</a></li></ul><h3 id=æŠ€æœ¯æ–‡ç« >æŠ€æœ¯æ–‡ç« <a href=#æŠ€æœ¯æ–‡ç«  class=anchor aria-hidden=true>#</a></h3><ul><li><a href=https://spring.io/blog/2025/10/28/modularizing-spring-boot/ target=_blank rel=noopener>Modularizing Spring Boot</a>
- Spring å®˜æ–¹å¯¹æ¨¡å—åŒ–æ”¹é€ çš„è¯¦ç»†è¯´æ˜</li><li><a href=https://loiane.com/2025/08/spring-boot-4-spring-framework-7-key-features/ target=_blank rel=noopener>Spring Boot 4 and Spring Framework 7: Key Features and Changes</a>
- Loiane Groner çš„è¯¦ç»†è§£è¯»</li><li><a href=https://www.baeldung.com/spring-boot-4-spring-framework-7 target=_blank rel=noopener>Spring Boot 4 & Spring Framework 7 â€“ What&rsquo;s New | Baeldung</a>
- Baeldung æƒå¨æ•™ç¨‹</li><li><a href=https://blog.jetbrains.com/idea/2025/11/spring-boot-4/ target=_blank rel=noopener>Spring Boot 4: Leaner, Safer Apps and a New Kotlin Baseline</a>
- JetBrains å®˜æ–¹å¯¹ Spring Boot 4 çš„åˆ†æ</li><li><a href=https://www.infoq.com/news/2025/11/spring-7-spring-boot-4/ target=_blank rel=noopener>Spring Framework 7 and Spring Boot 4 Deliver API Versioning, Resilience, and Null-Safe Annotations</a>
- InfoQ æ·±åº¦æŠ¥é“</li><li><a href=https://foojay.io/today/preparing-for-spring-framework-7-and-spring-boot-4/ target=_blank rel=noopener>Preparing for Spring Framework 7 and Spring Boot 4</a>
- Foojay.io å¯¹ Spring Framework 7 å’Œ Spring Boot 4 æ–°ç‰¹æ€§çš„å…¨é¢ä»‹ç»</li></ul><h3 id=è¿ç§»ç»éªŒ>è¿ç§»ç»éªŒ<a href=#è¿ç§»ç»éªŒ class=anchor aria-hidden=true>#</a></h3><ul><li><a href=https://www.moderne.ai/blog/spring-boot-4x-migration-guide target=_blank rel=noopener>Spring Boot 4 Migration Guide: Faster, Safer, at Scale</a>
- Moderne.ai çš„ä¼ä¸šçº§è¿ç§»æŒ‡å—</li><li><a href=https://medium.com/@kanishks772/the-spring-boot-4-migration-hack-every-developer-needs-to-know-in-2025-7c8ae3529cff target=_blank rel=noopener>The Spring Boot 4 Migration Hack Every Developer Needs to Know in 2025</a>
- å®æˆ˜æŠ€å·§åˆ†äº«</li><li><a href=https://medium.com/@javedmj786/migration-to-spring-boot-4-0-a-performance-enhancements-guide-aee2a90c303e target=_blank rel=noopener>Migration to Spring Boot 4.0: A Performance Enhancements Guide</a>
- æ€§èƒ½ä¼˜åŒ–ç»éªŒ</li><li><a href=https://medium.com/@vikrantdheer/migrating-to-spring-boot-3-7-subtle-pitfalls-and-how-to-fix-them-1ac457e6b098 target=_blank rel=noopener>Migrating to Spring Boot 3+: 7 Subtle Pitfalls and How to Fix Them</a>
- å¸¸è§é—®é¢˜è§£å†³</li><li><a href=https://www.xlabs.club/blog/migrating-java8-to-java25/ target=_blank rel=noopener>Java 25 å®Œæ•´å‡çº§æŒ‡å—ï¼šä» Java 8 åˆ° Java 25</a>
- Java ç‰ˆæœ¬å‡çº§å®Œæ•´æŒ‡å—ï¼ŒåŒ…å«æ–°ç‰¹æ€§ã€æ€§èƒ½ä¼˜åŒ–ã€è¿ç§»å®æˆ˜å’Œå·¥å…·æ¨è</li></ul><h3 id=è™šæ‹Ÿçº¿ç¨‹>è™šæ‹Ÿçº¿ç¨‹<a href=#è™šæ‹Ÿçº¿ç¨‹ class=anchor aria-hidden=true>#</a></h3><ul><li><a href=https://blog.fastthread.io/virtual-threads-performance-in-spring-boot/ target=_blank rel=noopener>Virtual Threads Performance in Spring Boot</a>
- Fast Thread çš„æ€§èƒ½åŸºå‡†æµ‹è¯•</li><li><a href=https://www.javacodegeeks.com/2025/04/spring-boot-performance-with-java-virtual-threads.html target=_blank rel=noopener>Spring Boot Performance with Java Virtual Threads</a>
- Java Code Geeks çš„æ€§èƒ½åˆ†æ</li><li><a href=https://www.baeldung.com/spring-6-virtual-threads target=_blank rel=noopener>Working with Virtual Threads in Spring | Baeldung</a>
- Baeldung è™šæ‹Ÿçº¿ç¨‹æ•™ç¨‹</li><li><a href=https://medium.com/@oleksandr.dendeberia/spring-boot-4-and-virtual-threads-a-practical-high-impact-upgrade-for-modern-java-development-10631f4f427b target=_blank rel=noopener>Spring Boot 4 and Virtual Threads: A Practical, High-Impact Upgrade</a>
- è™šæ‹Ÿçº¿ç¨‹å®æˆ˜</li></ul><h3 id=è¿ç§»å·¥å…·>è¿ç§»å·¥å…·<a href=#è¿ç§»å·¥å…· class=anchor aria-hidden=true>#</a></h3><ul><li><a href=https://docs.openrewrite.org/recipes/java/spring/boot4/upgradespringboot_4_0-community-edition target=_blank rel=noopener>OpenRewrite: Migrate to Spring Boot 4.0</a>
- OpenRewrite å®˜æ–¹æ–‡æ¡£</li><li><a href=https://github.com/spring-projects-experimental/spring-boot-migrator target=_blank rel=noopener>Spring Boot Migrator</a>
- Spring å®˜æ–¹è¿ç§»å·¥å…·</li><li><a href=https://windup.github.io/ target=_blank rel=noopener>Windup</a>
- Red Hat åº”ç”¨ç°ä»£åŒ–å·¥å…·</li><li><a href=https://github.com/adoptium/emt4j target=_blank rel=noopener>EMT4J</a>
- Eclipse Java ç‰ˆæœ¬è¿ç§»å·¥å…·</li><li><a href=https://www.moderne.ai/ target=_blank rel=noopener>Moderne.ai</a>
- ä¼ä¸šçº§ OpenRewrite æ‰˜ç®¡æœåŠ¡</li></ul><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"><div class=last-modified><a href=https://github.com/xlabs-club/xlabs-club.github.io/commit/b48ec7c0b653270e1cf8abd498af9d4c30397dc3><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Last updated on 2025å¹´12æœˆ20æ—¥</a></div><div class=edit-page><a href=https://github.com/xlabs-club/xlabs-club.github.io/blob/main/content//blog/migration-spring-boot-3-to-4.md><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>
Edit this page on GitHub</a></div></div><div class="page-nav d-flex flex-column flex-sm-row"><div class="card text-end w-100"><div class="card-body d-flex justify-content-end"><div class="d-flex flex-column"><div class=text-body-secondary>Next</div><a href=/blog/javax-jakarta-compatibility/ class="stretched-link text-reset text-decoration-none">Javax å’Œ Jakarta è¿‡æ¸¡æœŸå…¼å®¹æ–¹æ¡ˆ</a></div><div class="d-flex flex-column justify-content-center"><svg class="icon icon-tabler icon-tabler-arrow-right" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12h14"/><path d="M13 18l6-6"/><path d="M13 6l6 6"/></svg></div></div></div></div></main></div></div></div></div><footer class="footer text-muted"><div class=container-fluid><div class=row><div class="col-lg-8 text-center text-lg-start"><ul class=list-inline><li class=list-inline-item><a class=text-muted href=/>Powered by Hugo, and based on Doks</a></li></ul></div><div class="col-lg-8 text-center text-lg-end"><ul class=list-inline><li class=list-inline-item>Give Me a <a class=text-muted href=https://github.com/xlabs-club/>Star</a></li></ul></div></div></div></footer><script async src=/js/bootstrap.8b717d53dae071196d91d0d0c63650fe240e84ffe50a76fdb433a914d6b216ec.js integrity="sha256-i3F9U9rgcRltkdDQxjZQ/iQOhP/lCnb9tDOpFNayFuw="></script><script async src=/js/app.592ddd2791734c581ee9465f923ca99817c6bcb2a5c2725df8c34f9def04b128.js integrity="sha256-WS3dJ5FzTFge6UZfkjypmBfGvLKlwnJd+MNPne8EsSg="></script><script async src=/js/docsearch.4c43898496d40210bc7d52e319d675a83a35016293221b53c5c2e544c50ab234.js integrity="sha256-TEOJhJbUAhC8fVLjGdZ1qDo1AWKTIhtTxcLlRMUKsjQ="></script></body></html>