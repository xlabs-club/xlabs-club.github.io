<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>L10178 on XLabs</title><link>https://www.xlabs.club/contributors/l10178/</link><description>Recent content in L10178 on XLabs</description><generator>Hugo</generator><language>zh</language><copyright>Copyright (c) 2020-2025 XLabs Club</copyright><lastBuildDate>Fri, 19 Dec 2025 00:27:01 +0800</lastBuildDate><atom:link href="https://www.xlabs.club/contributors/l10178/index.xml" rel="self" type="application/rss+xml"/><item><title>Spring Boot 3 åˆ° 4 è¿ç§»å®Œå…¨æŒ‡å—ï¼šæ–°ç‰¹æ€§ã€åºŸå¼ƒåŠŸèƒ½ä¸å®æˆ˜è¸©å‘ç»éªŒ</title><link>https://www.xlabs.club/blog/migration-spring-boot-3-to-4/</link><pubDate>Tue, 25 Nov 2025 23:20:22 +0800</pubDate><guid>https://www.xlabs.club/blog/migration-spring-boot-3-to-4/</guid><description>&lt;p&gt;2025 å¹´ 11 æœˆï¼ŒSpring Boot 4.0 æ­£å¼å‘å¸ƒï¼Œè¿™æ¬¡å‡çº§è¢«ä¸šç•Œç§°ä¸º&lt;strong&gt;çˆ†ç‚¸æ€§å‡çº§&lt;/strong&gt;ã€‚åŒæ—¶å¯¹äºäº‘åŸç”Ÿåº”ç”¨è€Œè¨€ï¼Œè¿™æ˜¯ä¸€æ¬¡&lt;strong&gt;ä¸å¯é”™è¿‡çš„æ€§èƒ½ä¸æ•ˆç‡è·ƒè¿&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ğŸ³ &lt;strong&gt;å®¹å™¨åŒ–å‹å¥½&lt;/strong&gt;ï¼šæ¨¡å—åŒ–æ¶æ„å‡å°‘ 30-50% è¿è¡Œæ—¶å ç”¨ï¼Œé•œåƒæ›´å°ã€å¯åŠ¨æ›´å¿«&lt;/li&gt;
&lt;li&gt;âš¡ &lt;strong&gt;å¯åŠ¨é€Ÿåº¦æå‡ 30-50%&lt;/strong&gt;ï¼šå¤šçº¿ç¨‹å¼‚æ­¥å¯åŠ¨æœºåˆ¶ï¼Œå®¹å™¨å†·å¯åŠ¨æ—¶é—´æ˜¾è‘—ç¼©çŸ­ï¼Œæ›´é€‚åˆ Kubernetes å¿«é€Ÿæ‰©ç¼©å®¹&lt;/li&gt;
&lt;li&gt;ğŸš€ &lt;strong&gt;2-3 å€ååé‡æå‡&lt;/strong&gt;ï¼šè™šæ‹Ÿçº¿ç¨‹åŸç”Ÿæ”¯æŒï¼ŒI/O å¯†é›†å‹å¾®æœåŠ¡èµ„æºåˆ©ç”¨ç‡å¤§å¹…æå‡ï¼Œå•å®ä¾‹å¯æ‰¿è½½æ›´é«˜å¹¶å‘&lt;/li&gt;
&lt;li&gt;ğŸ¯ &lt;strong&gt;äº‘åŸç”Ÿç‰¹æ€§å¢å¼º&lt;/strong&gt;ï¼šå†…ç½®å¼¹æ€§åŠŸèƒ½ï¼ˆé‡è¯•ã€é™æµï¼‰ã€HTTP æ¥å£å®¢æˆ·ç«¯è‡ªåŠ¨é…ç½®ï¼Œç®€åŒ–å¾®æœåŠ¡é—´é€šä¿¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½†è¿™æ¬¡å‡çº§ä¹Ÿå¸¦æ¥äº† 36 ä¸ªåºŸå¼ƒ API ç§»é™¤ã€æ¨¡å—åŒ–æ¶æ„é‡æ„ã€Tomcat 11 å˜æ›´ç­‰æŒ‘æˆ˜ã€‚æœ¬æ–‡åŸºäº Spring Boot å®˜æ–¹æ–‡æ¡£å’Œç”Ÿäº§ç¯å¢ƒè¿ç§»ç»éªŒï¼Œä»åŸç†åˆ°è¸©å‘ï¼Œæä¾›&lt;strong&gt;å®Œæ•´ã€å®ç”¨çš„è¿ç§»æŒ‡å—&lt;/strong&gt;ï¼ŒåŠ©ä½ å¹³ç¨³å®Œæˆäº‘åŸç”Ÿåº”ç”¨çš„å‡çº§ã€‚&lt;/p&gt;
&lt;h2 id="spring-boot-40-æ ¸å¿ƒæ–°ç‰¹æ€§"&gt;Spring Boot 4.0 æ ¸å¿ƒæ–°ç‰¹æ€§&lt;/h2&gt;
&lt;p&gt;ä½œä¸º Spring Boot 3.x ä¹‹åçš„é¦–ä¸ªå¤§ç‰ˆæœ¬æ›´æ–°ï¼ŒSpring Boot 4.0 åŸºäº Spring Framework 7.0ã€Jakarta EE 11 å’Œ Java 17+ï¼ˆæ¨è Java 21 æˆ– 25ï¼‰ï¼Œå¸¦æ¥äº†æ¨¡å—åŒ–æ¶æ„é‡æ„ã€è™šæ‹Ÿçº¿ç¨‹åŸç”Ÿæ”¯æŒã€HTTP æœåŠ¡å®¢æˆ·ç«¯è‡ªåŠ¨é…ç½®ç­‰é‡å¤§å˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;Spring Boot 4.0 é…å¥—ä½¿ç”¨ &lt;strong&gt;Spring Cloud 2025.1.x&lt;/strong&gt;ã€‚è™½ç„¶ç‰ˆæœ¬å·çœ‹èµ·æ¥åªæ˜¯ä¸­å·ç‰ˆæœ¬å˜æ›´ï¼Œä½†å®é™…ä¸Šè¿™æ˜¯ä¸€æ¬¡&lt;strong&gt;å¤§ç‰ˆæœ¬å˜æ›´&lt;/strong&gt;ï¼ŒåŒ…å«äº†å¤§é‡ç ´åæ€§å˜æ›´å’Œé‡è¦æ›´æ–°ã€‚&lt;/p&gt;
&lt;h3 id="æ¨¡å—åŒ–æ¶æ„"&gt;æ¨¡å—åŒ–æ¶æ„&lt;/h3&gt;
&lt;p&gt;Spring Boot 4 å°† &lt;code&gt;spring-boot-autoconfigure&lt;/code&gt; æ‹†åˆ†ä¸ºå¤šä¸ªä¸“æ³¨çš„æ¨¡å—ï¼Œæ¯ä¸ªæŠ€æœ¯éƒ½æœ‰ç‹¬ç«‹çš„ starter å’Œå¯¹åº”çš„æµ‹è¯• starterã€‚&lt;/p&gt;</description></item><item><title>Javax å’Œ Jakarta è¿‡æ¸¡æœŸå…¼å®¹æ–¹æ¡ˆ</title><link>https://www.xlabs.club/blog/javax-jakarta-compatibility/</link><pubDate>Sun, 14 Sep 2025 14:33:23 +0800</pubDate><guid>https://www.xlabs.club/blog/javax-jakarta-compatibility/</guid><description>&lt;h2 id="ä»€ä¹ˆæ˜¯-jakarta-eeä¸ºä»€ä¹ˆè¦åˆ‡æ¢"&gt;ä»€ä¹ˆæ˜¯ Jakarta EEï¼Œä¸ºä»€ä¹ˆè¦åˆ‡æ¢&lt;/h2&gt;
&lt;p&gt;Jakarta EE å°±æ˜¯ Java EE çš„æ–°åè¯ã€‚è¿™é‡Œçš„ EE å…¨ç§°æ˜¯ Enterprise Editionï¼Œå®ƒæ˜¯ä¸“é—¨ä¸ºä¼ä¸šçº§ Java åº”ç”¨å®šä¹‰çš„ä¸€å¥—è§„èŒƒï¼Œä¸ Java SE (Java Platform, Standard Edition) ç›¸å¯¹åº”ã€‚&lt;/p&gt;
&lt;p&gt;Java EE æ˜¯ä» Java 1.2 ç‰ˆæœ¬å¼€å§‹æ¨å‡ºçš„ Java ä¼ä¸šçº§å¼€å‘å¹³å°ï¼Œæœ€åˆçš„åç§°æ˜¯ J2EE (Java 2 Platform, Enterprise Edition)ã€‚éšç€ Java çš„å‘å±•ï¼Œå®ƒçš„åç§°äº Java 1.5 ç‰ˆæœ¬æ—¶æ›´æ”¹ä¸º Java EE (Java Platform, Enterprise Edition)ã€‚2009 å¹´ Oracle æ”¶è´­äº† Sunï¼ŒJava EE å¼€å§‹ç”± Oracle é€šè¿‡ JCP (Java Community Process) å¼€å‘å’Œç»´æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;ç›´åˆ° 2017 å¹´ï¼ŒOracle å°† Java EE æäº¤ç»™äº† Eclipse åŸºé‡‘ä¼šï¼Œå¹¶å‘½åä¸º Eclipse Enterprise for Javaã€‚ç„¶è€Œï¼Œ&lt;strong&gt;ç”±äº&amp;quot;Java&amp;quot;è¿™ä¸ªåå­—çš„å•†æ ‡å½’ Oracle æ‰€æœ‰ï¼ŒEclipse åŸºé‡‘ä¼šæ— æ³•ç»§ç»­ä½¿ç”¨ &lt;code&gt;javax.*&lt;/code&gt; å’Œ &lt;code&gt;java.*&lt;/code&gt;ï¼Œå› æ­¤ï¼Œé¡¹ç›®åç§°æ”¹ä¸º Jakarta EE&lt;/strong&gt;ã€‚&lt;/p&gt;</description></item><item><title>CI: Maven å¦‚ä½•åœ¨ç¼–è¯‘æ—¶ç¦æ­¢è°ƒç”¨æŸäº›ç‰¹å®š API</title><link>https://www.xlabs.club/blog/ci-maven-forbidden-api/</link><pubDate>Tue, 09 Sep 2025 22:18:59 +0800</pubDate><guid>https://www.xlabs.club/blog/ci-maven-forbidden-api/</guid><description>&lt;p&gt;åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ç±»ä¼¼å¦‚ä¸‹éœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¡¹ç›®ç»„æä¾›äº† SDKï¼ŒæŸä¸ª API å·²ç»è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼Œä½†æ˜¯å¤§å®¶è¿Ÿè¿Ÿä¸å‡çº§ï¼Œé¡¹ç›®ç»„è¿˜éœ€è¦èŠ±è´¹æ—¶é—´ç»´æŠ¤å·²ç»åºŸå¼ƒçš„ APIã€‚&lt;/li&gt;
&lt;li&gt;æœ‰äº›é¡¹ç›®åœ¨ä½¿ç”¨ JDK å·²ç»åºŸå¼ƒçš„ APIï¼Œè¿™äº›åºŸå¼ƒ API åœ¨æ›´é«˜ç‰ˆæœ¬ JDK ä¸­å·²ç»åˆ é™¤ï¼Œå¯¼è‡´æ¨åŠ¨å‡çº§ JDK æ¯”è¾ƒå›°éš¾ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰äº›é¡¹ç›®ä¼šè·¨ç‰ˆæœ¬æ··åˆç¼–è¯‘ï¼Œæ¯”å¦‚ç”¨ Java 8 ç¼–è¯‘è¿è¡Œåœ¨ Java 21 ä¸Šï¼Œå¸¸è§çš„é”™è¯¯æ¯”å¦‚ &lt;code&gt;javafx.util&lt;/code&gt; åœ¨ Java 21 é»˜è®¤å·²ç»å»æ‰äº†ï¼Œå°±ä¼šå‡ºç°ç¼–è¯‘æˆåŠŸå´è¿è¡Œæ—¶å¤±è´¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬æƒ³æä¾›ä¸€ç§æ–¹æ¡ˆï¼Œèƒ½ä¸èƒ½åœ¨ç¼–è¯‘æœŸå°±å¼ºåˆ¶ç¦ç”¨æŸäº› APIï¼Œä¸»åŠ¨é˜»æ­¢è®©ç¼–è¯‘ä¸é€šè¿‡ï¼Œæå‰æŠ¥é”™åŠæ—©å‘ç°åŠæ—©å¤„ç†ã€‚&lt;/p&gt;
&lt;h2 id="å®ç°æ–¹æ¡ˆ"&gt;å®ç°æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;å½“å‰æˆ‘ä»¬ä½¿ç”¨ maven &lt;a href="https://github.com/policeman-tools/forbidden-apis" target="_blank" rel="noopener"&gt;forbiddenapis&lt;/a&gt;
 æ’ä»¶ï¼Œç»“åˆ CI æµç¨‹æ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œæ•ˆæœï¼Œå¦‚æœæœ‰ä½¿ç”¨ç¦ç”¨çš„ APIï¼Œèƒ½çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹é”™è¯¯æç¤ºï¼Œç¼–è¯‘å¤±è´¥å¹¶ç»™å‡ºåŸå› ã€‚&lt;/p&gt;



&lt;div class="expressive-code"&gt;
 &lt;figure class="frame not-content"&gt;
 &lt;figcaption class="header"&gt;
 &lt;span class="title"&gt;&lt;/span&gt;
 &lt;/figcaption&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-console" data-lang="console"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;12:40:30.647 [INFO]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;12:40:30.648 [INFO] --- forbiddenapis:3.9:check (check-forbidden-apis) @ app-biz ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;12:40:30.657 [INFO] Scanning for classes to check...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;12:40:30.661 [INFO] Reading bundled API signatures: jdk-deprecated-1.8
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;12:40:30.694 [INFO] Reading API signatures: /usr/share/maven/conf/forbidden-apis.txt
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;12:40:30.694 [INFO] Loading classes to check...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;12:40:30.695 [INFO] Scanning classes for violations...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;12:40:30.849 [ERROR] Forbidden class/interface use: javafx.util.Pair [ç¦æ­¢ä½¿ç”¨ JavaFX ç›¸å…³ç±»]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;12:40:30.850 [ERROR] in com.tester.HomeController (HomeController.java:11)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;12:40:30.865 [ERROR] Scanned 13 class file(s) for forbidden API invocations (in 0.21s), 1 error(s).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;12:40:30.872 [INFO] ------------------------------------------------------------------------
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;&lt;/span&gt;&lt;span class="go"&gt;24784 [INFO] --- forbiddenapis:3.9:check (check-forbidden-apis) @ app-api ---
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;24812 [INFO] Scanning for classes to check...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;24884 [INFO] Reading bundled API signatures: jdk-deprecated-1.8
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;25016 [INFO] Reading API signatures: /usr/share/maven/conf/forbidden-apis.txt
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;25017 [INFO] Loading classes to check...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;25106 [INFO] Scanning classes for violations...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;25984 [ERROR] Forbidden method invocation: java.net.URLEncoder#encode(java.lang.String) [Deprecated in Java 1.8]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;25984 [ERROR] in com.tester.FormBody$FormBodyBuilder (FormBody.java:60)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;26110 [ERROR] Scanned 660 class file(s) for forbidden API invocations (in 1.31s), 2 error(s).
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="go"&gt;26113 [INFO]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
 &lt;/figure&gt;
&lt;/div&gt;
&lt;h3 id="maven-æ ¸å¿ƒé…ç½®"&gt;Maven æ ¸å¿ƒé…ç½®&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆï¼Œåœ¨çˆ¶ pom é‡Œå¢åŠ äº†ä»¥ä¸‹ç‰‡æ®µï¼Œæ­¤å†…å®¹ä¸»è¦å«ä¹‰ï¼š&lt;/p&gt;</description></item><item><title>Spring Security é›†æˆ Keycloak å®ç°ç”¨æˆ· RBACã€ABAC æˆæƒ</title><link>https://www.xlabs.club/blog/spring-security-with-keycloak-oauth2/</link><pubDate>Sun, 24 Nov 2024 16:44:35 +0800</pubDate><guid>https://www.xlabs.club/blog/spring-security-with-keycloak-oauth2/</guid><description>&lt;p&gt;ä½¿ç”¨ Spring Security Resource Server å’Œ Keycloakï¼Œå®ç°ç”¨æˆ· RBACã€ABAC æˆæƒï¼Œä¸»è¦ä»‹ç»ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Spring Security Resource Server å¦‚ä½•ä¸æ ‡å‡† OAuth2 åè®®é›†æˆã€‚&lt;/li&gt;
&lt;li&gt;Spring Security Resource Server å¦‚ä½•ä¸ Keycloak Authorization Server é›†æˆã€‚&lt;/li&gt;
&lt;li&gt;å¦‚ä½•æ ¡éªŒå’Œè§£æ JWT Tokenï¼Œè·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚ä½•ä½¿ç”¨ keycloak admin client è·å–æ›´å¤šä¿¡æ¯ï¼Œæ‰§è¡Œæ›´é«˜çº§åŠ¨ä½œã€‚&lt;/li&gt;
&lt;li&gt;Spring Security JWT Token æ¨¡å¼ä¸‹å¦‚ä½•æ–¹ä¾¿æœ¬åœ° Debugï¼Œå¦‚ä½•é€šè¿‡ keycloak admin client æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨å¼€å§‹ä¹‹å‰æˆ‘ä»¬å…ˆè§£é‡Šå‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Keycloak å®˜æ–¹çš„ Spring Boot Starter åç»­å°†é€æ¸åœæ­¢ç»´æŠ¤ï¼Œæ‰€ä»¥æˆ‘ä»¬åªç”¨ keycloak çš„ clientï¼Œè‡ªå·±å®ç°ä¸€éƒ¨åˆ†ä»£ç ï¼Œæœ‰ client sdk å®ç°èµ·æ¥å¾ˆå®¹æ˜“ã€‚&lt;/li&gt;
&lt;li&gt;Spring Security &lt;a href="https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/index.html" target="_blank" rel="noopener"&gt;OAuth 2.0 Resource Server&lt;/a&gt;
 ä¹Ÿæœ‰å¤šç§é›†æˆæ–¹å¼ï¼Œè¿™é‡Œæˆ‘ä»¬åªå®ç° &lt;code&gt;JWT&lt;/code&gt; è¿™ä¸€ç§ï¼Œå¹¶ä¸”æ˜¯ sessionless çš„ï¼Œä¹Ÿå°±æ˜¯åªè´Ÿè´£æˆæƒä¸è´Ÿè´£ &lt;code&gt;ç™»å½•è®¤è¯&lt;/code&gt;ï¼Œ ç™»å½•ç”±ç½‘å…³é€šè¿‡ oauth2-proxy å®ç°ï¼Œè¯¦æƒ…å¯å‚è€ƒå¦ä¸€ç¯‡åšå®¢ä»‹ç» &lt;a href="https://www.xlabs.club/blog/traefik-oauth2-proxy-keycloak/" target="_blank" rel="noopener"&gt;traefik-oauth2-proxy-keycloak&lt;/a&gt;
ã€‚&lt;/li&gt;
&lt;/ol&gt;</description></item><item><title>Backstage é›†æˆ oauth2-proxy å’Œ Keycloakï¼Œå®ç°ç”¨æˆ·ç®¡ç†ã€ç™»å½•è®¤è¯ä»¥åŠ RBACã€ABAC æˆæƒ</title><link>https://www.xlabs.club/blog/backstage-keycloak-oauth2-proxy/</link><pubDate>Sat, 16 Nov 2024 16:55:26 +0800</pubDate><guid>https://www.xlabs.club/blog/backstage-keycloak-oauth2-proxy/</guid><description>&lt;p&gt;åŸºäº K8S éƒ¨ç½² Backstageï¼Œé›†æˆ oauth2-proxy å’Œ Keycloakï¼Œå®ç°ç”¨æˆ·ç®¡ç†ã€è®¤è¯å’Œæˆæƒï¼Œé…ç½®è¯¦è§£å’ŒåŸç†ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ é‡åˆ°ä»¥ä¸‹é—®é¢˜æˆ–è¯‰æ±‚ï¼Œå¯ä»¥å‚è€ƒæ­¤æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://backstage.io/" target="_blank" rel="noopener"&gt;Backstage&lt;/a&gt;
 æ¥å…¥ oauth2-proxyï¼Œç™»å½•æˆ–è®¤è¯å¤±è´¥ã€‚&lt;/li&gt;
&lt;li&gt;Backstage å®ç° RBACã€ABAC æˆæƒç®¡ç†ï¼Œä»¥åŠå¦‚ä½•å®ç°è‡ªå®šä¹‰æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href="https://oauth2-proxy.github.io/oauth2-proxy/" target="_blank" rel="noopener"&gt;oauth2-proxy&lt;/a&gt;
 å¯¹æ¥ keycloakï¼Œå‚æ•°ä¸ç†è§£æˆ–è€…é…ç½®ä¸€ç›´é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸ªç‚¹ï¼ŒBackstage å®˜æ–¹å¼€æºæœ‰å¼€ç®±å³ç”¨çš„å®¹å™¨é•œåƒï¼Œä¹Ÿæœ‰ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ï¼Œç„¶è€ŒåŒºåˆ«äºå…¶ä»–æ’ä»¶ç±»åº”ç”¨ï¼ŒBackstage æœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Backstage æ’ä»¶åˆ†ä¸º frontend å’Œ backendï¼Œä¸€ä¸ªå®Œæ•´çš„æ’ä»¶å¯èƒ½åŒ…å«ä¸¤ç§ï¼Œä¹Ÿå¯èƒ½åªåŒ…å«å…¶ä¸­ä¸€ç§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¼€æºå‘å¸ƒçš„å¼€ç®±å³ç”¨çš„å®¹å™¨é•œåƒï¼ŒåªåŒ…å«åŸºç¡€æ’ä»¶ï¼Œä¸€èˆ¬åªç”¨æ¥ä½œä¸ºåˆæ¬¡å­¦ä¹ ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœæƒ³ä½¿ç”¨å…¶ä»–æ’ä»¶ï¼Œéœ€è¦åšä¸€äº›ç¼–ç å·¥ä½œï¼Œä¸€èˆ¬æ­¥éª¤å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;npx @backstage/create-app@latest&lt;/code&gt; åˆ›å»ºä¸€ä¸ªåŸºç¡€é¡¹ç›®ã€‚&lt;/li&gt;
&lt;li&gt;æŒ‰æ’ä»¶è¦æ±‚å®‰è£…æ’ä»¶ï¼Œé…ç½®æ’ä»¶èœå•ã€UI æ•ˆæœã€æƒé™ã€è®¤è¯ä¿¡æ¯ç­‰ï¼Œæ¯ä¸ªæ’ä»¶è¦æ±‚ä¸åŒã€‚&lt;/li&gt;
&lt;li&gt;æŒ‰éœ€å¼€å‘è‡ªå·±çš„æ’ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;ç¼–è¯‘æˆæ–°å®¹å™¨é•œåƒï¼ŒæŸäº›æ’ä»¶å¯èƒ½è¿˜éœ€è¦åœ¨å®¹å™¨ä¸­é¢å¤–å®‰è£…ä¸€äº›ä¾èµ–åŒ…ï¼Œéƒ¨ç½²æ—¶ä½¿ç”¨æ­¤å®¹å™¨é•œåƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŸºæœ¬ä¸Šæ¯ä¸ªæ’ä»¶éƒ½æœ‰è‡ªå·±çš„é…ç½®è¦æ±‚ï¼Œéœ€æ ¹æ®æ’ä»¶æ–‡æ¡£é…ç½® app-config.yamlã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯ä»¥æŠŠ Backstage ç±»æ¯”äº Spring Bootï¼Œæä¾›äº† starterã€frameworkã€pluginsï¼Œå¦‚æœæƒ³çœŸå®ä½¿ç”¨ï¼Œéœ€è¦è‡ªå·±å¼•å…¥ä¾èµ–ï¼Œç¼–è¯‘æˆè‡ªå·±çš„é•œåƒå‘å¸ƒéƒ¨ç½²ï¼Œæ¬¢è¿ star æˆ‘ä»¬åŸºäº Backstage å®šåˆ¶çš„å¼€æºé¡¹ç›® &lt;a href="https://github.com/xlabs-club/xlabs-developer-platform" target="_blank" rel="noopener"&gt;xlabs-developer-platform&lt;/a&gt;
ã€‚&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒç»„ä»¶ä»‹ç»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·åŒæ­¥ä½¿ç”¨ Red Hat è´¡çŒ®çš„ç¤¾åŒºå¼€æºæ’ä»¶ &lt;a href="https://github.com/backstage/community-plugins/tree/main/workspaces/keycloak/plugins/catalog-backend-module-keycloak" target="_blank" rel="noopener"&gt;@backstage-community/plugin-catalog-backend-module-keycloak&lt;/a&gt;
ï¼Œå°† keycloak ç”¨æˆ·åŒæ­¥åˆ° Backstage æ•°æ®åº“ï¼Œåé¢æˆ‘ä»¬ä¼šæåˆ°ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸€æ­¥ã€‚&lt;/li&gt;
&lt;li&gt;è®¤è¯ä½¿ç”¨å®˜æ–¹å†…ç½®çš„ &lt;a href="https://backstage.io/docs/auth/oauth2-proxy/provider" target="_blank" rel="noopener"&gt;OAuth 2 Proxy Provider&lt;/a&gt;
.&lt;/li&gt;
&lt;li&gt;æˆæƒï¼Œæƒé™ç®¡ç† Permissionsï¼Œæ”¯æŒ RBACã€ABACï¼Œ ä½¿ç”¨ Red Hat è´¡çŒ®çš„ç¤¾åŒºå¼€æºæ’ä»¶ &lt;a href="https://github.com/backstage/community-plugins/tree/main/workspaces/rbac/plugins" target="_blank" rel="noopener"&gt;@backstage-community/plugin-rbac&lt;/a&gt;
ï¼Œè™½ç„¶æ’ä»¶åå­—å« RBACï¼Œä½†æ˜¯å®é™…ä¸Šæ”¯æŒ ABACã€‚æ³¨æ„ Spotify ä¹Ÿæœ‰ &lt;a href="https://backstage.spotify.com/marketplace/spotify/plugin/rbac/" target="_blank" rel="noopener"&gt;RBAC æ’ä»¶&lt;/a&gt;
 éœ€è¦è´­ä¹° License æ‰èƒ½ç”¨ï¼Œä¸¤ä¸ªæ’ä»¶åˆ«å¼„æ··äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸Šè®¤è¯å’Œæˆæƒæ˜¯ç‹¬ç«‹çš„ï¼Œå¦‚æœä½ åªéœ€è¦è®¤è¯ï¼Œä¸éœ€è¦æˆæƒï¼Œé‚£å¯ä»¥ä¸éœ€è¦ RBAC æ’ä»¶ã€‚&lt;/p&gt;</description></item><item><title>ä½¿ç”¨ oauth2-proxy ä¸ºä»»æ„ç¨‹åºå¢åŠ è®¤è¯é‰´æƒï¼Œç»“åˆ K8Sã€traefikã€keycloak éƒ¨ç½²é…ç½®è¯¦è§£</title><link>https://www.xlabs.club/blog/traefik-oauth2-proxy-keycloak/</link><pubDate>Thu, 10 Oct 2024 23:30:40 +0800</pubDate><guid>https://www.xlabs.club/blog/traefik-oauth2-proxy-keycloak/</guid><description>&lt;p&gt;ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­æ°¸è¿œé¿å…ä¸äº†è®¤è¯é‰´æƒï¼Œè€Œæˆ‘ä»¬å¼€å‘çš„æŸäº›åº”ç”¨ï¼Œå¹¶ä¸éœ€è¦å¤ªå¤æ‚çš„é‰´æƒï¼Œæ¯”å¦‚å¯èƒ½åªè¦æ±‚å¿…é¡»æ˜¯ç™»å½•ç”¨æˆ·ï¼Œæˆ–è€…åªéœ€è¦æ ¹æ®è§’è‰²è¿›è¡Œ RBAC é‰´æƒã€‚æœ‰æ²¡æœ‰æ–¹æ³•ç®€åŒ–æ­¤æµç¨‹ï¼Œè®©åº”ç”¨å¼€å‘è€…åªå…³æ³¨ä¸šåŠ¡å¼€å‘ï¼Œè¿™å°±æ˜¯æœ¬æ–‡æ¡£è¦è§£å†³çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æœ‰ç±»ä¼¼ä»¥ä¸‹çš„éœ€æ±‚ï¼Œéƒ½å¯ä»¥å‚è€ƒæ­¤æ–‡æ¡£ï¼ŒåŸç†æ˜¯ä¸€æ ·çš„ï¼Œç»„ä»¶ä¹Ÿå¯å¤ç”¨ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸ºåŸæœ¬æ²¡æœ‰ç™»å½•éªŒè¯çš„æœåŠ¡æä¾›è®¤è¯æœåŠ¡ï¼Œæ¯”å¦‚æŸäº›å¼€æºç»„ä»¶ä¸æ”¯æŒè®¤è¯ä½†æ˜¯åˆå› æºå¸¦ä¸€äº›å±é™©æ•°æ®è€Œä¸æƒ³å…¬å¼€è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;å®ç°ç»Ÿä¸€çš„å•ç‚¹ç™»å½• SSOã€å¹¶æ”¯æŒç®€å•çš„ RBACã€UBAC é‰´æƒã€‚&lt;/li&gt;
&lt;li&gt;ä¸º Kubernetus Traefik Nginx Ingress æä¾›ç»Ÿä¸€çš„è®¤è¯å…¥å£ï¼Œä¸€é”®å®ç°æ‰€æœ‰å…¥å£å¿…é¡»ç™»å½•æ‰å¯è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;é…ç½® Traefik ä½¿ç”¨ Forward Authï¼ŒNginx ä½¿ç”¨ auth_request å®ç°è®¤è¯ï¼Œä¹Ÿå¯ä»¥ä¸€å¹¶å‚è€ƒã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ K8S æˆ–åº”ç”¨ç½‘å…³ï¼ŒåŸºäºç”¨æˆ·ã€è§’è‰²ç­‰ä¸åŒå±æ€§ï¼Œè·¯ç”±åˆ°ä¸åŒæœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ å‡‘å·§ä¹Ÿåœ¨ç”¨ &lt;a href="https://backstage.io/" target="_blank" rel="noopener"&gt;Backstage&lt;/a&gt;
ï¼Œè¯·å‚è€ƒ &lt;a href="https://www.xlabs.club/blog/backstage-oauth2-proxy-keycloak/" target="_blank" rel="noopener"&gt;å¦ä¸€ç¯‡åšå®¢&lt;/a&gt;
ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å†™åœ¨å‰é¢ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æœ¬æ–‡æ¡£é‡Œçš„ç¤ºä¾‹ä»£ç æ˜¯ä»¥ k3s ä¸ºåŸºç¡€ï¼Œä½¿ç”¨ traefik ä½œä¸º ingress controllerï¼Œæ•´ä½“å®Œå–„ä½†ç•¥æ˜¾å¤æ‚ï¼Œå¦‚æœæ²¡æœ‰ K3S/K8Sï¼Œä»¥å…¶ä»–æ–¹å¼éƒ¨ç½²ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥çš„ï¼ŒåŸºæœ¬åŸç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºæŸäº›åœºæ™¯ä¸‹å¯é€‰çš„é…ç½®ï¼Œä¼šå•ç‹¬è¯´æ˜ï¼Œè¯·æ³¨æ„åˆ†åˆ«ã€‚&lt;/li&gt;
&lt;li&gt;è¿™é‡Œæåˆ°çš„æ¯ä¸ªç»„ä»¶éƒ½æ˜¯å¯æ›¿æ¢çš„ï¼Œæ¯”å¦‚ nginx ä»£æ›¿ traefikï¼ŒPomerium ä»£æ›¿ oauth2-proxyï¼Œå¯æ ¹æ®çˆ±å¥½é€‰æ‹©ï¼Œåé¢ä¹Ÿä¼šé€‚å½“è¡¥å……å‡ ç§ä¸åŒæ–¹å¼çš„å¯¹æ¯”å’Œéƒ¨ç½²å·®å¼‚ï¼Œæ›´è¯¦ç»†å†…å®¹è¯·å‚è€ƒæœ¬ç«™å¦å¤–ä¸€ç¯‡æ–‡æ¡£ &lt;a href="https://www.xlabs.club/docs/platform/iam/" target="_blank" rel="noopener"&gt;ç»Ÿä¸€èº«ä»½è®¤è¯&lt;/a&gt;
ã€‚&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹ä¸­çš„ä»£ç éƒ½æ˜¯ä»çœŸå®ç¯å¢ƒæ‹·è´ç»è¿‡æ£€éªŒçš„ï¼Œä½†ä¸ºäº†ä¾¿äºç†è§£å¯èƒ½è£å‰ªæ— å…³ç´§è¦çš„å†…å®¹ï¼Œå®Œæ•´çš„å®‰è£…éƒ¨ç½²æºç è¯·å‚è€ƒæˆ‘ä»¬çš„éƒ¨ç½²è„šæœ¬ &lt;a href="https://github.com/xlabs-club/xlabs-ops" target="_blank" rel="noopener"&gt;xlabs-club/xlabs-ops&lt;/a&gt;
ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦æ‡‚ä¸€äº› K8Sã€OIDC åŸºç¡€çŸ¥è¯†ï¼Œæ­¤å¤„åªæä¾›é“¾æ¥ä¸å±•å¼€è¯´æ˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="ç»„ä»¶ä»‹ç»"&gt;ç»„ä»¶ä»‹ç»&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Keycloak&lt;/p&gt;
&lt;p&gt;Keycloak æ˜¯ä¸€ä¸ªå¼€æºçš„èº«ä»½å’Œè®¿é—®ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒ OAuth 2.0ã€OpenID Connectã€SAML ç­‰åè®®ã€‚å®ƒæä¾›ç”¨æˆ·ç®¡ç†ã€è§’è‰²ç®¡ç†ã€å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰ã€èº«ä»½æä¾›æœåŠ¡ç­‰åŠŸèƒ½ï¼Œåœ¨æœ¬ç¤ºä¾‹ä¸­æ‹…ä»» Auth Provider è§’è‰²ã€‚å…³äº Keycloak çš„ä¸­æ–‡ä»‹ç»ï¼Œå¯å‚è€ƒæœ¬ç«™å•ç‹¬çš„åšå®¢ &lt;a href="https://idaas.xlabs.club/" target="_blank" rel="noopener"&gt;IDaaS Book&lt;/a&gt;
ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://oauth2-proxy.github.io/oauth2-proxy/" target="_blank" rel="noopener"&gt;oauth2-proxy&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;é¡¾åæ€ä¹‰å®ƒæ˜¯ä¸€ä¸ªå…³äº oauth åå‘ä»£ç†ï¼Œä¸»è¦ç”¨æ¥ä¸ºåç«¯æœåŠ¡å¢åŠ èº«ä»½éªŒè¯å±‚ã€‚å®ƒæ”¯æŒå¤šç§ OAuth 2.0 æä¾›è€…ï¼ˆå¦‚ Googleã€OIDCã€Keycloak ç­‰ï¼‰ï¼Œå¯ä»¥ä¿æŠ¤æœªæä¾›èº«ä»½éªŒè¯çš„åº”ç”¨ã€‚oauth2-proxy åœ¨è¯·æ±‚è¿›å…¥åç«¯æœåŠ¡ä¹‹å‰ï¼Œä¼šå…ˆè¿›è¡Œ OAuth 2.0 ç™»å½•è®¤è¯ï¼Œç¡®ä¿è¯·æ±‚è€…å…·æœ‰è®¿é—®æƒé™ã€‚å®ƒæ‰¿æ‹…äº†ç™»å½•çš„åˆæ³•æ€§æ ¡éªŒã€é‡å®šå‘ã€ç™»å½•æˆåŠŸåçš„ cookieã€response è®¾ç½®ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;</description></item><item><title>Koupleless è¯•ç”¨æŠ¥å‘Šæ€»ç»“ï¼Œè¸©å‘è®°å½•åˆ†äº«</title><link>https://www.xlabs.club/blog/koupleless-first-boot/</link><pubDate>Mon, 27 May 2024 14:20:24 +0800</pubDate><guid>https://www.xlabs.club/blog/koupleless-first-boot/</guid><description>&lt;p&gt;æˆ‘ä»¬å…¬å¸çš„ä¸»è¦åº”ç”¨éƒ½æ˜¯ä»¥ Java ä½œä¸ºå¼€å‘è¯­è¨€ï¼Œè¿™å‡ å¹´éšç€ä¸šåŠ¡çš„é«˜é€Ÿå¢é•¿ï¼Œåº”ç”¨æ•°ç›®è¶Šæ¥è¶Šå¤šï¼ŒCPU å†…å­˜èµ„æºå ç”¨è¶Šæ¥è¶Šå¤šï¼Œé¡¹ç›®ç»„ä¹‹é—´å¼€å‘åˆä½œæ•ˆç‡ä¹Ÿè¶Šæ¥è¶Šä½ã€‚&lt;/p&gt;
&lt;p&gt;é¡ºåº”è¿™ä¸ªæ—¶ä»£é™æœ¬å¢æ•ˆçš„ç›®çš„ï¼Œæˆ‘ä»¬å¸Œæœ›å¯»æ‰¾ä¸€ä¸ªèƒ½è§£å†³å½“å‰å‡ ä¸ªæ ¸å¿ƒé—®é¢˜çš„æ¡†æ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¨¡å—åŒ–å¼€å‘ã€éƒ¨ç½²ã€èµ„æºå…±äº«çš„èƒ½åŠ›ï¼Œå‡å°‘ Cacheã€Class ç­‰èµ„æºå ç”¨ï¼Œæœ‰æ•ˆé™ä½å†…å­˜å ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;æ›´å¿«æ›´è½»çš„ä¾èµ–ï¼Œåº”ç”¨èƒ½å¤Ÿæ›´å¿«çš„å¯åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;èƒ½å¤Ÿè®©å„ä¸ªé¡¹ç›®ç»„ä¸æ”¹ä»£ç æˆ–å°‘æ”¹ä»£ç å³å¯æ¥å…¥ï¼Œæ§åˆ¶å¼€å‘è¿ç§»çš„æˆæœ¬ï¼Œæ¯•ç«Ÿå¾ˆå¤šå†å²è€åº”ç”¨ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“è¿ç§»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŸºäºä»¥ä¸ŠèƒŒæ™¯ï¼Œæˆ‘ä»¬åœ¨ 2022 å¹´åŸºäº SOFAArk è¿è¡Œäº†ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ•ˆæœä¸å¤ªç†æƒ³æš‚æ—¶æç½®ã€‚ä»Šå¹´ Koupleless é‡æ–°å¼€æºååšäº†ä¸€äº›å¢å¼ºå’Œå˜æ›´ï¼Œå¼€æºç¤¾åŒºæ´»è·ƒåº¦æœ‰æ‰€æå‡ï¼Œçœ‹å®£ä¼ æ•ˆæœå¾ˆå¥½ï¼Œæˆ‘ä»¬å†³å®šé‡æ–°è¯„ä¼°æ˜¯å¦å¯åœ¨å…¬å¸å†…æ¨å¹¿ã€‚&lt;/p&gt;
&lt;h2 id="ä»€ä¹ˆæ˜¯-koupleless"&gt;ä»€ä¹ˆæ˜¯ Koupleless&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://koupleless.io/home/" target="_blank" rel="noopener"&gt;Koupleless&lt;/a&gt;
 æ˜¯ä¸€ç§æ¨¡å—åŒ– Serverless æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œå®ƒèƒ½è®©æ™®é€šåº”ç”¨ä½æˆæœ¬æ¼”è¿›ä¸º Serverless ç ”å‘æ¨¡å¼ï¼Œè®©ä»£ç ä¸èµ„æºè§£è€¦ï¼Œè½»æ¾ç‹¬ç«‹ç»´æŠ¤ï¼Œ ä¸æ­¤åŒæ—¶æ”¯æŒç§’çº§æ„å»ºéƒ¨ç½²ã€åˆå¹¶éƒ¨ç½²ã€åŠ¨æ€ä¼¸ç¼©ç­‰èƒ½åŠ›ä¸ºç”¨æˆ·æä¾›æè‡´çš„ç ”å‘è¿ç»´ä½“éªŒï¼Œæœ€ç»ˆå¸®åŠ©ä¼ä¸šå®ç°é™æœ¬å¢æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;Koupleless æ˜¯èš‚èšé›†å›¢å†…éƒ¨ç»è¿‡ 5 å¹´æ‰“ç£¨æˆç†Ÿçš„ç ”å‘æ¡†æ¶å’Œè¿ç»´è°ƒåº¦å¹³å°èƒ½åŠ›ï¼Œç›¸è¾ƒäºä¼ ç»Ÿé•œåƒåŒ–çš„åº”ç”¨æ¨¡å¼ç ”å‘ã€è¿ç»´ã€è¿è¡Œé˜¶æ®µéƒ½æœ‰ 10 å€å·¦å³çš„æå‡ï¼Œæ€»ç»“èµ·æ¥ 5 å¤§ç‰¹ç‚¹ï¼šå¿«ã€çœã€çµæ´»éƒ¨ç½²ã€å¹³æ»‘æ¼”è¿›ã€ç”Ÿäº§è§„æ¨¡åŒ–éªŒè¯ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šéƒ½æ˜¯å®˜ç½‘çš„å®£ä¼ ï¼Œæ›´å¤šä»‹ç»è¯·é“¾æ¥åˆ°å®˜ç½‘æŸ¥çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ•´ä¸ª Koupleless å¹³å°é‡Œï¼Œéœ€è¦å››ä¸ªç»„ä»¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç ”å‘å·¥å…· Arkctl, æä¾›æ¨¡å—åˆ›å»ºã€å¿«é€Ÿè”è°ƒæµ‹è¯•ç­‰èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;è¿è¡Œç»„ä»¶ SOFAArk, Arkletï¼Œæä¾›æ¨¡å—è¿ç»´ã€æ¨¡å—ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå¤šæ¨¡å—è¿è¡Œç¯å¢ƒã€‚ï¼ˆè¿™ç®—ä¸¤ä¸ªç»„ä»¶ï¼Ÿï¼‰&lt;/li&gt;
&lt;li&gt;æ§åˆ¶é¢ç»„ä»¶ ModuleControllerï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª K8S Operatorï¼Œæä¾›æ¨¡å—å‘å¸ƒä¸è¿ç»´èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬å…¬å¸æœ‰è‡ªå·±çš„å‘å¸ƒç³»ç»Ÿã€åº”ç”¨ç®¡ç†å¹³å°ï¼Œå¾ˆå°‘å…è®¸è¿è¡Œé¢å¤–çš„æ§åˆ¶é¢ç»„ä»¶ï¼Œé‚£ä¹ˆé™¤å» ModuleControllerï¼Œæˆ‘ä¸ªäººè®¤ä¸ºï¼ŒKoupleless çº¦ç­‰äº SOFAArkã€‚&lt;/p&gt;
&lt;p&gt;Koupleless å¢å¼ºäº† SOFAArk è¿ç»´éƒ¨ç½²ç›¸å…³çš„åŠŸèƒ½ï¼Œè§£å†³äº† SOFAArk åœ¨ä¼ä¸šå†…æ— æ³•å¼€ç®±å³ç”¨çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id="åº”ç”¨æ¥å…¥é‡è§é—®é¢˜"&gt;åº”ç”¨æ¥å…¥é‡è§é—®é¢˜&lt;/h2&gt;
&lt;p&gt;åŸºäºå®˜æ–¹æ–‡æ¡£æˆ‘ä»¬æ”¹é€ æ¥å…¥äº†å‡ ä¸ªåº”ç”¨ï¼Œåˆ†äº«å‡ ä¸ªæˆ‘ä»¬é‡è§çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å¯¹ Java 17 æˆ– 21 çš„æ”¯æŒä¸å¥½ã€‚
è™½ç„¶å®˜æ–¹å·²ç»å£°ç§°æ”¯æŒ Java 17ï¼Œä½†æ˜¯è‹¥ç”¨äº† Java 17 çš„è¯­æ³•æˆ–æ–°ç‰¹æ€§ï¼Œæ— æ³•ç¼–è¯‘é€šè¿‡ã€‚æœ€ååªå¥½è‡ªç¼–è¯‘ SOFAArk plugin ä¿®æ”¹ç›¸å…³ä¾èµ–è§£å†³ã€‚&lt;/p&gt;</description></item><item><title>å®¹å™¨é•œåƒåˆ¶ä½œæœ€ä½³å®è·µï¼Œå¤šæ¶æ„ç¼–è¯‘ï¼ŒDockerfile ç¼–å†™å°æŠ€å·§å’Œè¸©å‘è®°å½•ï¼Œé•œåƒç»´æŠ¤è¾…åŠ©å·¥å…· ORASã€skopeo ç­‰ä»‹ç»</title><link>https://www.xlabs.club/blog/docker-best-practices/</link><pubDate>Fri, 24 May 2024 20:56:08 +0800</pubDate><guid>https://www.xlabs.club/blog/docker-best-practices/</guid><description>&lt;p&gt;æ±‡æ€»æ•´ç†äº†å®¹å™¨é•œåƒåˆ¶ä½œæœ€ä½³å®è·µã€å¤šæ¶æ„ç¼–è¯‘ã€Dockerfile ç¼–å†™å°æŠ€å·§ç­‰å¸¸ç”¨æŠ€æœ¯é—®é¢˜ï¼ŒåŒæ—¶ä»‹ç»ä¸‹æˆ‘æ—¥å¸¸ä½¿ç”¨çš„ ORASã€skopeo ç­‰è¾…åŠ©å·¥å…·ã€‚&lt;/p&gt;
&lt;h2 id="æœ€ä½³å®è·µ"&gt;æœ€ä½³å®è·µ&lt;/h2&gt;
&lt;p&gt;æ•´ç†äº†ç”± Docker å®˜æ–¹å’Œç¤¾åŒºæ¨èçš„ç”¨äºæ„å»ºé«˜æ•ˆé•œåƒçš„æœ€ä½³å®è·µå’Œæ–¹æ³•ï¼Œå½“ç„¶æœ‰äº›å¯èƒ½å¹¶ä¸é€‚ç”¨äºä½ ï¼Œè¯·æ³¨æ„åˆ†è¾¨ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨å®˜æ–¹é•œåƒä½œä¸ºåŸºç¡€é•œåƒã€‚å®˜æ–¹é•œåƒç»è¿‡äº†å……åˆ†éªŒè¯å¹¶é›†æˆäº†æœ€ä½³å®è·µã€‚&lt;/p&gt;



&lt;div class="expressive-code"&gt;
 &lt;figure class="frame not-content"&gt;
 &lt;figcaption class="header"&gt;
 &lt;span class="title"&gt;&lt;/span&gt;
 &lt;/figcaption&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-dockerfile" data-lang="dockerfile"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# æ­£ä¾‹ï¼š&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;&lt;/span&gt; FROM node&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;&lt;/span&gt;&lt;span class="c"&gt;# åä¾‹ï¼š&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;&lt;/span&gt; FROM ubuntu&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;&lt;/span&gt; RUN apt-get install -y node&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
 &lt;/figure&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¿æŒå°½å¯èƒ½å°çš„é•œåƒå¤§å°ï¼Œç»ä¸å®‰è£…æ— å…³ä¾èµ–ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸¥æ ¼çš„ç‰ˆæœ¬åŒ–ç®¡ç†ï¼Œä½¿ç”¨ç¡®å®šæ€§çš„æ ‡ç­¾ï¼ŒåŸºç¡€é•œåƒç¦ç”¨ latestã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ .dockerignore æ–‡ä»¶æ’é™¤æ–‡ä»¶å¹²æ‰°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ€ç»å¸¸å˜åŒ–çš„å‘½ä»¤è¶Šå¾€åæ‰§è¡Œï¼Œå……åˆ†åˆ©ç”¨åˆ†å±‚ç¼“å­˜æœºåˆ¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Dockerfile ä¸­æ¯è¡Œå‘½ä»¤äº§ç”Ÿä¸€å±‚ï¼Œè¯·åˆå¹¶å‘½ä»¤æ‰§è¡Œï¼Œæœ€å¤§é™åº¦å‡å°‘å±‚æ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºï¼Œå‡å°‘æ‰€æ„å»ºé•œåƒçš„å¤§å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¦ç”¨ root ç”¨æˆ·ï¼Œä½¿ç”¨ç‹¬ç«‹çš„ use å’Œ groupã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯ç”¨é•œåƒå®‰å…¨æ‰«æï¼Œå¹¶åŠæ—¶æ›´æ–°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸€ä¸ªå®¹å™¨åªä¸“æ³¨åšä¸€ä»¶äº‹æƒ…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Java åº”ç”¨ç¨‹åºä¸è¦ä½¿ç”¨ PID ä¸º 1 çš„è¿›ç¨‹ï¼Œä½¿ç”¨ tini æˆ– dump-init ç®¡ç†è¿›ç¨‹ï¼Œé¿å…åƒµå°¸è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»¥ä¸Šéƒ½æ˜¯ä¸€äº›åŸºæœ¬çš„åŸåˆ™ï¼Œä½†æ˜¯å®é™…å·¥ä½œçš„è¿‡ç¨‹ä¸­ï¼Œå¤§å®¶å¯èƒ½ä¼šåƒæˆ‘ä¸€æ ·çº ç»“å‡ ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…³äºç¬¬ 1 ç‚¹ï¼Œä¸€å®šè¦ä½¿ç”¨å®˜æ–¹é•œåƒå—ã€‚æœªå¿…ï¼Œçœ‹æƒ…å†µã€‚æ¯”å¦‚æˆ‘ä»¬ä½œä¸ºå¹³å°ï¼Œæ¶‰åŠå¾ˆå¤šç§å¼€å‘è¯­è¨€ï¼Œå¾ˆå¤šç§ç»„åˆåœºæ™¯ï¼Œæ¯ä¸ªå®˜æ–¹åŸºç¡€é•œåƒå¯èƒ½éƒ½ä¸åŒï¼Œå°±ä¼šè‡ªå»ºåŸºç¡€é•œåƒï¼Œä»¥ä¾¿ç»Ÿä¸€æ“ä½œç³»ç»Ÿã€ç»Ÿä¸€è„šæœ¬å’Œå®‰å…¨ç»´æŠ¤ã€‚ä¸ºä»€ä¹ˆè¦ç»Ÿä¸€æ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»ŸæŠ•çš„æ¯’ï¼Œå°±åƒå‡ºéª¨é±¼ç‰‡é‡Œæœªå‡€çš„åˆºï¼Œç»™äººä¸€ç§ä¸æœŸå¾…çš„ä¼¤ç—›ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†é•œåƒå¤§å°å’Œå®‰å…¨ï¼Œä¸€å®šè¦ä½¿ç”¨ Alpine æˆ– distroless é•œåƒå—ã€‚æˆ‘çš„å»ºè®®æ˜¯ä¸è¦ä½¿ç”¨ Alpine é•œåƒï¼Œå¦‚æœ‰èƒ½åŠ›æ‰ä½¿ç”¨ distroless é•œåƒã€‚æ¯•ç«Ÿ libc çš„å‘ï¼Œè°ç—›è°çŸ¥é“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="dockerfile-ç¼–å†™å°æŠ€å·§"&gt;Dockerfile ç¼–å†™å°æŠ€å·§&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ Heredocs è¯­æ³•ä»£æ›¿åˆé•¿åˆè‡­çš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå½“ç„¶ Heredocs æ”¯æŒæ›´å¤šåŠŸèƒ½æ¯”å¦‚ run pythonã€å¤šæ–‡ä»¶å†…å®¹æ‹·è´ï¼Œå…·ä½“è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚&lt;/p&gt;</description></item><item><title>Java 25 å®Œæ•´å‡çº§æŒ‡å—ï¼šä» Java 8 åˆ° Java 25 æ–°ç‰¹æ€§ã€æ€§èƒ½ä¼˜åŒ–ã€è¿ç§»å®æˆ˜å…¨è§£æ</title><link>https://www.xlabs.club/blog/migrating-java8-to-java25/</link><pubDate>Thu, 23 May 2024 21:03:11 +0800</pubDate><guid>https://www.xlabs.club/blog/migrating-java8-to-java25/</guid><description>å…¨é¢è§£æ Java 25 æ–°ç‰¹æ€§ä¸å‡çº§å®æˆ˜ï¼ŒåŒ…å«æ€§èƒ½ä¼˜åŒ–ã€è¿ç§»å·¥å…·ã€é¿å‘æŒ‡å—</description></item><item><title>ä½¿ç”¨ Pulumi éƒ¨ç½² cert-manager åˆ›å»º K8S è‡ªç­¾åè¯ä¹¦å¹¶ä¿¡ä»»è¯ä¹¦</title><link>https://www.xlabs.club/blog/trust-cert-manager-selfsigned-tls/</link><pubDate>Mon, 29 Apr 2024 21:49:22 +0800</pubDate><guid>https://www.xlabs.club/blog/trust-cert-manager-selfsigned-tls/</guid><description>&lt;p&gt;åœ¨æ­å»ºæœ¬åœ° Kubernetus é›†ç¾¤åï¼Œç”±äºç¯å¢ƒåœ¨å†…ç½‘ï¼Œåšä¸äº†åŸŸåéªŒè¯ï¼Œæ— æ³•ä½¿ç”¨ Let&amp;rsquo;s Encrypt é¢å‘å’Œè‡ªåŠ¨æ›´æ–°è¯ä¹¦ï¼Œç„¶è€Œå¾ˆå¤šåº”ç”¨è¦æ±‚å¿…é¡»å¯ç”¨ HTTPSï¼Œåªèƒ½ç”¨è‡ªç­¾å CA è¯ä¹¦ï¼Œå¹¶ç”±æ­¤ CA ç»§ç»­é¢å‘å…¶ä»–è¯ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬å‡†å¤‡äº†ä»¥ä¸‹å·¥å…·ï¼Œå¼€å§‹æ­å»ºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.pulumi.com/" target="_blank" rel="noopener"&gt;Pulumi&lt;/a&gt;
: å½“å‰éå¸¸æµè¡Œçš„ IaC å·¥å…·ï¼Œå€¼å¾—ä¸€è¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href="https://cert-manager.io/" target="_blank" rel="noopener"&gt;cert-manager&lt;/a&gt;
: äº‘åŸç”Ÿè¯ä¹¦ç®¡ç†ï¼Œç”¨äºè‡ªåŠ¨ç®¡ç†å’Œé¢å‘å„ç§å‘è¡Œæ¥æºçš„ TLS è¯ä¹¦ã€‚å®ƒå°†ç¡®ä¿è¯ä¹¦æœ‰æ•ˆå¹¶å®šæœŸæ›´æ–°ï¼Œå¹¶å°è¯•åœ¨åˆ°æœŸå‰çš„é€‚å½“æ—¶é—´æ›´æ–°è¯ä¹¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ ¸å¿ƒæ­¥éª¤å’Œç›¸å…³ä»£ç å¦‚ä¸‹ï¼Œæ›´å¤šæºç è¯·å‚è€ƒæˆ‘ä»¬çš„ GitHub é¡¹ç›® &lt;a href="https://github.com/xlabs-club/xlabs-ops" target="_blank" rel="noopener"&gt;xlabs-ops&lt;/a&gt;
ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Pulumi å®‰è£… cert-managerï¼Œç”Ÿæˆè‡ªç­¾å CA è¯ä¹¦ï¼Œæ ¹æ®è‡ªç­¾å CA è¯ä¹¦ç”Ÿæˆ cert-manager ClusterIssuerï¼Œéƒ½åœ¨å¦‚ä¸‹ä»£ç äº†ã€‚&lt;/p&gt;



&lt;div class="expressive-code"&gt;
 &lt;figure class="frame not-content"&gt;
 &lt;figcaption class="header"&gt;
 &lt;span class="title"&gt;&lt;/span&gt;
 &lt;/figcaption&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-ts" data-lang="ts"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;import&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="kr"&gt;as&lt;/span&gt; &lt;span class="nx"&gt;pulumi&lt;/span&gt; &lt;span class="kr"&gt;from&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;@pulumi/pulumi&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;import&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="kr"&gt;as&lt;/span&gt; &lt;span class="nx"&gt;kubernetes&lt;/span&gt; &lt;span class="kr"&gt;from&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;@pulumi/kubernetes&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;import&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="kr"&gt;as&lt;/span&gt; &lt;span class="nx"&gt;tls&lt;/span&gt; &lt;span class="kr"&gt;from&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;@pulumi/tls&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// éƒ¨ç½² cert-manager Helm chart
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;certManagerRelease&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;kubernetes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;helm&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;v3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Release&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;cert-manager&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;cert-manager&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;chart&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;cert-manager&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;version&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;1.14.5&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;namespace&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;cert-manager&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;createNamespace&lt;/span&gt;: &lt;span class="kt"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;timeout&lt;/span&gt;: &lt;span class="kt"&gt;600&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;repositoryOpts&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;repo&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;https://charts.jetstack.io&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;values&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;installCRDs&lt;/span&gt;: &lt;span class="kt"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// ç”Ÿæˆä¸€ä¸ª CA private key
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;caPrivateKey&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;tls&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;PrivateKey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;caPrivateKey&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;algorithm&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;RSA&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// ç”Ÿæˆä¸€ä¸ª è‡ªç­¾å CA è¯ä¹¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;caCert&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;tls&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;SelfSignedCert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;caCert&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// keyAlgorithm: &amp;#34;RSA&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt; &lt;span class="nx"&gt;privateKeyPem&lt;/span&gt;: &lt;span class="kt"&gt;caPrivateKey.privateKeyPem&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;isCaCertificate&lt;/span&gt;: &lt;span class="kt"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;validityPeriodHours&lt;/span&gt;: &lt;span class="kt"&gt;87600&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c1"&gt;// 10 year
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt; &lt;span class="nx"&gt;allowedUses&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;cert_signing&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;crl_signing&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;subject&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;commonName&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;your.domain.com&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;organization&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Xlabs Club&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// ç”Ÿæˆä¸€ä¸ªå¸¦æœ‰ CA crt å’Œ key çš„ Kubernetes Secret
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;caSecret&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;kubernetes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;core&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;v1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Secret&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;caSecret&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;metadata&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;selfsigned-cert-manager-ca&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;namespace&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;cert-manager&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;type&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Opaque&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;stringData&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;tls.crt&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;caCert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;certPem&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;tls.key&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;caPrivateKey&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;privateKeyPem&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// åˆ›å»ºä¸€ä¸ªè‡ªç­¾åçš„ ClusterIssuer ç»™ ingress ç”¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;clusterIssuer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;kubernetes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;apiextensions&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;CustomResource&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;selfsigned-issuer&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;apiVersion&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;cert-manager.io/v1&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;kind&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;ClusterIssuer&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;metadata&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;selfsigned-issuer&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// æ³¨æ„ ClusterIssuer å’Œ caSecret æ”¾åœ¨åŒä¸€ä¸ª namespaceï¼Œä¸å†™ namespace æ—¶ ClusterIssuer æ‰¾ä¸åˆ° caSecret
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt; &lt;span class="kr"&gt;namespace&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;cert-manager&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;spec&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;ca&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;secretName&lt;/span&gt;: &lt;span class="kt"&gt;caSecret.metadata.name&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;dependsOn&lt;/span&gt;: &lt;span class="kt"&gt;certManagerRelease&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;export&lt;/span&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;certManagerVersion&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;certManagerRelease&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;version&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;export&lt;/span&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;clusterIssuerName&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;clusterIssuer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;metadata&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// Export CA è¯ä¹¦ï¼Œä¾¿äºå®¢æˆ·ç«¯å¯¼å…¥ä¿¡ä»»è¯ä¹¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="kr"&gt;export&lt;/span&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;caCertificatePem&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;caCert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;certPem&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
 &lt;/figure&gt;
&lt;/div&gt;
&lt;p&gt;ä»¥ä¸Šæ‰§è¡Œ &lt;code&gt;pulumi up&lt;/code&gt; åï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªè‡ªç­¾åçš„ CA è¯ä¹¦ã€ä¸€ä¸ªå¯ç”¨äºä¸º ingress è‡ªåŠ¨ç­¾å‘ TLS çš„ ClusterIssuerã€‚&lt;/p&gt;</description></item></channel></rss>